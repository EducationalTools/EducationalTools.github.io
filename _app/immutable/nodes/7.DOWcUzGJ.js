import"../chunks/CWj6FrbW.js";import{p as U,f as p,e as d,a as t,c as q,s as g,d as L,i as z,n as _,g as G,l as H,t as E,r as N,b as M,m as b}from"../chunks/Cd13tLbQ.js";import{s as Q}from"../chunks/1ScPFJNN.js";import{c}from"../chunks/0bJNegf6.js";import{p as I}from"../chunks/XbGOAbxH.js";import{B as O}from"../chunks/Bs6Bh5AQ.js";import{C as V,a as W,b as X,c as Y,d as Z}from"../chunks/6vKR_qjv.js";import{R as rr,A as er,r as tr}from"../chunks/B2-FlKhn.js";import{L as ar}from"../chunks/BIMJUU0b.js";import{t as x}from"../chunks/DRlt9cCa.js";var or=p("<!> Loading",1),sr=p('This will clear all of your existing data on <span class="font-mono"> </span>',1),nr=p("<!> <!>",1),lr=p("<!> <!>",1),ir=p("<!> <!>",1),dr=p('<!> <div class="flex h-full w-full items-center justify-center p-3"><!></div>',1);function wr(J,K){U(K,!0);let u=H(!1);function R(n){if(!n||n.trim()==="")throw new Error("No data provided");let f;try{f=atob(n)}catch{throw new Error("Invalid base64 data")}let r;try{r=JSON.parse(f)}catch{throw new Error("Invalid JSON data")}if(typeof r!="object"||r===null||Array.isArray(r))throw new Error("Backup data must be an object");if(r.cookies!==void 0&&typeof r.cookies!="string")throw new Error("Cookies data must be a string");if(r.localstorage!==void 0&&(typeof r.localstorage!="object"||Array.isArray(r.localstorage)))throw new Error("LocalStorage data must be an object");if(r.sessionstorage!==void 0&&(typeof r.sessionstorage!="object"||Array.isArray(r.sessionstorage)))throw new Error("SessionStorage data must be an object");const k=["cookies","localstorage","sessionstorage"],a=Object.keys(r).filter(o=>!k.includes(o));if(a.length>0)throw new Error(`Unexpected properties in backup data: ${a.join(", ")}`)}var A=dr(),P=d(A);c(P,()=>rr,(n,f)=>{f(n,{get open(){return G(u)},children:(r,k)=>{var a=z(),o=d(a);c(o,()=>er,(j,m)=>{m(j,{class:"flex flex-row gap-3",children:(v,h)=>{var w=or(),l=d(w);ar(l,{class:"animate-spin"}),_(),t(v,w)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})});var B=g(P,2),D=L(B);c(D,()=>V,(n,f)=>{f(n,{class:"max-w-full min-w-96",children:(r,k)=>{var a=ir(),o=d(a);c(o,()=>W,(m,v)=>{v(m,{children:(h,w)=>{var l=nr(),$=d(l);c($,()=>X,(e,s)=>{s(e,{children:(i,F)=>{_();var y=E("Importing data");t(i,y)},$$slots:{default:!0}})});var C=g($,2);c(C,()=>Y,(e,s)=>{s(e,{children:(i,F)=>{_();var y=sr(),S=g(d(y)),T=L(S,!0);N(S),M(()=>Q(T,I.url.hostname)),t(i,y)},$$slots:{default:!0}})}),t(h,l)},$$slots:{default:!0}})});var j=g(o,2);c(j,()=>Z,(m,v)=>{v(m,{class:"flex flex-row justify-end gap-3",children:(h,w)=>{var l=lr(),$=d(l);O($,{variant:"outline",onclick:()=>{history.back()},children:(e,s)=>{_();var i=E("Cancel");t(e,i)},$$slots:{default:!0}});var C=g($,2);O(C,{variant:"destructive",onclick:()=>{b(u,!0);let e=I.url.searchParams.get("data");if(e){try{R(e)}catch(s){b(u,!1),s instanceof Error?x.error("Backup data is invalid",{description:s.message}):x.error("Backup data is invalid")}try{tr(e)}catch{b(u,!1),x.error("Failed to import data")}}else b(u,!1),x.error("No data provided")},children:(e,s)=>{_();var i=E("Continue");t(e,i)},$$slots:{default:!0}}),t(h,l)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})}),N(B),t(J,A),q()}export{wr as component};
