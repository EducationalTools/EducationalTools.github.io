import"../chunks/Bzak7iHL.js";import{o as te}from"../chunks/Br6Ioy7M.js";import{aA as Rt,p as rt,e as X,g as x,a as i,c as at,i as w,ax as it,f as j,d as ot,h as $t,r as lt,n as R,t as Q,b as Bt,s as O,k as K,j as ft,N as Lt,aw as ee}from"../chunks/Dbp7H6Se.js";import{i as jt}from"../chunks/BVaUVRfb.js";import{e as re,i as ae}from"../chunks/eF4JDJ-R.js";import{c as v}from"../chunks/CmlflnMv.js";import{a as se,D as ne,b as oe,c as le,C as Zt,u as ie,d as It,e as ue,S as ce,f as de,I as fe}from"../chunks/BQfgpeOU.js";import"../chunks/BqV2srUc.js";import{g as ve}from"../chunks/gnU0ypJ3.js";import{b as pt,B as kt}from"../chunks/CniIsVsE.js";import{a as St,b as Ct,C as At}from"../chunks/BH1bE3G0.js";import{C as $e}from"../chunks/PaBzqky2.js";import{C as he,a as Qt}from"../chunks/PSGHxDei.js";import{I as Mt}from"../chunks/BpCEae25.js";import{R as Ot,A as Tt,r as Gt}from"../chunks/BFD4y5yZ.js";import{a as dt,s as Ht}from"../chunks/BcaRsr3o.js";import{p as yt}from"../chunks/OXaWnedQ.js";import{t as ct}from"../chunks/C4id6Wg5.js";import{p as et,r as nt,s as ht,b as Dt}from"../chunks/DGy21wtP.js";import{H as ge}from"../chunks/BN1zrJH8.js";import{a as gt,c as vt}from"../chunks/BBgrYZKF.js";import{b as Kt,d as xt,m as Xt}from"../chunks/Cq5lyTuw.js";import"../chunks/BCJFwS9R.js";import{f as _e,A as me,L as Yt}from"../chunks/COXu2Vpd.js";import{I as pe}from"../chunks/D48_JoYc.js";import{c as Ft}from"../chunks/C_1WbdsR.js";import{A as ye}from"../chunks/DkCRQ0Bf.js";var xe=j("<button><!></button>");function be(P,e){const d=Rt();rt(e,!0);let h=et(e,"id",19,()=>Kt(d)),u=et(e,"ref",15,null),b=nt(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const c=_e.create({id:xt.with(()=>h()),ref:xt.with(()=>u(),q=>u(q))}),p=it(()=>Xt(b,c.props));var S=X(),C=x(S);{var G=q=>{var y=X(),B=x(y);dt(B,()=>e.child,()=>({props:w(p)})),i(q,y)},V=q=>{var y=xe();gt(y,()=>({...w(p)}));var B=ot(y);dt(B,()=>e.children??$t),lt(y),i(q,y)};jt(C,q=>{e.child?q(G):q(V,!1)})}i(P,S),at()}var ke=j("<button><!></button>");function we(P,e){const d=Rt();rt(e,!0);let h=et(e,"id",19,()=>Kt(d)),u=et(e,"ref",15,null),b=et(e,"disabled",3,!1),c=nt(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const p=me.create({id:xt.with(()=>h()),ref:xt.with(()=>u(),y=>u(y)),disabled:xt.with(()=>!!b())}),S=it(()=>Xt(c,p.props));var C=X(),G=x(C);{var V=y=>{var B=X(),st=x(B);dt(st,()=>e.child,()=>({props:w(S)})),i(y,B)},q=y=>{var B=ke();gt(B,()=>({...w(S)}));var st=ot(B);dt(st,()=>e.children??$t),lt(B),i(y,B)};jt(G,y=>{e.child?y(V):y(q,!1)})}i(P,C),at()}function Pe(P,e){rt(e,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let d=nt(e,["$$slots","$$events","$$legacy"]);const h=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];pe(P,ht({name:"trash"},()=>d,{get iconNode(){return h},children:(u,b)=>{var c=X(),p=x(c);dt(p,()=>e.children??$t),i(u,c)},$$slots:{default:!0}})),at()}var De=j("<div><!></div>");function Me(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var u=De();gt(u,c=>({"data-slot":"alert-description",class:c,...h}),[()=>vt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e.class)]);var b=ot(u);dt(b,()=>e.children??$t),lt(u),Dt(u,c=>d(c),()=>d()),i(P,u),at()}var Se=j("<div><!></div>");function Ce(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var u=Se();gt(u,c=>({"data-slot":"alert-title",class:c,...h}),[()=>vt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e.class)]);var b=ot(u);dt(b,()=>e.children??$t),lt(u),Dt(u,c=>d(c),()=>d()),i(P,u),at()}var wt={exports:{}},Ae=wt.exports,Nt;function Oe(){return Nt||(Nt=1,function(P,e){(function(d,h){P.exports=h()})(Ae,function(){var d=1e3,h=6e4,u=36e5,b="millisecond",c="second",p="minute",S="hour",C="day",G="week",V="month",q="quarter",y="year",B="date",st="Invalid Date",_t=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],t=n%100;return"["+n+(r[(t-20)%10]||r[t]||r[0])+"]"}},J=function(n,r,t){var s=String(n);return!s||s.length>=r?n:""+Array(r+1-s.length).join(t)+n},tt={s:J,z:function(n){var r=-n.utcOffset(),t=Math.abs(r),s=Math.floor(t/60),a=t%60;return(r<=0?"+":"-")+J(s,2,"0")+":"+J(a,2,"0")},m:function n(r,t){if(r.date()<t.date())return-n(t,r);var s=12*(t.year()-r.year())+(t.month()-r.month()),a=r.clone().add(s,V),o=t-a<0,l=r.clone().add(s+(o?-1:1),V);return+(-(s+(t-a)/(o?a-l:l-a))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:V,y,w:G,d:C,D:B,h:S,m:p,s:c,ms:b,Q:q}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},A="en",L={};L[A]=Z;var E="$isDayjsObject",T=function(n){return n instanceof I||!(!n||!n[E])},D=function n(r,t,s){var a;if(!r)return A;if(typeof r=="string"){var o=r.toLowerCase();L[o]&&(a=o),t&&(L[o]=t,a=o);var l=r.split("-");if(!a&&l.length>1)return n(l[0])}else{var $=r.name;L[$]=r,a=$}return!s&&a&&(A=a),a||!s&&A},g=function(n,r){if(T(n))return n.clone();var t=typeof r=="object"?r:{};return t.date=n,t.args=arguments,new I(t)},f=tt;f.l=D,f.i=T,f.w=function(n,r){return g(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var I=function(){function n(t){this.$L=D(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[E]=!0}var r=n.prototype;return r.parse=function(t){this.$d=function(s){var a=s.date,o=s.utc;if(a===null)return new Date(NaN);if(f.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var l=a.match(_t);if(l){var $=l[2]-1||0,m=(l[7]||"0").substring(0,3);return o?new Date(Date.UTC(l[1],$,l[3]||1,l[4]||0,l[5]||0,l[6]||0,m)):new Date(l[1],$,l[3]||1,l[4]||0,l[5]||0,l[6]||0,m)}}return new Date(a)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return f},r.isValid=function(){return this.$d.toString()!==st},r.isSame=function(t,s){var a=g(t);return this.startOf(s)<=a&&a<=this.endOf(s)},r.isAfter=function(t,s){return g(t)<this.startOf(s)},r.isBefore=function(t,s){return this.endOf(s)<g(t)},r.$g=function(t,s,a){return f.u(t)?this[s]:this.set(a,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,s){var a=this,o=!!f.u(s)||s,l=f.p(t),$=function(U,M){var ut=f.w(a.$u?Date.UTC(a.$y,M,U):new Date(a.$y,M,U),a);return o?ut:ut.endOf(C)},m=function(U,M){return f.w(a.toDate()[U].apply(a.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(M)),a)},_=this.$W,k=this.$M,H=this.$D,W="set"+(this.$u?"UTC":"");switch(l){case y:return o?$(1,0):$(31,11);case V:return o?$(1,k):$(0,k+1);case G:var F=this.$locale().weekStart||0,z=(_<F?_+7:_)-F;return $(o?H-z:H+(6-z),k);case C:case B:return m(W+"Hours",0);case S:return m(W+"Minutes",1);case p:return m(W+"Seconds",2);case c:return m(W+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,s){var a,o=f.p(t),l="set"+(this.$u?"UTC":""),$=(a={},a[C]=l+"Date",a[B]=l+"Date",a[V]=l+"Month",a[y]=l+"FullYear",a[S]=l+"Hours",a[p]=l+"Minutes",a[c]=l+"Seconds",a[b]=l+"Milliseconds",a)[o],m=o===C?this.$D+(s-this.$W):s;if(o===V||o===y){var _=this.clone().set(B,1);_.$d[$](m),_.init(),this.$d=_.set(B,Math.min(this.$D,_.daysInMonth())).$d}else $&&this.$d[$](m);return this.init(),this},r.set=function(t,s){return this.clone().$set(t,s)},r.get=function(t){return this[f.p(t)]()},r.add=function(t,s){var a,o=this;t=Number(t);var l=f.p(s),$=function(k){var H=g(o);return f.w(H.date(H.date()+Math.round(k*t)),o)};if(l===V)return this.set(V,this.$M+t);if(l===y)return this.set(y,this.$y+t);if(l===C)return $(1);if(l===G)return $(7);var m=(a={},a[p]=h,a[S]=u,a[c]=d,a)[l]||1,_=this.$d.getTime()+t*m;return f.w(_,this)},r.subtract=function(t,s){return this.add(-1*t,s)},r.format=function(t){var s=this,a=this.$locale();if(!this.isValid())return a.invalidDate||st;var o=t||"YYYY-MM-DDTHH:mm:ssZ",l=f.z(this),$=this.$H,m=this.$m,_=this.$M,k=a.weekdays,H=a.months,W=a.meridiem,F=function(M,ut,mt,bt){return M&&(M[ut]||M(s,o))||mt[ut].slice(0,bt)},z=function(M){return f.s($%12||12,M,"0")},U=W||function(M,ut,mt){var bt=M<12?"AM":"PM";return mt?bt.toLowerCase():bt};return o.replace(N,function(M,ut){return ut||function(mt){switch(mt){case"YY":return String(s.$y).slice(-2);case"YYYY":return f.s(s.$y,4,"0");case"M":return _+1;case"MM":return f.s(_+1,2,"0");case"MMM":return F(a.monthsShort,_,H,3);case"MMMM":return F(H,_);case"D":return s.$D;case"DD":return f.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return F(a.weekdaysMin,s.$W,k,2);case"ddd":return F(a.weekdaysShort,s.$W,k,3);case"dddd":return k[s.$W];case"H":return String($);case"HH":return f.s($,2,"0");case"h":return z(1);case"hh":return z(2);case"a":return U($,m,!0);case"A":return U($,m,!1);case"m":return String(m);case"mm":return f.s(m,2,"0");case"s":return String(s.$s);case"ss":return f.s(s.$s,2,"0");case"SSS":return f.s(s.$ms,3,"0");case"Z":return l}return null}(M)||l.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,s,a){var o,l=this,$=f.p(s),m=g(t),_=(m.utcOffset()-this.utcOffset())*h,k=this-m,H=function(){return f.m(l,m)};switch($){case y:o=H()/12;break;case V:o=H();break;case q:o=H()/3;break;case G:o=(k-_)/6048e5;break;case C:o=(k-_)/864e5;break;case S:o=k/u;break;case p:o=k/h;break;case c:o=k/d;break;default:o=k}return a?o:f.a(o)},r.daysInMonth=function(){return this.endOf(V).$D},r.$locale=function(){return L[this.$L]},r.locale=function(t,s){if(!t)return this.$L;var a=this.clone(),o=D(t,s,!0);return o&&(a.$L=o),a},r.clone=function(){return f.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n}(),Y=I.prototype;return g.prototype=Y,[["$ms",b],["$s",c],["$m",p],["$H",S],["$W",C],["$M",V],["$y",y],["$D",B]].forEach(function(n){Y[n[1]]=function(r){return this.$g(r,n[0],n[1])}}),g.extend=function(n,r){return n.$i||(n(r,I,g),n.$i=!0),g},g.locale=D,g.isDayjs=T,g.unix=function(n){return g(1e3*n)},g.en=L[A],g.Ls=L,g.p={},g})}(wt)),wt.exports}var Te=Oe();const je=ve(Te),Pt=se;function Wt(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref"]);var u=X(),b=x(u);v(b,()=>ne,(c,p)=>{p(c,ht({"data-slot":"alert-dialog-trigger"},()=>h,{get ref(){return d()},set ref(S){d(S)}}))}),i(P,u),at()}function zt(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var u=X(),b=x(u);{let c=it(()=>vt("text-lg font-semibold",e.class));v(b,()=>oe,(p,S)=>{S(p,ht({"data-slot":"alert-dialog-title",get class(){return w(c)}},()=>h,{get ref(){return d()},set ref(C){d(C)}}))})}i(P,u),at()}function Vt(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var u=X(),b=x(u);{let c=it(()=>vt(pt(),e.class));v(b,()=>be,(p,S)=>{S(p,ht({"data-slot":"alert-dialog-action",get class(){return w(c)}},()=>h,{get ref(){return d()},set ref(C){d(C)}}))})}i(P,u),at()}function Et(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var u=X(),b=x(u);{let c=it(()=>vt(pt({variant:"outline"}),e.class));v(b,()=>we,(p,S)=>{S(p,ht({"data-slot":"alert-dialog-cancel",get class(){return w(c)}},()=>h,{get ref(){return d()},set ref(C){d(C)}}))})}i(P,u),at()}var Be=j("<div><!></div>");function Ut(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var u=Be();gt(u,c=>({"data-slot":"alert-dialog-footer",class:c,...h}),[()=>vt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var b=ot(u);dt(b,()=>e.children??$t),lt(u),Dt(u,c=>d(c),()=>d()),i(P,u),at()}var Le=j("<div><!></div>");function qt(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var u=Le();gt(u,c=>({"data-slot":"alert-dialog-header",class:c,...h}),[()=>vt("flex flex-col gap-2 text-center sm:text-left",e.class)]);var b=ot(u);dt(b,()=>e.children??$t),lt(u),Dt(u,c=>d(c),()=>d()),i(P,u),at()}function Jt(P,e){rt(e,!0);let d=et(e,"ref",15,null),h=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var u=X(),b=x(u);{let c=it(()=>vt("text-muted-foreground text-sm",e.class));v(b,()=>le,(p,S)=>{S(p,ht({"data-slot":"alert-dialog-description",get class(){return w(c)}},()=>h,{get ref(){return d()},set ref(C){d(C)}}))})}i(P,u),at()}var Ie=j("<!> <!>",1),He=j("<!> <!>",1),Ye=j("<!> <!>",1),Fe=j("<!> <!>",1),Ne=j("<!> <!>",1),We=j("<!> <!>",1),ze=j("<!> <!>",1),Ve=j("<!> <!>",1),Ee=j("<!> <!>",1),Ue=j("<!> <!> <!>",1),qe=j("<!> <!>",1);function Je(P,e){rt(e,!0);let d=ft(!1),h=ft(!1);var u=X(),b=x(u);v(b,()=>At,(c,p)=>{p(c,{children:(S,C)=>{var G=qe(),V=x(G);v(V,()=>St,(y,B)=>{B(y,{children:(st,_t)=>{var N=Ie(),Z=x(N);v(Z,()=>Ct,(tt,A)=>{A(tt,{children:(L,E)=>{R();var T=Q();Bt(()=>Ht(T,e.backup.name)),i(L,T)},$$slots:{default:!0}})});var J=O(Z,2);v(J,()=>he,(tt,A)=>{A(tt,{children:(L,E)=>{R();var T=Q();Bt(D=>Ht(T,D),[()=>je(e.backup.creationTime).format("hh:mm a - DD/MM/YY")]),i(L,T)},$$slots:{default:!0}})}),i(st,N)},$$slots:{default:!0}})});var q=O(V,2);v(q,()=>Qt,(y,B)=>{B(y,{class:"flex flex-row gap-3",children:(st,_t)=>{var N=Ue(),Z=x(N);kt(Z,{variant:"outline",size:"icon",onclick:()=>{yt.capture("backup",{type:"copy",location:"cloud"}),navigator.clipboard.writeText(e.backup.data).then(()=>{ct.success("Backup copied to clipboard")}).catch(A=>{ct.error("Failed to copy backup to clipboard")})},children:(A,L)=>{Zt(A,{})},$$slots:{default:!0}});var J=O(Z,2);v(J,()=>Ot,(A,L)=>{L(A,{get open(){return w(d)},set open(E){K(d,E,!0)},children:(E,T)=>{var D=Ne(),g=x(D);{let I=it(()=>pt({variant:"default",size:"icon"}));v(g,()=>Wt,(Y,n)=>{n(Y,{get class(){return w(I)},children:(r,t)=>{ge(r,{})},$$slots:{default:!0}})})}var f=O(g,2);v(f,()=>Tt,(I,Y)=>{Y(I,{children:(n,r)=>{var t=Fe(),s=x(t);v(s,()=>qt,(o,l)=>{l(o,{children:($,m)=>{var _=He(),k=x(_);v(k,()=>zt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Restore Backup?");i(z,M)},$$slots:{default:!0}})});var H=O(k,2);v(H,()=>Jt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("This will replace all your current data");i(z,M)},$$slots:{default:!0}})}),i($,_)},$$slots:{default:!0}})});var a=O(s,2);v(a,()=>Ut,(o,l)=>{l(o,{children:($,m)=>{var _=Ye(),k=x(_);v(k,()=>Et,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Cancel");i(z,M)},$$slots:{default:!0}})});var H=O(k,2);v(H,()=>Vt,(W,F)=>{F(W,{onclick:()=>{yt.capture("backup",{type:"restore",location:"cloud"}),K(d,!1),e.setLoading(!0),Gt(e.backup.data)},children:(z,U)=>{R();var M=Q("Continue");i(z,M)},$$slots:{default:!0}})}),i($,_)},$$slots:{default:!0}})}),i(n,t)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})});var tt=O(J,2);v(tt,()=>Ot,(A,L)=>{L(A,{get open(){return w(h)},set open(E){K(h,E,!0)},children:(E,T)=>{var D=Ee(),g=x(D);{let I=it(()=>pt({variant:"destructive",size:"icon"}));v(g,()=>Wt,(Y,n)=>{n(Y,{get class(){return w(I)},children:(r,t)=>{Pe(r,{})},$$slots:{default:!0}})})}var f=O(g,2);v(f,()=>Tt,(I,Y)=>{Y(I,{children:(n,r)=>{var t=Ve(),s=x(t);v(s,()=>qt,(o,l)=>{l(o,{children:($,m)=>{var _=We(),k=x(_);v(k,()=>zt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Delete Backup?");i(z,M)},$$slots:{default:!0}})});var H=O(k,2);v(H,()=>Jt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("This will delete the backup permanently");i(z,M)},$$slots:{default:!0}})}),i($,_)},$$slots:{default:!0}})});var a=O(s,2);v(a,()=>Ut,(o,l)=>{l(o,{children:($,m)=>{var _=ze(),k=x(_);v(k,()=>Et,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Cancel");i(z,M)},$$slots:{default:!0}})});var H=O(k,2);{let W=it(()=>pt({variant:"destructive"}));v(H,()=>Vt,(F,z)=>{z(F,{get class(){return w(W)},onclick:async()=>{e.setLoading(!0);try{const U=await e.getToken();await e.client.mutation(Pt.backups.remove,{id:e.backup.id,jwt:U}),ct.success("Backup deleted successfully"),K(h,!1)}catch(U){console.error("Failed to delete backup:",U),ct.error("Failed to delete backup")}finally{e.setLoading(!1)}},children:(U,M)=>{R();var ut=Q("Continue");i(U,ut)},$$slots:{default:!0}})})}i($,_)},$$slots:{default:!0}})}),i(n,t)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})}),i(st,N)},$$slots:{default:!0}})}),i(S,G)},$$slots:{default:!0}})}),i(P,u),at()}var Re=j("<!> Loading",1),Ze=j('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),Qe=j("<!> <!>",1),Ge=j("<!> <!>",1),Ke=j("<!> <!>",1),Xe=j('<div class="flex items-center justify-center"><!></div>'),tr=j('<div class="grid w-full grid-cols-1 gap-3 md:grid-cols-2"><!> <!> <!></div>'),er=j("<!> <!><!>",1),rr=j('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!> <!> <!></div>');function Ar(P,e){rt(e,!0);const d=ie();let h=ft("");Lt(()=>{d.session&&G().then(N=>{K(h,N,!0)})});let u=ft(ee(It(Pt.backups.get,{jwt:""})));const b=ue();let c=ft(""),p=ft(!1),S=ft(""),C=ft("");te(()=>{K(S,Ft(),!0)}),Lt(()=>{K(u,It(Pt.backups.get,{jwt:w(h)}),!0)});async function G(){var Z;const N=await((Z=d.session)==null?void 0:Z.getToken());return N||(d.session&&ct.error("Something went wrong"),"")}function V(N){K(p,N,!0)}var q=rr(),y=O(ot(q),2);v(y,()=>Ot,(N,Z)=>{Z(N,{get open(){return w(p)},children:(J,tt)=>{var A=X(),L=x(A);v(L,()=>Tt,(E,T)=>{T(E,{class:"flex flex-row gap-3",children:(D,g)=>{var f=Re(),I=x(f);Yt(I,{class:"animate-spin"}),R(),i(D,f)},$$slots:{default:!0}})}),i(J,A)},$$slots:{default:!0}})});var B=O(y,2);v(B,()=>At,(N,Z)=>{Z(N,{children:(J,tt)=>{var A=Qe(),L=x(A);v(L,()=>St,(T,D)=>{D(T,{children:(g,f)=>{var I=X(),Y=x(I);v(Y,()=>Ct,(n,r)=>{r(n,{children:(t,s)=>{R();var a=Q("Local Backup");i(t,a)},$$slots:{default:!0}})}),i(g,I)},$$slots:{default:!0}})});var E=O(L,2);v(E,()=>$e,(T,D)=>{D(T,{class:"flex flex-col gap-3",children:(g,f)=>{R();var I=Ze(),Y=O(x(I)),n=ot(Y);Mt(n,{disabled:!0,get value(){return w(S)}});var r=O(n,2);kt(r,{size:"icon",onclick:()=>{yt.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(w(S)).then(()=>{ct.success("Backup copied to clipboard")}).catch(o=>{ct.error("Failed to copy backup to clipboard")})},children:(o,l)=>{Zt(o,{})},$$slots:{default:!0}}),lt(Y);var t=O(Y,2),s=ot(t);Mt(s,{get value(){return w(C)},set value(o){K(C,o,!0)}});var a=O(s,2);{let o=it(()=>w(C).length===0);kt(a,{get disabled(){return w(o)},onclick:()=>{yt.capture("backup",{type:"import",location:"local"}),K(p,!0),Gt(w(C))},children:(l,$)=>{R();var m=Q("Import");i(l,m)},$$slots:{default:!0}})}lt(t),i(g,I)},$$slots:{default:!0}})}),i(J,A)},$$slots:{default:!0}})});var st=O(B,2);ce(st,{children:(N,Z)=>{var J=tr(),tt=ot(J);v(tt,()=>At,(T,D)=>{D(T,{children:(g,f)=>{var I=Ke(),Y=x(I);v(Y,()=>St,(r,t)=>{t(r,{children:(s,a)=>{var o=X(),l=x(o);v(l,()=>Ct,($,m)=>{m($,{children:(_,k)=>{R();var H=Q("Create a Backup");i(_,H)},$$slots:{default:!0}})}),i(s,o)},$$slots:{default:!0}})});var n=O(Y,2);v(n,()=>Qt,(r,t)=>{t(r,{class:"flex flex-row gap-3",children:(s,a)=>{var o=Ge(),l=x(o);Mt(l,{placeholder:"Backup Name",get value(){return w(c)},set value(m){K(c,m,!0)}});var $=O(l,2);{let m=it(()=>!w(h)||w(c).length===0);kt($,{get disabled(){return w(m)},onclick:()=>{yt.capture("backup",{type:"create",location:"cloud"}),K(p,!0),G().then(_=>{w(c).length>0&&b.mutation(Pt.backups.create,{name:w(c),jwt:_,data:Ft()}).then(()=>{K(c,""),ct.success("Backup created successfully"),K(p,!1)}).catch(k=>{K(p,!1),ct.error("Failed to create backup")})})},children:(_,k)=>{R();var H=Q("Create");i(_,H)},$$slots:{default:!0}})}i(s,o)},$$slots:{default:!0}})}),i(g,I)},$$slots:{default:!0}})});var A=O(tt,2);{var L=T=>{var D=Xe(),g=ot(D);Yt(g,{class:"animate-spin"}),lt(D),i(T,D)};jt(A,T=>{w(u).data||T(L)})}var E=O(A,2);re(E,17,()=>w(u).data||[],ae,(T,D)=>{Je(T,{get backup(){return w(D)},get client(){return b},getToken:G,setLoading:V})}),lt(J),i(N,J)},$$slots:{default:!0}});var _t=O(st,2);de(_t,{children:(N,Z)=>{var J=X(),tt=x(J);v(tt,()=>ye,(A,L)=>{L(A,{children:(E,T)=>{var D=er(),g=x(D);fe(g,{});var f=O(g,2);v(f,()=>Ce,(Y,n)=>{n(Y,{children:(r,t)=>{R();var s=Q("Tip");i(r,s)},$$slots:{default:!0}})});var I=O(f);v(I,()=>Me,(Y,n)=>{n(Y,{children:(r,t)=>{R();var s=Q("Backup to the cloud with an EduTools account.");i(r,s)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})}),i(N,J)},$$slots:{default:!0}}),lt(q),i(P,q),at()}export{Ar as component};
