import"../chunks/CWj6FrbW.js";import{o as te}from"../chunks/CVdRVHo9.js";import{k as Rt,p as et,i as X,e as w,a as i,c as rt,g as D,u as it,f as A,d as ot,j as $t,r as lt,n as R,t as Q,b as Bt,s as j,m as K,l as vt,ab as Lt,av as ee}from"../chunks/Cd13tLbQ.js";import{i as Tt}from"../chunks/C1R1Yb0q.js";import{e as re,i as ae}from"../chunks/BPTZeVTr.js";import{c as h}from"../chunks/0bJNegf6.js";import{a as se,D as ne,b as oe,C as Zt,u as le,c as Wt,d as ie,S as ce,e as ue,I as de}from"../chunks/BTad3NlG.js";import"../chunks/Cx9A6QdW.js";import{g as fe}from"../chunks/gnU0ypJ3.js";import{b as pt,B as wt}from"../chunks/DKtWAFU1.js";import{a as Mt,b as Ot,c as ve,d as Qt,R as Ct,A as jt,r as Gt,C as At}from"../chunks/C5XPpM15.js";import{a as ut,s as It}from"../chunks/1ScPFJNN.js";import{b as ht,e as ft}from"../chunks/C6bjgBV9.js";import{p as tt,r as nt,d as xt,c as gt}from"../chunks/DfCpWMhL.js";import{I as St}from"../chunks/UkNTL9VD.js";import{c as bt}from"../chunks/BW_nxkPh.js";import{t as dt}from"../chunks/DRlt9cCa.js";import{D as $e}from"../chunks/EV7AH_eZ.js";import{H as he}from"../chunks/X2C3p5qP.js";import{c as Kt,b as yt,m as Xt}from"../chunks/CxTyhMz9.js";import{f as ge,A as _e}from"../chunks/Cr68Ji2L.js";import{I as me}from"../chunks/CPBS4AKp.js";import{A as pe}from"../chunks/DA415Jeq.js";import{L as Ht}from"../chunks/CBy6I_k7.js";var be=A("<button><!></button>");function ye(x,t){const d=Rt();et(t,!0);let v=tt(t,"id",19,()=>Kt(d)),n=tt(t,"ref",15,null),p=nt(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const u=ge.create({id:yt.with(()=>v()),ref:yt.with(()=>n(),U=>n(U))}),b=it(()=>Xt(p,u.props));var f=X(),S=w(f);{var G=U=>{var k=X(),B=w(k);ut(B,()=>t.child,()=>({props:D(b)})),i(U,k)},z=U=>{var k=be();ht(k,()=>({...D(b)}));var B=ot(k);ut(B,()=>t.children??$t),lt(k),i(U,k)};Tt(S,U=>{t.child?U(G):U(z,!1)})}i(x,f),rt()}var xe=A("<button><!></button>");function ke(x,t){const d=Rt();et(t,!0);let v=tt(t,"id",19,()=>Kt(d)),n=tt(t,"ref",15,null),p=tt(t,"disabled",3,!1),u=nt(t,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const b=_e.create({id:yt.with(()=>v()),ref:yt.with(()=>n(),k=>n(k)),disabled:yt.with(()=>!!p())}),f=it(()=>Xt(u,b.props));var S=X(),G=w(S);{var z=k=>{var B=X(),st=w(B);ut(st,()=>t.child,()=>({props:D(f)})),i(k,B)},U=k=>{var B=xe();ht(B,()=>({...D(f)}));var st=ot(B);ut(st,()=>t.children??$t),lt(B),i(k,B)};Tt(G,k=>{t.child?k(z):k(U,!1)})}i(x,S),rt()}var we=A("<div><!></div>");function Pe(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var n=we();ht(n,u=>({"data-slot":"alert-description",class:u,...v}),[()=>ft("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t.class)]);var p=ot(n);ut(p,()=>t.children??$t),lt(n),xt(n,u=>d(u),()=>d()),i(x,n),rt()}var De=A("<div><!></div>");function Se(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var n=De();ht(n,u=>({"data-slot":"alert-title",class:u,...v}),[()=>ft("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t.class)]);var p=ot(n);ut(p,()=>t.children??$t),lt(n),xt(n,u=>d(u),()=>d()),i(x,n),rt()}var Pt={exports:{}},Me=Pt.exports,Yt;function Oe(){return Yt||(Yt=1,function(x,t){(function(d,v){x.exports=v()})(Me,function(){var d=1e3,v=6e4,n=36e5,p="millisecond",u="second",b="minute",f="hour",S="day",G="week",z="month",U="quarter",k="year",B="date",st="Invalid Date",_t=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var r=["th","st","nd","rd"],e=o%100;return"["+o+(r[(e-20)%10]||r[e]||r[0])+"]"}},q=function(o,r,e){var s=String(o);return!s||s.length>=r?o:""+Array(r+1-s.length).join(e)+o},at={s:q,z:function(o){var r=-o.utcOffset(),e=Math.abs(r),s=Math.floor(e/60),a=e%60;return(r<=0?"+":"-")+q(s,2,"0")+":"+q(a,2,"0")},m:function o(r,e){if(r.date()<e.date())return-o(e,r);var s=12*(e.year()-r.year())+(e.month()-r.month()),a=r.clone().add(s,z),l=e-a<0,c=r.clone().add(s+(l?-1:1),z);return+(-(s+(e-a)/(l?a-c:c-a))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:z,y:k,w:G,d:S,D:B,h:f,m:b,s:u,ms:p,Q:U}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},C="en",L={};L[C]=Z;var V="$isDayjsObject",T=function(o){return o instanceof W||!(!o||!o[V])},M=function o(r,e,s){var a;if(!r)return C;if(typeof r=="string"){var l=r.toLowerCase();L[l]&&(a=l),e&&(L[l]=e,a=l);var c=r.split("-");if(!a&&c.length>1)return o(c[0])}else{var g=r.name;L[g]=r,a=g}return!s&&a&&(C=a),a||!s&&C},_=function(o,r){if(T(o))return o.clone();var e=typeof r=="object"?r:{};return e.date=o,e.args=arguments,new W(e)},$=at;$.l=M,$.i=T,$.w=function(o,r){return _(o,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var W=function(){function o(e){this.$L=M(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[V]=!0}var r=o.prototype;return r.parse=function(e){this.$d=function(s){var a=s.date,l=s.utc;if(a===null)return new Date(NaN);if($.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var c=a.match(_t);if(c){var g=c[2]-1||0,y=(c[7]||"0").substring(0,3);return l?new Date(Date.UTC(c[1],g,c[3]||1,c[4]||0,c[5]||0,c[6]||0,y)):new Date(c[1],g,c[3]||1,c[4]||0,c[5]||0,c[6]||0,y)}}return new Date(a)}(e),this.init()},r.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},r.$utils=function(){return $},r.isValid=function(){return this.$d.toString()!==st},r.isSame=function(e,s){var a=_(e);return this.startOf(s)<=a&&a<=this.endOf(s)},r.isAfter=function(e,s){return _(e)<this.startOf(s)},r.isBefore=function(e,s){return this.endOf(s)<_(e)},r.$g=function(e,s,a){return $.u(e)?this[s]:this.set(a,e)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(e,s){var a=this,l=!!$.u(s)||s,c=$.p(e),g=function(J,O){var ct=$.w(a.$u?Date.UTC(a.$y,O,J):new Date(a.$y,O,J),a);return l?ct:ct.endOf(S)},y=function(J,O){return $.w(a.toDate()[J].apply(a.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(O)),a)},m=this.$W,P=this.$M,I=this.$D,N="set"+(this.$u?"UTC":"");switch(c){case k:return l?g(1,0):g(31,11);case z:return l?g(1,P):g(0,P+1);case G:var Y=this.$locale().weekStart||0,E=(m<Y?m+7:m)-Y;return g(l?I-E:I+(6-E),P);case S:case B:return y(N+"Hours",0);case f:return y(N+"Minutes",1);case b:return y(N+"Seconds",2);case u:return y(N+"Milliseconds",3);default:return this.clone()}},r.endOf=function(e){return this.startOf(e,!1)},r.$set=function(e,s){var a,l=$.p(e),c="set"+(this.$u?"UTC":""),g=(a={},a[S]=c+"Date",a[B]=c+"Date",a[z]=c+"Month",a[k]=c+"FullYear",a[f]=c+"Hours",a[b]=c+"Minutes",a[u]=c+"Seconds",a[p]=c+"Milliseconds",a)[l],y=l===S?this.$D+(s-this.$W):s;if(l===z||l===k){var m=this.clone().set(B,1);m.$d[g](y),m.init(),this.$d=m.set(B,Math.min(this.$D,m.daysInMonth())).$d}else g&&this.$d[g](y);return this.init(),this},r.set=function(e,s){return this.clone().$set(e,s)},r.get=function(e){return this[$.p(e)]()},r.add=function(e,s){var a,l=this;e=Number(e);var c=$.p(s),g=function(P){var I=_(l);return $.w(I.date(I.date()+Math.round(P*e)),l)};if(c===z)return this.set(z,this.$M+e);if(c===k)return this.set(k,this.$y+e);if(c===S)return g(1);if(c===G)return g(7);var y=(a={},a[b]=v,a[f]=n,a[u]=d,a)[c]||1,m=this.$d.getTime()+e*y;return $.w(m,this)},r.subtract=function(e,s){return this.add(-1*e,s)},r.format=function(e){var s=this,a=this.$locale();if(!this.isValid())return a.invalidDate||st;var l=e||"YYYY-MM-DDTHH:mm:ssZ",c=$.z(this),g=this.$H,y=this.$m,m=this.$M,P=a.weekdays,I=a.months,N=a.meridiem,Y=function(O,ct,mt,kt){return O&&(O[ct]||O(s,l))||mt[ct].slice(0,kt)},E=function(O){return $.s(g%12||12,O,"0")},J=N||function(O,ct,mt){var kt=O<12?"AM":"PM";return mt?kt.toLowerCase():kt};return l.replace(F,function(O,ct){return ct||function(mt){switch(mt){case"YY":return String(s.$y).slice(-2);case"YYYY":return $.s(s.$y,4,"0");case"M":return m+1;case"MM":return $.s(m+1,2,"0");case"MMM":return Y(a.monthsShort,m,I,3);case"MMMM":return Y(I,m);case"D":return s.$D;case"DD":return $.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return Y(a.weekdaysMin,s.$W,P,2);case"ddd":return Y(a.weekdaysShort,s.$W,P,3);case"dddd":return P[s.$W];case"H":return String(g);case"HH":return $.s(g,2,"0");case"h":return E(1);case"hh":return E(2);case"a":return J(g,y,!0);case"A":return J(g,y,!1);case"m":return String(y);case"mm":return $.s(y,2,"0");case"s":return String(s.$s);case"ss":return $.s(s.$s,2,"0");case"SSS":return $.s(s.$ms,3,"0");case"Z":return c}return null}(O)||c.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(e,s,a){var l,c=this,g=$.p(s),y=_(e),m=(y.utcOffset()-this.utcOffset())*v,P=this-y,I=function(){return $.m(c,y)};switch(g){case k:l=I()/12;break;case z:l=I();break;case U:l=I()/3;break;case G:l=(P-m)/6048e5;break;case S:l=(P-m)/864e5;break;case f:l=P/n;break;case b:l=P/v;break;case u:l=P/d;break;default:l=P}return a?l:$.a(l)},r.daysInMonth=function(){return this.endOf(z).$D},r.$locale=function(){return L[this.$L]},r.locale=function(e,s){if(!e)return this.$L;var a=this.clone(),l=M(e,s,!0);return l&&(a.$L=l),a},r.clone=function(){return $.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},o}(),H=W.prototype;return _.prototype=H,[["$ms",p],["$s",u],["$m",b],["$H",f],["$W",S],["$M",z],["$y",k],["$D",B]].forEach(function(o){H[o[1]]=function(r){return this.$g(r,o[0],o[1])}}),_.extend=function(o,r){return o.$i||(o(r,W,_),o.$i=!0),_},_.locale=M,_.isDayjs=T,_.unix=function(o){return _(1e3*o)},_.en=L[C],_.Ls=L,_.p={},_})}(Pt)),Pt.exports}var Ce=Oe();const je=fe(Ce),Dt=se;var Ae=A("<div><!></div>");function Te(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Ae();ht(n,u=>({"data-slot":"card-content",class:u,...v}),[()=>ft("px-6",t.class)]);var p=ot(n);ut(p,()=>t.children??$t),lt(n),xt(n,u=>d(u),()=>d()),i(x,n),rt()}function Ft(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref"]);var n=X(),p=w(n);h(p,()=>$e,(u,b)=>{b(u,gt({"data-slot":"alert-dialog-trigger"},()=>v,{get ref(){return d()},set ref(f){d(f)}}))}),i(x,n),rt()}function Nt(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class"]);var n=X(),p=w(n);{let u=it(()=>ft("text-lg font-semibold",t.class));h(p,()=>ne,(b,f)=>{f(b,gt({"data-slot":"alert-dialog-title",get class(){return D(u)}},()=>v,{get ref(){return d()},set ref(S){d(S)}}))})}i(x,n),rt()}function Et(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class"]);var n=X(),p=w(n);{let u=it(()=>ft(pt(),t.class));h(p,()=>ye,(b,f)=>{f(b,gt({"data-slot":"alert-dialog-action",get class(){return D(u)}},()=>v,{get ref(){return d()},set ref(S){d(S)}}))})}i(x,n),rt()}function zt(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class"]);var n=X(),p=w(n);{let u=it(()=>ft(pt({variant:"outline"}),t.class));h(p,()=>ke,(b,f)=>{f(b,gt({"data-slot":"alert-dialog-cancel",get class(){return D(u)}},()=>v,{get ref(){return d()},set ref(S){d(S)}}))})}i(x,n),rt()}var Be=A("<div><!></div>");function Vt(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Be();ht(n,u=>({"data-slot":"alert-dialog-footer",class:u,...v}),[()=>ft("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t.class)]);var p=ot(n);ut(p,()=>t.children??$t),lt(n),xt(n,u=>d(u),()=>d()),i(x,n),rt()}var Le=A("<div><!></div>");function Jt(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class","children"]);var n=Le();ht(n,u=>({"data-slot":"alert-dialog-header",class:u,...v}),[()=>ft("flex flex-col gap-2 text-center sm:text-left",t.class)]);var p=ot(n);ut(p,()=>t.children??$t),lt(n),xt(n,u=>d(u),()=>d()),i(x,n),rt()}function Ut(x,t){et(t,!0);let d=tt(t,"ref",15,null),v=nt(t,["$$slots","$$events","$$legacy","ref","class"]);var n=X(),p=w(n);{let u=it(()=>ft("text-muted-foreground text-sm",t.class));h(p,()=>oe,(b,f)=>{f(b,gt({"data-slot":"alert-dialog-description",get class(){return D(u)}},()=>v,{get ref(){return d()},set ref(S){d(S)}}))})}i(x,n),rt()}function We(x,t){et(t,!0);/**
 * @license @lucide/svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let d=nt(t,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];me(x,gt({name:"trash"},()=>d,{get iconNode(){return v},children:(n,p)=>{var u=X(),b=w(u);ut(b,()=>t.children??$t),i(n,u)},$$slots:{default:!0}})),rt()}var Ie=A("<!> <!>",1),He=A("<!> <!>",1),Ye=A("<!> <!>",1),Fe=A("<!> <!>",1),Ne=A("<!> <!>",1),Ee=A("<!> <!>",1),ze=A("<!> <!>",1),Ve=A("<!> <!>",1),Je=A("<!> <!>",1),Ue=A("<!> <!> <!>",1),qe=A("<!> <!>",1);function Re(x,t){et(t,!0);let d=vt(!1),v=vt(!1);var n=X(),p=w(n);h(p,()=>At,(u,b)=>{b(u,{children:(f,S)=>{var G=qe(),z=w(G);h(z,()=>Mt,(k,B)=>{B(k,{children:(st,_t)=>{var F=Ie(),Z=w(F);h(Z,()=>Ot,(at,C)=>{C(at,{children:(L,V)=>{R();var T=Q();Bt(()=>It(T,t.backup.name)),i(L,T)},$$slots:{default:!0}})});var q=j(Z,2);h(q,()=>ve,(at,C)=>{C(at,{children:(L,V)=>{R();var T=Q();Bt(M=>It(T,M),[()=>je(t.backup.creationTime).format("hh:mm a - DD/MM/YY")]),i(L,T)},$$slots:{default:!0}})}),i(st,F)},$$slots:{default:!0}})});var U=j(z,2);h(U,()=>Qt,(k,B)=>{B(k,{class:"flex flex-row gap-3",children:(st,_t)=>{var F=Ue(),Z=w(F);wt(Z,{variant:"outline",size:"icon",onclick:()=>{bt.capture("backup",{type:"copy",location:"cloud"}),navigator.clipboard.writeText(t.backup.data).then(()=>{dt.success("Backup copied to clipboard")}).catch(C=>{dt.error("Failed to copy backup to clipboard")})},children:(C,L)=>{Zt(C,{})},$$slots:{default:!0}});var q=j(Z,2);h(q,()=>Ct,(C,L)=>{L(C,{get open(){return D(d)},set open(V){K(d,V,!0)},children:(V,T)=>{var M=Ne(),_=w(M);{let W=it(()=>pt({variant:"default",size:"icon"}));h(_,()=>Ft,(H,o)=>{o(H,{get class(){return D(W)},children:(r,e)=>{he(r,{})},$$slots:{default:!0}})})}var $=j(_,2);h($,()=>jt,(W,H)=>{H(W,{children:(o,r)=>{var e=Fe(),s=w(e);h(s,()=>Jt,(l,c)=>{c(l,{children:(g,y)=>{var m=He(),P=w(m);h(P,()=>Nt,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("Restore Backup?");i(E,O)},$$slots:{default:!0}})});var I=j(P,2);h(I,()=>Ut,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("This will replace all your current data");i(E,O)},$$slots:{default:!0}})}),i(g,m)},$$slots:{default:!0}})});var a=j(s,2);h(a,()=>Vt,(l,c)=>{c(l,{children:(g,y)=>{var m=Ye(),P=w(m);h(P,()=>zt,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("Cancel");i(E,O)},$$slots:{default:!0}})});var I=j(P,2);h(I,()=>Et,(N,Y)=>{Y(N,{onclick:()=>{bt.capture("backup",{type:"restore",location:"cloud"}),K(d,!1),t.setLoading(!0),Gt(t.backup.data)},children:(E,J)=>{R();var O=Q("Continue");i(E,O)},$$slots:{default:!0}})}),i(g,m)},$$slots:{default:!0}})}),i(o,e)},$$slots:{default:!0}})}),i(V,M)},$$slots:{default:!0}})});var at=j(q,2);h(at,()=>Ct,(C,L)=>{L(C,{get open(){return D(v)},set open(V){K(v,V,!0)},children:(V,T)=>{var M=Je(),_=w(M);{let W=it(()=>pt({variant:"destructive",size:"icon"}));h(_,()=>Ft,(H,o)=>{o(H,{get class(){return D(W)},children:(r,e)=>{We(r,{})},$$slots:{default:!0}})})}var $=j(_,2);h($,()=>jt,(W,H)=>{H(W,{children:(o,r)=>{var e=Ve(),s=w(e);h(s,()=>Jt,(l,c)=>{c(l,{children:(g,y)=>{var m=Ee(),P=w(m);h(P,()=>Nt,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("Delete Backup?");i(E,O)},$$slots:{default:!0}})});var I=j(P,2);h(I,()=>Ut,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("This will delete the backup permanently");i(E,O)},$$slots:{default:!0}})}),i(g,m)},$$slots:{default:!0}})});var a=j(s,2);h(a,()=>Vt,(l,c)=>{c(l,{children:(g,y)=>{var m=ze(),P=w(m);h(P,()=>zt,(N,Y)=>{Y(N,{children:(E,J)=>{R();var O=Q("Cancel");i(E,O)},$$slots:{default:!0}})});var I=j(P,2);{let N=it(()=>pt({variant:"destructive"}));h(I,()=>Et,(Y,E)=>{E(Y,{get class(){return D(N)},onclick:async()=>{t.setLoading(!0);try{const J=await t.getToken();await t.client.mutation(Dt.backups.remove,{id:t.backup.id,jwt:J}),dt.success("Backup deleted successfully"),K(v,!1)}catch(J){console.error("Failed to delete backup:",J),dt.error("Failed to delete backup")}finally{t.setLoading(!1)}},children:(J,O)=>{R();var ct=Q("Continue");i(J,ct)},$$slots:{default:!0}})})}i(g,m)},$$slots:{default:!0}})}),i(o,e)},$$slots:{default:!0}})}),i(V,M)},$$slots:{default:!0}})}),i(st,F)},$$slots:{default:!0}})}),i(f,G)},$$slots:{default:!0}})}),i(x,n),rt()}function qt(){let d=document.cookie.split("; ").filter(f=>!(f.trim().startsWith("__")||f.trim().startsWith("clerk")||f.trim().startsWith("ph"))).join("; "),v=Object.entries(localStorage).filter(([f,S])=>!(f.startsWith("__")||f.startsWith("clerk")||f.startsWith("ph")||f=="lastSeenSurveyDate")),n=Object.fromEntries(v),p=Object.entries(sessionStorage).filter(([f,S])=>!(f.startsWith("__")||f.startsWith("clerk")||f.startsWith("ph")||f=="lastSeenSurveyDate")),u=Object.fromEntries(p),b={cookies:d,localstorage:n,sessionstorage:u};console.log(b);try{return btoa(JSON.stringify(b))}catch(f){throw console.error("Failed to create backup:",f),new Error("Backup creation failed")}}var Ze=A("<!> Loading",1),Qe=A('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),Ge=A("<!> <!>",1),Ke=A("<!> <!>",1),Xe=A("<!> <!>",1),tr=A('<div class="flex items-center justify-center"><!></div>'),er=A('<div class="grid w-full grid-cols-1 gap-3 md:grid-cols-2"><!> <!> <!></div>'),rr=A("<!> <!><!>",1),ar=A('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!> <!> <!></div>');function Mr(x,t){et(t,!0);const d=le();let v=vt("");Lt(()=>{d.session&&G().then(F=>{K(v,F,!0)})});let n=vt(ee(Wt(Dt.backups.get,{jwt:""})));const p=ie();let u=vt(""),b=vt(!1),f=vt(""),S=vt("");te(()=>{K(f,qt(),!0)}),Lt(()=>{K(n,Wt(Dt.backups.get,{jwt:D(v)}),!0)});async function G(){var Z;const F=await((Z=d.session)==null?void 0:Z.getToken());return F||(d.session&&dt.error("Something went wrong"),"")}function z(F){K(b,F,!0)}var U=ar(),k=j(ot(U),2);h(k,()=>Ct,(F,Z)=>{Z(F,{get open(){return D(b)},children:(q,at)=>{var C=X(),L=w(C);h(L,()=>jt,(V,T)=>{T(V,{class:"flex flex-row gap-3",children:(M,_)=>{var $=Ze(),W=w($);Ht(W,{class:"animate-spin"}),R(),i(M,$)},$$slots:{default:!0}})}),i(q,C)},$$slots:{default:!0}})});var B=j(k,2);h(B,()=>At,(F,Z)=>{Z(F,{children:(q,at)=>{var C=Ge(),L=w(C);h(L,()=>Mt,(T,M)=>{M(T,{children:(_,$)=>{var W=X(),H=w(W);h(H,()=>Ot,(o,r)=>{r(o,{children:(e,s)=>{R();var a=Q("Local Backup");i(e,a)},$$slots:{default:!0}})}),i(_,W)},$$slots:{default:!0}})});var V=j(L,2);h(V,()=>Te,(T,M)=>{M(T,{class:"flex flex-col gap-3",children:(_,$)=>{R();var W=Qe(),H=j(w(W)),o=ot(H);St(o,{disabled:!0,get value(){return D(f)}});var r=j(o,2);wt(r,{size:"icon",onclick:()=>{bt.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(D(f)).then(()=>{dt.success("Backup copied to clipboard")}).catch(l=>{dt.error("Failed to copy backup to clipboard")})},children:(l,c)=>{Zt(l,{})},$$slots:{default:!0}}),lt(H);var e=j(H,2),s=ot(e);St(s,{get value(){return D(S)},set value(l){K(S,l,!0)}});var a=j(s,2);{let l=it(()=>D(S).length===0);wt(a,{get disabled(){return D(l)},onclick:()=>{bt.capture("backup",{type:"import",location:"local"}),K(b,!0),Gt(D(S))},children:(c,g)=>{R();var y=Q("Import");i(c,y)},$$slots:{default:!0}})}lt(e),i(_,W)},$$slots:{default:!0}})}),i(q,C)},$$slots:{default:!0}})});var st=j(B,2);ce(st,{children:(F,Z)=>{var q=er(),at=ot(q);h(at,()=>At,(T,M)=>{M(T,{children:(_,$)=>{var W=Xe(),H=w(W);h(H,()=>Mt,(r,e)=>{e(r,{children:(s,a)=>{var l=X(),c=w(l);h(c,()=>Ot,(g,y)=>{y(g,{children:(m,P)=>{R();var I=Q("Create a Backup");i(m,I)},$$slots:{default:!0}})}),i(s,l)},$$slots:{default:!0}})});var o=j(H,2);h(o,()=>Qt,(r,e)=>{e(r,{class:"flex flex-row gap-3",children:(s,a)=>{var l=Ke(),c=w(l);St(c,{placeholder:"Backup Name",get value(){return D(u)},set value(y){K(u,y,!0)}});var g=j(c,2);{let y=it(()=>!D(v)||D(u).length===0);wt(g,{get disabled(){return D(y)},onclick:()=>{bt.capture("backup",{type:"create",location:"cloud"}),K(b,!0),G().then(m=>{D(u).length>0&&p.mutation(Dt.backups.create,{name:D(u),jwt:m,data:qt()}).then(()=>{K(u,""),dt.success("Backup created successfully"),K(b,!1)}).catch(P=>{K(b,!1),dt.error("Failed to create backup")})})},children:(m,P)=>{R();var I=Q("Create");i(m,I)},$$slots:{default:!0}})}i(s,l)},$$slots:{default:!0}})}),i(_,W)},$$slots:{default:!0}})});var C=j(at,2);{var L=T=>{var M=tr(),_=ot(M);Ht(_,{class:"animate-spin"}),lt(M),i(T,M)};Tt(C,T=>{D(n).data||T(L)})}var V=j(C,2);re(V,17,()=>D(n).data||[],ae,(T,M)=>{Re(T,{get backup(){return D(M)},get client(){return p},getToken:G,setLoading:z})}),lt(q),i(F,q)},$$slots:{default:!0}});var _t=j(st,2);ue(_t,{children:(F,Z)=>{var q=X(),at=w(q);h(at,()=>pe,(C,L)=>{L(C,{children:(V,T)=>{var M=rr(),_=w(M);de(_,{});var $=j(_,2);h($,()=>Se,(H,o)=>{o(H,{children:(r,e)=>{R();var s=Q("Tip");i(r,s)},$$slots:{default:!0}})});var W=j($);h(W,()=>Pe,(H,o)=>{o(H,{children:(r,e)=>{R();var s=Q("Backup to the cloud with an EduTools account.");i(r,s)},$$slots:{default:!0}})}),i(V,M)},$$slots:{default:!0}})}),i(F,q)},$$slots:{default:!0}}),lt(U),i(x,U),rt()}export{Mr as component};
