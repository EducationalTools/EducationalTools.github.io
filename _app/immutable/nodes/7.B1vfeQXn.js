import"../chunks/Bzak7iHL.js";import{p as U,f as p,g as d,a as e,c as q,s as g,d as L,e as z,n as _,i as G,j as H,t as E,r as N,b as M,k as b}from"../chunks/8W1ZFGhz.js";import{s as Q}from"../chunks/DwBxj07P.js";import{c}from"../chunks/BxyT-HaH.js";import{p as I}from"../chunks/BDYuWU0m.js";import{B as O}from"../chunks/DZzzVXzt.js";import{C as V,a as W,b as X}from"../chunks/CefdiL4P.js";import{C as Y,a as Z}from"../chunks/qEQLZB1l.js";import{R as rr,A as tr,r as er}from"../chunks/CJDu-eOh.js";import{L as ar}from"../chunks/CZnHEgzM.js";import{t as x}from"../chunks/Bv1yL0k7.js";var or=p("<!> Loading",1),sr=p('This will clear all of your existing data on <span class="font-mono"> </span>',1),nr=p("<!> <!>",1),lr=p("<!> <!>",1),ir=p("<!> <!>",1),dr=p('<!> <div class="flex h-full w-full items-center justify-center p-3"><!></div>',1);function yr(J,K){U(K,!0);let u=H(!1);function R(n){if(!n||n.trim()==="")throw new Error("No data provided");let f;try{f=atob(n)}catch{throw new Error("Invalid base64 data")}let r;try{r=JSON.parse(f)}catch{throw new Error("Invalid JSON data")}if(typeof r!="object"||r===null||Array.isArray(r))throw new Error("Backup data must be an object");if(r.cookies!==void 0&&typeof r.cookies!="string")throw new Error("Cookies data must be a string");if(r.localstorage!==void 0&&(typeof r.localstorage!="object"||Array.isArray(r.localstorage)))throw new Error("LocalStorage data must be an object");if(r.sessionstorage!==void 0&&(typeof r.sessionstorage!="object"||Array.isArray(r.sessionstorage)))throw new Error("SessionStorage data must be an object");const k=["cookies","localstorage","sessionstorage"],a=Object.keys(r).filter(o=>!k.includes(o));if(a.length>0)throw new Error(`Unexpected properties in backup data: ${a.join(", ")}`)}var A=dr(),P=d(A);c(P,()=>rr,(n,f)=>{f(n,{get open(){return G(u)},children:(r,k)=>{var a=z(),o=d(a);c(o,()=>tr,(j,m)=>{m(j,{class:"flex flex-row gap-3",children:(v,h)=>{var w=or(),l=d(w);ar(l,{class:"animate-spin"}),_(),e(v,w)},$$slots:{default:!0}})}),e(r,a)},$$slots:{default:!0}})});var B=g(P,2),D=L(B);c(D,()=>V,(n,f)=>{f(n,{class:"max-w-full min-w-96",children:(r,k)=>{var a=ir(),o=d(a);c(o,()=>W,(m,v)=>{v(m,{children:(h,w)=>{var l=nr(),$=d(l);c($,()=>X,(t,s)=>{s(t,{children:(i,F)=>{_();var y=E("Importing data");e(i,y)},$$slots:{default:!0}})});var C=g($,2);c(C,()=>Y,(t,s)=>{s(t,{children:(i,F)=>{_();var y=sr(),S=g(d(y)),T=L(S,!0);N(S),M(()=>Q(T,I.url.hostname)),e(i,y)},$$slots:{default:!0}})}),e(h,l)},$$slots:{default:!0}})});var j=g(o,2);c(j,()=>Z,(m,v)=>{v(m,{class:"flex flex-row justify-end gap-3",children:(h,w)=>{var l=lr(),$=d(l);O($,{variant:"outline",onclick:()=>{history.back()},children:(t,s)=>{_();var i=E("Cancel");e(t,i)},$$slots:{default:!0}});var C=g($,2);O(C,{variant:"destructive",onclick:()=>{b(u,!0);let t=I.url.searchParams.get("data");if(t){try{R(t)}catch(s){b(u,!1),s instanceof Error?x.error("Backup data is invalid",{description:s.message}):x.error("Backup data is invalid")}try{er(t)}catch{b(u,!1),x.error("Failed to import data")}}else b(u,!1),x.error("No data provided")},children:(t,s)=>{_();var i=E("Continue");e(t,i)},$$slots:{default:!0}}),e(h,l)},$$slots:{default:!0}})}),e(r,a)},$$slots:{default:!0}})}),N(B),e(J,A),q()}export{yr as component};
