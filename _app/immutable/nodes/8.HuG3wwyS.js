import"../chunks/Bzak7iHL.js";import{p as _e,j as ae,aw as se,f as N,i as r,ax as V,s as C,d as J,t as O,a as o,c as pe,k as S,n as L,r as G,g as i,e as u,b as ie}from"../chunks/Dbp7H6Se.js";import{d as Ie,a as he,r as xe,p as ne,s as Re,c as Me}from"../chunks/DGy21wtP.js";import{i as be}from"../chunks/BVaUVRfb.js";import{e as j,i as De}from"../chunks/eF4JDJ-R.js";import{c as _}from"../chunks/CmlflnMv.js";import{c as Be,T as He,g as Ke,a as Ae,b as je,d as Le,e as le,f as Ge,F as ve,h as Ne,i as $e,r as qe,A as Ee,j as h}from"../chunks/BXkJZ6FS.js";import{I as Je}from"../chunks/BpCEae25.js";import{C as Oe}from"../chunks/BRC2rX1P.js";import{L as Qe}from"../chunks/CIyI01BH.js";import{B as de}from"../chunks/CniIsVsE.js";import{h as ye}from"../chunks/B52wLP86.js";import{A as Ue}from"../chunks/CrwxNLoj.js";import{s as ce}from"../chunks/BcaRsr3o.js";import{a as We}from"../chunks/BBgrYZKF.js";import{B as Xe}from"../chunks/Cczd3RbS.js";import{g as Ye}from"../chunks/C43N6ReQ.js";var Ze=N("<!> <!>",1),et=N('<div class="grid max-h-screen w-full grid-cols-1 flex-col gap-3 rounded-md p-3"><div class="flex w-full flex-row items-center gap-3"><div class="flex h-full items-center justify-center rounded-md border border-dashed px-3 text-lg">History</div> <!> <div class="flex flex-row gap-2"><!> <!></div> <!></div> <!></div>');function tt(t,a){_e(a,!0);const[d,n]=he(),g=(e,s,l,ge)=>{const I=qe(e.getValue(s),l);return ge({itemRank:I}),I.passed};let f=ae(se([])),c=ae(se([])),p=ae(se({id:!1}));const m=Be({get data(){return a.data},columns:a.columns,getCoreRowModel:je(),getSortedRowModel:Ae(),getFilteredRowModel:Ke(),filterFns:{fuzzy:g},onSortingChange:e=>{typeof e=="function"?S(f,e(r(f)),!0):S(f,e,!0)},onColumnFiltersChange:e=>{typeof e=="function"?S(c,e(r(c)),!0):S(c,e,!0)},onColumnVisibilityChange:e=>{typeof e=="function"?S(p,e(r(p)),!0):S(p,e,!0)},state:{get sorting(){return r(f)},get columnFilters(){return r(c)},get columnVisibility(){return r(p)}}});var P=et(),z=J(P),q=C(J(z),2);{let e=V(()=>{var s;return((s=m.getColumn("name"))==null?void 0:s.getFilterValue())??""});Je(q,{placeholder:"Search",get value(){return r(e)},onchange:s=>{var l;(l=m.getColumn("name"))==null||l.setFilterValue(s.currentTarget.value)},oninput:s=>{var l;(l=m.getColumn("name"))==null||l.setFilterValue(s.currentTarget.value)},class:"grow"})}var x=C(q,2),ue=J(x),we=()=>{var e;return(e=m.getColumn("id"))==null?void 0:e.getIsVisible()},Ce=e=>{var s;return(s=m.getColumn("id"))==null?void 0:s.toggleVisibility(!!e)};Oe(ue,{get checked(){return we()},set checked(e){Ce(e)},id:"showid"});var Pe=C(ue,2);Qe(Pe,{for:"showid",class:"text-nowrap",children:(e,s)=>{L();var l=O("Show ID");o(e,l)},$$slots:{default:!0}}),G(x);var Te=C(x,2);de(Te,{variant:"destructive",onclick:()=>Ie(ye,[]),children:(e,s)=>{L();var l=O("Clear");o(e,l)},$$slots:{default:!0}}),G(z);var ke=C(z,2);_(ke,()=>He,(e,s)=>{s(e,{children:(l,ge)=>{var I=Ze(),fe=i(I);_(fe,()=>Le,(Q,U)=>{U(Q,{class:"bg-background sticky top-0",children:(W,Se)=>{var R=u(),X=i(R);j(X,17,()=>m.getHeaderGroups(),v=>v.id,(v,b)=>{var y=u(),M=i(y);_(M,()=>le,(D,B)=>{B(D,{children:(E,H)=>{var K=u(),T=i(K);j(T,17,()=>r(b).headers,w=>w.id,(w,$)=>{var k=u(),F=i(k);_(F,()=>Ge,(Y,Z)=>{Z(Y,{children:(ee,me)=>{var te=u(),re=i(te);{var Ve=oe=>{{let ze=V(()=>r($).getContext());ve(oe,{get content(){return r($).column.columnDef.header},get context(){return r(ze)}})}};be(re,oe=>{r($).isPlaceholder||oe(Ve)})}o(ee,te)},$$slots:{default:!0}})}),o(w,k)}),o(E,K)},$$slots:{default:!0}})}),o(v,y)}),o(W,R)},$$slots:{default:!0}})});var Fe=C(fe,2);_(Fe,()=>Ne,(Q,U)=>{U(Q,{children:(W,Se)=>{var R=u(),X=i(R);j(X,17,()=>m.getRowModel().rows,v=>v.id,(v,b)=>{var y=u(),M=i(y);{let D=V(()=>r(b).getIsSelected()&&"selected");_(M,()=>le,(B,E)=>{E(B,{get"data-state"(){return r(D)},children:(H,K)=>{var T=u(),w=i(T);j(w,17,()=>r(b).getVisibleCells(),$=>$.id,($,k)=>{var F=u(),Y=i(F);_(Y,()=>$e,(Z,ee)=>{ee(Z,{children:(me,te)=>{{let re=V(()=>r(k).getContext());ve(me,{get content(){return r(k).column.columnDef.cell},get context(){return r(re)}})}},$$slots:{default:!0}})}),o($,F)}),o(H,T)},$$slots:{default:!0}})})}o(v,y)},v=>{var b=u(),y=i(b);_(y,()=>le,(M,D)=>{D(M,{children:(B,E)=>{var H=u(),K=i(H);_(K,()=>$e,(T,w)=>{w(T,{get colspan(){return a.columns.length},class:"h-24 text-center",children:($,k)=>{L();var F=O("No results.");o($,F)},$$slots:{default:!0}})}),o(B,H)},$$slots:{default:!0}})}),o(v,b)}),o(W,R)},$$slots:{default:!0}})}),o(l,I)},$$slots:{default:!0}})}),G(P),o(t,P),pe(),n()}function rt(t,a){{let d=V(()=>"/g/"+a.id);de(t,{variant:"ghost",size:"icon",class:"relative size-8 p-0",get href(){return r(d)},children:(n,g)=>{Ue(n,{})},$$slots:{default:!0}})}}var ot=N("<a> </a>");function at(t,a){const d=xe(a,["$$slots","$$events","$$legacy","children"]);var n=ot();We(n,()=>({...d}));var g=J(n,!0);G(n),ie(()=>ce(g,a.children)),o(t,n)}var st=N('<div class="flex w-full flex-row flex-wrap gap-2"></div>');function nt(t,a){var d=st();j(d,21,()=>a.tags||[],De,(n,g)=>{Xe(n,{variant:"default",children:(f,c)=>{L();var p=O();ie(()=>ce(p,`#${r(g)??""}`)),o(f,p)},$$slots:{default:!0}})}),G(d),o(t,d)}var lt=N(" <!>",1);function A(t,a){let d=ne(a,"content",3,""),n=ne(a,"variant",3,"ghost"),g=ne(a,"sort",3,!1),f=xe(a,["$$slots","$$events","$$legacy","content","variant","sort"]);de(t,Re({get variant(){return n()},class:"w-full"},()=>f,{children:(c,p)=>{L();var m=lt(),P=i(m),z=C(P);{var q=x=>{Ee(x,{class:"ml-2"})};be(z,x=>{g()&&x(q)})}ie(()=>ce(P,`${d()??""} `)),o(c,m)},$$slots:{default:!0}}))}const it=[{accessorKey:"id",header:({column:t})=>h(A,{content:"ID"})},{accessorKey:"name",header:({column:t})=>h(A,{onclick:t.getToggleSortingHandler(),content:"Name",sort:!0}),cell:({row:t})=>h(at,{children:t.original.name,href:`/g/${t.original.id}`}),filterFn:"fuzzy"},{accessorKey:"category",header:({column:t})=>h(A,{onclick:t.getToggleSortingHandler(),content:"Category",sort:!0})},{accessorKey:"description",header:({column:t})=>h(A,{content:"Description"})},{accessorKey:"tags",header:({column:t})=>h(A,{content:"Tags"}),cell:({row:t})=>h(nt,{tags:t.original.tags})},{id:"actions",cell:({row:t})=>h(rt,{id:t.original.id})}];function Tt(t,a){_e(a,!0);const[d,n]=he(),g=()=>Me(ye,"$historyStore",d);let f=V(()=>g().map(c=>Ye(c)).filter(c=>c!==void 0));tt(t,{get data(){return r(f)},get columns(){return it}}),pe(),n()}export{Tt as component};
