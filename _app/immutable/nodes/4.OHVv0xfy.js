import"../chunks/Bzak7iHL.js";import{o as tt}from"../chunks/BsfqcfsH.js";import{p as et,e as R,g as c,a as e,b as rt,k as z,j as G,f as g,s as r,c as P,n as $,i as l,d as J,r as W,l as at}from"../chunks/d1nUEqUP.js";import{i as ot}from"../chunks/DGIKQ0Uj.js";import{c as p}from"../chunks/Bpp8RQHS.js";import{s as st,a as lt}from"../chunks/CGq0iL3B.js";import{C as it}from"../chunks/BenE_sjp.js";import{B as M}from"../chunks/CXz5jp6g.js";import{a as nt,b as ct,C as pt}from"../chunks/Dta-6Fq6.js";import{C as dt}from"../chunks/dMh0aWnS.js";import{I as K}from"../chunks/vCFNmyFv.js";import{A as ut,L as ft,R as mt,r as vt}from"../chunks/-RuKG42Y.js";import{D as Q}from"../chunks/BH-Qojcn.js";import"../chunks/B_Traxh2.js";import{p as _t}from"../chunks/C-VHuNsD.js";import{t as U}from"../chunks/CN31r4fC.js";function $t(){let w=document.cookie.split("; ").filter(t=>!(t.trim().startsWith("__")||t.trim().startsWith("clerk")||t.trim().startsWith("ph"))).join("; "),O=Object.entries(localStorage).filter(([t,L])=>!(t.startsWith("__")||t.startsWith("clerk")||t.startsWith("ph")||t=="lastSeenSurveyDate")),D=Object.fromEntries(O),h=Object.entries(sessionStorage).filter(([t,L])=>!(t.startsWith("__")||t.startsWith("clerk")||t.startsWith("ph")||t=="lastSeenSurveyDate")),d=Object.fromEntries(h),a={cookies:w,localstorage:D,sessionstorage:d};console.log(a);try{return btoa(JSON.stringify(a))}catch(t){throw console.error("Failed to create backup:",t),new Error("Backup creation failed")}}var gt=g("<!> Loading",1),ht=g('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),xt=g("<!> <!>",1),bt=g('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!></div>'),kt=g('<div class="flex h-full flex-col items-center justify-center gap-3"><span class="text-6xl">404</span> <span class="text-3xl">Not Found</span> <!></div>');function zt(T,q){et(q,!0);const w=()=>lt(_t,"$preferencesStore",O),[O,D]=st();let h=G(!1),d=G(""),a=G("");tt(()=>{z(d,$t(),!0)});var t=R(),L=c(t);{var V=i=>{var o=bt(),x=r(P(o),2);p(x,()=>mt,(b,u)=>{u(b,{get open(){return l(h)},children:(F,Y)=>{var f=R(),k=c(f);p(k,()=>ut,(I,m)=>{m(I,{class:"flex flex-row gap-3",children:(v,S)=>{var C=gt(),s=c(C);ft(s,{class:"animate-spin"}),$(),e(v,C)},$$slots:{default:!0}})}),e(F,f)},$$slots:{default:!0}})});var E=r(x,2);p(E,()=>pt,(b,u)=>{u(b,{children:(F,Y)=>{var f=xt(),k=c(f);p(k,()=>nt,(m,v)=>{v(m,{children:(S,C)=>{var s=R(),_=c(s);p(_,()=>ct,(j,y)=>{y(j,{children:(B,A)=>{$();var N=J("Local Backup");e(B,N)},$$slots:{default:!0}})}),e(S,s)},$$slots:{default:!0}})});var I=r(k,2);p(I,()=>dt,(m,v)=>{v(m,{class:"flex flex-col gap-3",children:(S,C)=>{$();var s=ht(),_=r(c(s)),j=P(_);K(j,{disabled:!0,get value(){return l(d)}});var y=r(j,2);M(y,{size:"icon",onclick:()=>{Q.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(l(d)).then(()=>{U.success("Backup copied to clipboard")}).catch(n=>{U.error("Failed to copy backup to clipboard")})},children:(n,H)=>{it(n,{})},$$slots:{default:!0}}),W(_);var B=r(_,2),A=P(B);K(A,{get value(){return l(a)},set value(n){z(a,n,!0)}});var N=r(A,2);{let n=at(()=>l(a).length===0);M(N,{get disabled(){return l(n)},onclick:()=>{Q.capture("backup",{type:"import",location:"local"}),z(h,!0),vt(l(a))},children:(H,St)=>{$();var Z=J("Import");e(H,Z)},$$slots:{default:!0}})}W(B),e(S,s)},$$slots:{default:!0}})}),e(F,f)},$$slots:{default:!0}})}),W(o),e(i,o)},X=i=>{var o=kt(),x=r(P(o),4);M(x,{variant:"outline",href:"/",children:(E,b)=>{$();var u=J("Go home");e(E,u)},$$slots:{default:!0}}),W(o),e(i,o)};ot(L,i=>{w().experimentalFeatures?i(V):i(X,!1)})}e(T,t),rt(),D()}export{zt as component};
