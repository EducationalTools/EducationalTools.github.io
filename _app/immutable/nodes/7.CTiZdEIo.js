import"../chunks/CWj6FrbW.js";import{p as T,f as p,e as d,a as t,c as q,s as g,d as S,i as z,n as _,g as G,l as H,t as E,r as N,b as M,m as b}from"../chunks/Cd13tLbQ.js";import{s as Q}from"../chunks/1ScPFJNN.js";import{c}from"../chunks/0bJNegf6.js";import{p as I}from"../chunks/BVFNN9BI.js";import{B as O}from"../chunks/DKtWAFU1.js";import{R as V,C as W,A as X,a as Y,b as Z,c as rr,d as er,r as tr}from"../chunks/C5XPpM15.js";import{L as ar}from"../chunks/CBy6I_k7.js";import{t as x}from"../chunks/DRlt9cCa.js";var or=p("<!> Loading",1),sr=p('This will clear all of your existing data on <span class="font-mono"> </span>',1),nr=p("<!> <!>",1),ir=p("<!> <!>",1),lr=p("<!> <!>",1),dr=p('<!> <div class="flex h-full w-full items-center justify-center p-3"><!></div>',1);function hr(R,J){T(J,!0);let u=H(!1);function K(n){if(!n||n.trim()==="")throw new Error("No data provided");let f;try{f=atob(n)}catch{throw new Error("Invalid base64 data")}let r;try{r=JSON.parse(f)}catch{throw new Error("Invalid JSON data")}if(typeof r!="object"||r===null||Array.isArray(r))throw new Error("Backup data must be an object");if(r.cookies!==void 0&&typeof r.cookies!="string")throw new Error("Cookies data must be a string");if(r.localstorage!==void 0&&(typeof r.localstorage!="object"||Array.isArray(r.localstorage)))throw new Error("LocalStorage data must be an object");if(r.sessionstorage!==void 0&&(typeof r.sessionstorage!="object"||Array.isArray(r.sessionstorage)))throw new Error("SessionStorage data must be an object");const k=["cookies","localstorage","sessionstorage"],a=Object.keys(r).filter(o=>!k.includes(o));if(a.length>0)throw new Error(`Unexpected properties in backup data: ${a.join(", ")}`)}var A=dr(),P=d(A);c(P,()=>V,(n,f)=>{f(n,{get open(){return G(u)},children:(r,k)=>{var a=z(),o=d(a);c(o,()=>X,(j,m)=>{m(j,{class:"flex flex-row gap-3",children:(v,h)=>{var w=or(),i=d(w);ar(i,{class:"animate-spin"}),_(),t(v,w)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})});var B=g(P,2),U=S(B);c(U,()=>W,(n,f)=>{f(n,{class:"max-w-full min-w-96",children:(r,k)=>{var a=lr(),o=d(a);c(o,()=>Y,(m,v)=>{v(m,{children:(h,w)=>{var i=nr(),$=d(i);c($,()=>Z,(e,s)=>{s(e,{children:(l,D)=>{_();var y=E("Importing data");t(l,y)},$$slots:{default:!0}})});var C=g($,2);c(C,()=>rr,(e,s)=>{s(e,{children:(l,D)=>{_();var y=sr(),L=g(d(y)),F=S(L,!0);N(L),M(()=>Q(F,I.url.hostname)),t(l,y)},$$slots:{default:!0}})}),t(h,i)},$$slots:{default:!0}})});var j=g(o,2);c(j,()=>er,(m,v)=>{v(m,{class:"flex flex-row justify-end gap-3",children:(h,w)=>{var i=ir(),$=d(i);O($,{variant:"outline",onclick:()=>{document.referrer&&new URL(document.referrer).origin===window.location.origin?history.back():location.href="/"},children:(e,s)=>{_();var l=E("Cancel");t(e,l)},$$slots:{default:!0}});var C=g($,2);O(C,{variant:"destructive",onclick:()=>{b(u,!0);let e=I.url.searchParams.get("data");if(e){try{K(e)}catch(s){b(u,!1),s instanceof Error?x.error("Backup data is invalid",{description:s.message}):x.error("Backup data is invalid")}try{tr(e)}catch{b(u,!1),x.error("Failed to import data")}}else b(u,!1),x.error("No data provided")},children:(e,s)=>{_();var l=E("Continue");t(e,l)},$$slots:{default:!0}}),t(h,i)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})}),N(B),t(R,A),q()}export{hr as component};
