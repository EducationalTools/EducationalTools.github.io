import"../chunks/Bzak7iHL.js";import{p as D,f as m,c as I,h as z,r as O,a as e,b as F,g as p,e as G,n as w,i as H,j as M,s as y,d as N,t as Q,k as C}from"../chunks/d1nUEqUP.js";import{s as V}from"../chunks/NkYtgyu8.js";import{c as u}from"../chunks/Bpp8RQHS.js";import{p as K}from"../chunks/DOOsNRaJ.js";import{B as R}from"../chunks/CXz5jp6g.js";import{a as W,b as X,C as Y}from"../chunks/Dta-6Fq6.js";import{C as Z}from"../chunks/Ds8a-5SN.js";import{s as rr}from"../chunks/BTq2v8-X.js";import{a as tr}from"../chunks/DsZizbNA.js";import{p as er,r as ar,c as or}from"../chunks/CGq0iL3B.js";import{c as sr}from"../chunks/C5wEKks9.js";import{A as nr,L as ir,R as lr,r as dr}from"../chunks/-RuKG42Y.js";import{t as E}from"../chunks/CN31r4fC.js";var cr=m("<div><!></div>");function fr(P,l){D(l,!0);let a=er(l,"ref",15,null),A=ar(l,["$$slots","$$events","$$legacy","ref","class","children"]);var o=cr();tr(o,v=>({"data-slot":"card-footer",class:v,...A}),[()=>sr("flex items-center px-6 [.border-t]:pt-6",l.class)]);var b=I(o);rr(b,()=>l.children??z),O(o),or(o,v=>a(v),()=>a()),e(P,o),F()}var pr=m("<!> Loading",1),ur=m('This will clear all of your existing data on <span class="font-mono"> </span>',1),mr=m("<!> <!>",1),vr=m("<!> <!>",1),_r=m("<!> <!>",1),$r=m('<!> <div class="flex h-full w-full items-center justify-center p-3"><!></div>',1);function Lr(P,l){D(l,!0);let a=M(!1);function A(d){if(!d||d.trim()==="")throw new Error("No data provided");let _;try{_=atob(d)}catch{throw new Error("Invalid base64 data")}let r;try{r=JSON.parse(_)}catch{throw new Error("Invalid JSON data")}if(typeof r!="object"||r===null||Array.isArray(r))throw new Error("Backup data must be an object");if(r.cookies!==void 0&&typeof r.cookies!="string")throw new Error("Cookies data must be a string");if(r.localstorage!==void 0&&(typeof r.localstorage!="object"||Array.isArray(r.localstorage)))throw new Error("LocalStorage data must be an object");if(r.sessionstorage!==void 0&&(typeof r.sessionstorage!="object"||Array.isArray(r.sessionstorage)))throw new Error("SessionStorage data must be an object");const B=["cookies","localstorage","sessionstorage"],s=Object.keys(r).filter(n=>!B.includes(n));if(s.length>0)throw new Error(`Unexpected properties in backup data: ${s.join(", ")}`)}var o=$r(),b=p(o);u(b,()=>lr,(d,_)=>{_(d,{get open(){return H(a)},children:(r,B)=>{var s=G(),n=p(s);u(n,()=>nr,(S,$)=>{$(S,{class:"flex flex-row gap-3",children:(g,x)=>{var k=pr(),c=p(k);ir(c,{class:"animate-spin"}),w(),e(g,k)},$$slots:{default:!0}})}),e(r,s)},$$slots:{default:!0}})});var v=y(b,2),T=I(v);u(T,()=>Y,(d,_)=>{_(d,{class:"max-w-full min-w-96",children:(r,B)=>{var s=_r(),n=p(s);u(n,()=>W,($,g)=>{g($,{children:(x,k)=>{var c=mr(),h=p(c);u(h,()=>X,(t,i)=>{i(t,{children:(f,U)=>{w();var j=N("Importing data");e(f,j)},$$slots:{default:!0}})});var L=y(h,2);u(L,()=>Z,(t,i)=>{i(t,{children:(f,U)=>{w();var j=ur(),J=y(p(j)),q=I(J,!0);O(J),Q(()=>V(q,K.url.hostname)),e(f,j)},$$slots:{default:!0}})}),e(x,c)},$$slots:{default:!0}})});var S=y(n,2);u(S,()=>fr,($,g)=>{g($,{class:"flex flex-row justify-end gap-3",children:(x,k)=>{var c=vr(),h=p(c);R(h,{variant:"outline",onclick:()=>{history.back()},children:(t,i)=>{w();var f=N("Cancel");e(t,f)},$$slots:{default:!0}});var L=y(h,2);R(L,{variant:"destructive",onclick:()=>{C(a,!0);let t=K.url.searchParams.get("data");if(t){try{A(t)}catch(i){C(a,!1),i instanceof Error?E.error("Backup data is invalid",{description:i.message}):E.error("Backup data is invalid")}try{dr(t)}catch{C(a,!1),E.error("Failed to import data")}}else C(a,!1),E.error("No data provided")},children:(t,i)=>{w();var f=N("Continue");e(t,f)},$$slots:{default:!0}}),e(x,c)},$$slots:{default:!0}})}),e(r,s)},$$slots:{default:!0}})}),O(v),e(P,o),F()}export{Lr as component};
