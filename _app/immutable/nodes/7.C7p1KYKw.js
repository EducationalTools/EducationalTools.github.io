import"../chunks/Bzak7iHL.js";import{p as U,f as p,i as d,a as t,b as q,h as z,n as g,j as G,g as H,s as _,c as L,d as E,r as N,t as M,e as b}from"../chunks/90-DEOan.js";import{s as Q}from"../chunks/DZ7ApB9w.js";import{c}from"../chunks/DP98yRtV.js";import{p as I}from"../chunks/BJk9kKrz.js";import{B as O}from"../chunks/Ce_EolSp.js";import{C as V,a as W,b as X}from"../chunks/BfYBf_lO.js";import{C as Y,a as Z}from"../chunks/DI5-0McP.js";import{A as rr,L as er,R as tr,r as ar}from"../chunks/DwBB2Q42.js";import{t as x}from"../chunks/dlEANd73.js";var or=p("<!> Loading",1),sr=p('This will clear all of your existing data on <span class="font-mono"> </span>',1),nr=p("<!> <!>",1),lr=p("<!> <!>",1),ir=p("<!> <!>",1),dr=p('<!> <div class="flex h-full w-full items-center justify-center p-3"><!></div>',1);function wr(J,K){U(K,!0);let u=H(!1);function R(n){if(!n||n.trim()==="")throw new Error("No data provided");let f;try{f=atob(n)}catch{throw new Error("Invalid base64 data")}let r;try{r=JSON.parse(f)}catch{throw new Error("Invalid JSON data")}if(typeof r!="object"||r===null||Array.isArray(r))throw new Error("Backup data must be an object");if(r.cookies!==void 0&&typeof r.cookies!="string")throw new Error("Cookies data must be a string");if(r.localstorage!==void 0&&(typeof r.localstorage!="object"||Array.isArray(r.localstorage)))throw new Error("LocalStorage data must be an object");if(r.sessionstorage!==void 0&&(typeof r.sessionstorage!="object"||Array.isArray(r.sessionstorage)))throw new Error("SessionStorage data must be an object");const k=["cookies","localstorage","sessionstorage"],a=Object.keys(r).filter(o=>!k.includes(o));if(a.length>0)throw new Error(`Unexpected properties in backup data: ${a.join(", ")}`)}var A=dr(),P=d(A);c(P,()=>tr,(n,f)=>{f(n,{get open(){return G(u)},children:(r,k)=>{var a=z(),o=d(a);c(o,()=>rr,(j,m)=>{m(j,{class:"flex flex-row gap-3",children:(v,h)=>{var w=or(),l=d(w);er(l,{class:"animate-spin"}),g(),t(v,w)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})});var B=_(P,2),D=L(B);c(D,()=>X,(n,f)=>{f(n,{class:"max-w-full min-w-96",children:(r,k)=>{var a=ir(),o=d(a);c(o,()=>V,(m,v)=>{v(m,{children:(h,w)=>{var l=nr(),$=d(l);c($,()=>W,(e,s)=>{s(e,{children:(i,F)=>{g();var y=E("Importing data");t(i,y)},$$slots:{default:!0}})});var C=_($,2);c(C,()=>Y,(e,s)=>{s(e,{children:(i,F)=>{g();var y=sr(),S=_(d(y)),T=L(S,!0);N(S),M(()=>Q(T,I.url.hostname)),t(i,y)},$$slots:{default:!0}})}),t(h,l)},$$slots:{default:!0}})});var j=_(o,2);c(j,()=>Z,(m,v)=>{v(m,{class:"flex flex-row justify-end gap-3",children:(h,w)=>{var l=lr(),$=d(l);O($,{variant:"outline",onclick:()=>{history.back()},children:(e,s)=>{g();var i=E("Cancel");t(e,i)},$$slots:{default:!0}});var C=_($,2);O(C,{variant:"destructive",onclick:()=>{b(u,!0);let e=I.url.searchParams.get("data");if(e){try{R(e)}catch(s){b(u,!1),s instanceof Error?x.error("Backup data is invalid",{description:s.message}):x.error("Backup data is invalid")}try{ar(e)}catch{b(u,!1),x.error("Failed to import data")}}else b(u,!1),x.error("No data provided")},children:(e,s)=>{g();var i=E("Continue");t(e,i)},$$slots:{default:!0}}),t(h,l)},$$slots:{default:!0}})}),t(r,a)},$$slots:{default:!0}})}),N(B),t(J,A),q()}export{wr as component};
