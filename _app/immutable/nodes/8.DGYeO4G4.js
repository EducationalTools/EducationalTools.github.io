import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.CtaTdtmd.js";import{p as H,m as v,$ as V,a0 as T,t as E,a as q,g as e,b as p,a1 as J,c as Q,r as W,a2 as M,F as I}from"../chunks/utils.C1BNrv6z.js";import{a as j,t as x}from"../chunks/store.BcUTyhzs.js";import{p as o,i as X,b as w}from"../chunks/props.BrQoT-Gq.js";import{a as L}from"../chunks/attributes.DIcE5jr-.js";import{s as Y}from"../chunks/class.CcK3Q6pv.js";import{i as Z}from"../chunks/lifecycle.B8u9hvgl.js";import{c as N,o as $,a as ee}from"../chunks/index-client.CHCCf_Bc.js";const te=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","CommentChange","CompositionEnd","CompositionStart","CompositionUpdate","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","Input","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],ne=(s,n)=>{te.forEach(c=>{s.on(c,l=>{n(c.toLowerCase(),{eventName:c,event:l,editor:s})})})},U=s=>s+"_"+Math.floor(Math.random()*1e9)+String(Date.now()),ie=()=>{let s={listeners:[],scriptId:U("tiny-script"),scriptLoaded:!1,injected:!1};const n=(l,d,a,y)=>{s.injected=!0;const f=d.createElement("script");f.referrerPolicy="origin",f.type="application/javascript",f.src=a,f.onload=()=>{y()},d.head&&d.head.appendChild(f)};return{load:(l,d,a)=>{s.scriptLoaded?a():(s.listeners.push(a),s.injected||n(s.scriptId,l,d,()=>{s.listeners.forEach(y=>y()),s.scriptLoaded=!0}))}}};let se=ie();var ae=x("<div></div>"),oe=x('<textarea style="visibility:hidden"></textarea>'),re=x("<div><!></div>");function ce(s,n){H(n,!1);var c=v();let l=o(n,"id",24,()=>U("tinymce-svelte")),d=o(n,"inline",8,void 0),a=o(n,"disabled",8,!1),y=o(n,"apiKey",8,"no-api-key"),f=o(n,"licenseKey",8,void 0),k=o(n,"channel",8,"7"),P=o(n,"scriptSrc",8,void 0),g=o(n,"conf",24,()=>({})),B=o(n,"modelEvents",8,"change input undo redo"),u=o(n,"value",12,""),O=o(n,"text",12,""),K=o(n,"cssClass",8,"tinymce-wrapper"),_=v(),m=v(),r=v(),C=v(u()),b=v(a());const A=N(),S=()=>{const t=typeof window<"u"?window:global;return t&&t.tinymce?t.tinymce:null},R=()=>{const i=Object.assign(Object.assign({},g()),{target:e(m),inline:d()!==void 0?d():g().inline!==void 0?g().inline:!1,readonly:a(),license_key:f(),setup:t=>{p(r,t),t.on("init",()=>{t.setContent(u()),t.on(B(),()=>{p(C,t.getContent()),e(C)!==u()&&(u(e(C)),O(t.getContent({format:"text"})))})}),ne(t,A),typeof g().setup=="function"&&g().setup(t)}});J(m,e(m).style.visibility=""),S().init(i)};$(()=>{if(S()!==null)R();else{const i=P()?P():`https://cdn.tiny.cloud/1/${y()}/tinymce/${k()}/tinymce.min.js`;se.load(e(_).ownerDocument,i,()=>{R()})}}),ee(()=>{var i;e(r)&&((i=S())===null||i===void 0||i.remove(e(r)))}),V(()=>(e(r),e(C),I(u()),I(a()),e(b),M(c)),()=>{e(r)&&e(C)!==u()&&(e(r).setContent(u()),O(e(r).getContent({format:"text"}))),e(r)&&a()!==e(b)&&(p(b,a()),typeof(p(c,e(r).mode)===null||M(c)===void 0?void 0:M(c).set)=="function"?e(r).mode.set(a()?"readonly":"design"):e(r).setMode(a()?"readonly":"design"))}),T(),Z();var h=re(),F=Q(h);{var z=i=>{var t=ae();w(t,D=>p(m,D),()=>e(m)),E(()=>L(t,"id",l())),j(i,t)},G=i=>{var t=oe();w(t,D=>p(m,D),()=>e(m)),E(()=>L(t,"id",l())),j(i,t)};X(F,i=>{d()?i(z):i(G,!1)})}W(h),w(h,i=>p(_,i),()=>e(_)),E(()=>Y(h,K())),j(s,h),q()}function Ce(s){ce(s,{scriptSrc:"/tinymce/tinymce.js"})}export{Ce as component};
