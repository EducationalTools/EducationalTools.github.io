import"../chunks/CWj6FrbW.js";import{o as te}from"../chunks/CVdRVHo9.js";import{k as Rt,p as et,i as X,e as b,a as i,c as rt,g as w,u as it,f as T,d as ot,j as $t,r as lt,n as R,t as Q,b as Bt,s as A,m as K,l as vt,ab as Lt,av as ee}from"../chunks/Cd13tLbQ.js";import{i as jt}from"../chunks/C1R1Yb0q.js";import{e as re,i as ae}from"../chunks/BPTZeVTr.js";import{c as v}from"../chunks/0bJNegf6.js";import{a as se,D as ne,b as oe,C as Zt,u as le,c as It,d as ie,S as ue,e as ce,I as de}from"../chunks/DG6w7AID.js";import"../chunks/XMYfRjXm.js";import{g as fe}from"../chunks/gnU0ypJ3.js";import{b as pt,B as Pt}from"../chunks/Bs6Bh5AQ.js";import{a as St,b as Ct,c as ve,d as Qt,C as Ot}from"../chunks/6vKR_qjv.js";import{a as ct,s as Ht}from"../chunks/1ScPFJNN.js";import{b as ht,e as ft}from"../chunks/BJ1hp0v3.js";import{p as tt,r as nt,d as bt,c as gt}from"../chunks/DfCpWMhL.js";import{I as Mt}from"../chunks/CsCSiitt.js";import{R as At,A as Tt,r as Gt}from"../chunks/B2-FlKhn.js";import{c as yt}from"../chunks/BW_nxkPh.js";import{t as dt}from"../chunks/DRlt9cCa.js";import{D as $e}from"../chunks/m5JVUszn.js";import{H as he}from"../chunks/CZsMHzXk.js";import{c as Kt,b as xt,m as Xt}from"../chunks/D51sbJDz.js";import{f as ge,A as _e}from"../chunks/wNrSG1IK.js";import{I as me}from"../chunks/BjKntbn2.js";import{c as Yt}from"../chunks/C_1WbdsR.js";import{A as pe}from"../chunks/C-Snv_IG.js";import{L as Ft}from"../chunks/BIMJUU0b.js";var ye=T("<button><!></button>");function xe(k,e){const d=Rt();et(e,!0);let $=tt(e,"id",19,()=>Kt(d)),o=tt(e,"ref",15,null),m=nt(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const c=ge.create({id:xt.with(()=>$()),ref:xt.with(()=>o(),q=>o(q))}),y=it(()=>Xt(m,c.props));var S=X(),C=b(S);{var G=q=>{var x=X(),B=b(x);ct(B,()=>e.child,()=>({props:w(y)})),i(q,x)},V=q=>{var x=ye();ht(x,()=>({...w(y)}));var B=ot(x);ct(B,()=>e.children??$t),lt(x),i(q,x)};jt(C,q=>{e.child?q(G):q(V,!1)})}i(k,S),rt()}var be=T("<button><!></button>");function ke(k,e){const d=Rt();et(e,!0);let $=tt(e,"id",19,()=>Kt(d)),o=tt(e,"ref",15,null),m=tt(e,"disabled",3,!1),c=nt(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const y=_e.create({id:xt.with(()=>$()),ref:xt.with(()=>o(),x=>o(x)),disabled:xt.with(()=>!!m())}),S=it(()=>Xt(c,y.props));var C=X(),G=b(C);{var V=x=>{var B=X(),st=b(B);ct(st,()=>e.child,()=>({props:w(S)})),i(x,B)},q=x=>{var B=be();ht(B,()=>({...w(S)}));var st=ot(B);ct(st,()=>e.children??$t),lt(B),i(x,B)};jt(G,x=>{e.child?x(V):x(q,!1)})}i(k,C),rt()}var Pe=T("<div><!></div>");function we(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=Pe();ht(o,c=>({"data-slot":"alert-description",class:c,...$}),[()=>ft("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e.class)]);var m=ot(o);ct(m,()=>e.children??$t),lt(o),bt(o,c=>d(c),()=>d()),i(k,o),rt()}var De=T("<div><!></div>");function Me(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=De();ht(o,c=>({"data-slot":"alert-title",class:c,...$}),[()=>ft("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e.class)]);var m=ot(o);ct(m,()=>e.children??$t),lt(o),bt(o,c=>d(c),()=>d()),i(k,o),rt()}var wt={exports:{}},Se=wt.exports,Nt;function Ce(){return Nt||(Nt=1,function(k,e){(function(d,$){k.exports=$()})(Se,function(){var d=1e3,$=6e4,o=36e5,m="millisecond",c="second",y="minute",S="hour",C="day",G="week",V="month",q="quarter",x="year",B="date",st="Invalid Date",_t=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],t=n%100;return"["+n+(r[(t-20)%10]||r[t]||r[0])+"]"}},J=function(n,r,t){var s=String(n);return!s||s.length>=r?n:""+Array(r+1-s.length).join(t)+n},at={s:J,z:function(n){var r=-n.utcOffset(),t=Math.abs(r),s=Math.floor(t/60),a=t%60;return(r<=0?"+":"-")+J(s,2,"0")+":"+J(a,2,"0")},m:function n(r,t){if(r.date()<t.date())return-n(t,r);var s=12*(t.year()-r.year())+(t.month()-r.month()),a=r.clone().add(s,V),l=t-a<0,u=r.clone().add(s+(l?-1:1),V);return+(-(s+(t-a)/(l?a-u:u-a))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:V,y:x,w:G,d:C,D:B,h:S,m:y,s:c,ms:m,Q:q}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},O="en",L={};L[O]=Z;var E="$isDayjsObject",j=function(n){return n instanceof I||!(!n||!n[E])},D=function n(r,t,s){var a;if(!r)return O;if(typeof r=="string"){var l=r.toLowerCase();L[l]&&(a=l),t&&(L[l]=t,a=l);var u=r.split("-");if(!a&&u.length>1)return n(u[0])}else{var h=r.name;L[h]=r,a=h}return!s&&a&&(O=a),a||!s&&O},g=function(n,r){if(j(n))return n.clone();var t=typeof r=="object"?r:{};return t.date=n,t.args=arguments,new I(t)},f=at;f.l=D,f.i=j,f.w=function(n,r){return g(n,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var I=function(){function n(t){this.$L=D(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[E]=!0}var r=n.prototype;return r.parse=function(t){this.$d=function(s){var a=s.date,l=s.utc;if(a===null)return new Date(NaN);if(f.u(a))return new Date;if(a instanceof Date)return new Date(a);if(typeof a=="string"&&!/Z$/i.test(a)){var u=a.match(_t);if(u){var h=u[2]-1||0,p=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],h,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)):new Date(u[1],h,u[3]||1,u[4]||0,u[5]||0,u[6]||0,p)}}return new Date(a)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return f},r.isValid=function(){return this.$d.toString()!==st},r.isSame=function(t,s){var a=g(t);return this.startOf(s)<=a&&a<=this.endOf(s)},r.isAfter=function(t,s){return g(t)<this.startOf(s)},r.isBefore=function(t,s){return this.endOf(s)<g(t)},r.$g=function(t,s,a){return f.u(t)?this[s]:this.set(a,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,s){var a=this,l=!!f.u(s)||s,u=f.p(t),h=function(U,M){var ut=f.w(a.$u?Date.UTC(a.$y,M,U):new Date(a.$y,M,U),a);return l?ut:ut.endOf(C)},p=function(U,M){return f.w(a.toDate()[U].apply(a.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(M)),a)},_=this.$W,P=this.$M,H=this.$D,W="set"+(this.$u?"UTC":"");switch(u){case x:return l?h(1,0):h(31,11);case V:return l?h(1,P):h(0,P+1);case G:var F=this.$locale().weekStart||0,z=(_<F?_+7:_)-F;return h(l?H-z:H+(6-z),P);case C:case B:return p(W+"Hours",0);case S:return p(W+"Minutes",1);case y:return p(W+"Seconds",2);case c:return p(W+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,s){var a,l=f.p(t),u="set"+(this.$u?"UTC":""),h=(a={},a[C]=u+"Date",a[B]=u+"Date",a[V]=u+"Month",a[x]=u+"FullYear",a[S]=u+"Hours",a[y]=u+"Minutes",a[c]=u+"Seconds",a[m]=u+"Milliseconds",a)[l],p=l===C?this.$D+(s-this.$W):s;if(l===V||l===x){var _=this.clone().set(B,1);_.$d[h](p),_.init(),this.$d=_.set(B,Math.min(this.$D,_.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},r.set=function(t,s){return this.clone().$set(t,s)},r.get=function(t){return this[f.p(t)]()},r.add=function(t,s){var a,l=this;t=Number(t);var u=f.p(s),h=function(P){var H=g(l);return f.w(H.date(H.date()+Math.round(P*t)),l)};if(u===V)return this.set(V,this.$M+t);if(u===x)return this.set(x,this.$y+t);if(u===C)return h(1);if(u===G)return h(7);var p=(a={},a[y]=$,a[S]=o,a[c]=d,a)[u]||1,_=this.$d.getTime()+t*p;return f.w(_,this)},r.subtract=function(t,s){return this.add(-1*t,s)},r.format=function(t){var s=this,a=this.$locale();if(!this.isValid())return a.invalidDate||st;var l=t||"YYYY-MM-DDTHH:mm:ssZ",u=f.z(this),h=this.$H,p=this.$m,_=this.$M,P=a.weekdays,H=a.months,W=a.meridiem,F=function(M,ut,mt,kt){return M&&(M[ut]||M(s,l))||mt[ut].slice(0,kt)},z=function(M){return f.s(h%12||12,M,"0")},U=W||function(M,ut,mt){var kt=M<12?"AM":"PM";return mt?kt.toLowerCase():kt};return l.replace(N,function(M,ut){return ut||function(mt){switch(mt){case"YY":return String(s.$y).slice(-2);case"YYYY":return f.s(s.$y,4,"0");case"M":return _+1;case"MM":return f.s(_+1,2,"0");case"MMM":return F(a.monthsShort,_,H,3);case"MMMM":return F(H,_);case"D":return s.$D;case"DD":return f.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return F(a.weekdaysMin,s.$W,P,2);case"ddd":return F(a.weekdaysShort,s.$W,P,3);case"dddd":return P[s.$W];case"H":return String(h);case"HH":return f.s(h,2,"0");case"h":return z(1);case"hh":return z(2);case"a":return U(h,p,!0);case"A":return U(h,p,!1);case"m":return String(p);case"mm":return f.s(p,2,"0");case"s":return String(s.$s);case"ss":return f.s(s.$s,2,"0");case"SSS":return f.s(s.$ms,3,"0");case"Z":return u}return null}(M)||u.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,s,a){var l,u=this,h=f.p(s),p=g(t),_=(p.utcOffset()-this.utcOffset())*$,P=this-p,H=function(){return f.m(u,p)};switch(h){case x:l=H()/12;break;case V:l=H();break;case q:l=H()/3;break;case G:l=(P-_)/6048e5;break;case C:l=(P-_)/864e5;break;case S:l=P/o;break;case y:l=P/$;break;case c:l=P/d;break;default:l=P}return a?l:f.a(l)},r.daysInMonth=function(){return this.endOf(V).$D},r.$locale=function(){return L[this.$L]},r.locale=function(t,s){if(!t)return this.$L;var a=this.clone(),l=D(t,s,!0);return l&&(a.$L=l),a},r.clone=function(){return f.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},n}(),Y=I.prototype;return g.prototype=Y,[["$ms",m],["$s",c],["$m",y],["$H",S],["$W",C],["$M",V],["$y",x],["$D",B]].forEach(function(n){Y[n[1]]=function(r){return this.$g(r,n[0],n[1])}}),g.extend=function(n,r){return n.$i||(n(r,I,g),n.$i=!0),g},g.locale=D,g.isDayjs=j,g.unix=function(n){return g(1e3*n)},g.en=L[O],g.Ls=L,g.p={},g})}(wt)),wt.exports}var Oe=Ce();const Ae=fe(Oe),Dt=se;var Te=T("<div><!></div>");function je(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=Te();ht(o,c=>({"data-slot":"card-content",class:c,...$}),[()=>ft("px-6",e.class)]);var m=ot(o);ct(m,()=>e.children??$t),lt(o),bt(o,c=>d(c),()=>d()),i(k,o),rt()}function Wt(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref"]);var o=X(),m=b(o);v(m,()=>$e,(c,y)=>{y(c,gt({"data-slot":"alert-dialog-trigger"},()=>$,{get ref(){return d()},set ref(S){d(S)}}))}),i(k,o),rt()}function zt(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var o=X(),m=b(o);{let c=it(()=>ft("text-lg font-semibold",e.class));v(m,()=>ne,(y,S)=>{S(y,gt({"data-slot":"alert-dialog-title",get class(){return w(c)}},()=>$,{get ref(){return d()},set ref(C){d(C)}}))})}i(k,o),rt()}function Vt(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var o=X(),m=b(o);{let c=it(()=>ft(pt(),e.class));v(m,()=>xe,(y,S)=>{S(y,gt({"data-slot":"alert-dialog-action",get class(){return w(c)}},()=>$,{get ref(){return d()},set ref(C){d(C)}}))})}i(k,o),rt()}function Et(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var o=X(),m=b(o);{let c=it(()=>ft(pt({variant:"outline"}),e.class));v(m,()=>ke,(y,S)=>{S(y,gt({"data-slot":"alert-dialog-cancel",get class(){return w(c)}},()=>$,{get ref(){return d()},set ref(C){d(C)}}))})}i(k,o),rt()}var Be=T("<div><!></div>");function Ut(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=Be();ht(o,c=>({"data-slot":"alert-dialog-footer",class:c,...$}),[()=>ft("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var m=ot(o);ct(m,()=>e.children??$t),lt(o),bt(o,c=>d(c),()=>d()),i(k,o),rt()}var Le=T("<div><!></div>");function qt(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=Le();ht(o,c=>({"data-slot":"alert-dialog-header",class:c,...$}),[()=>ft("flex flex-col gap-2 text-center sm:text-left",e.class)]);var m=ot(o);ct(m,()=>e.children??$t),lt(o),bt(o,c=>d(c),()=>d()),i(k,o),rt()}function Jt(k,e){et(e,!0);let d=tt(e,"ref",15,null),$=nt(e,["$$slots","$$events","$$legacy","ref","class"]);var o=X(),m=b(o);{let c=it(()=>ft("text-muted-foreground text-sm",e.class));v(m,()=>oe,(y,S)=>{S(y,gt({"data-slot":"alert-dialog-description",get class(){return w(c)}},()=>$,{get ref(){return d()},set ref(C){d(C)}}))})}i(k,o),rt()}function Ie(k,e){et(e,!0);/**
 * @license @lucide/svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let d=nt(e,["$$slots","$$events","$$legacy"]);const $=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];me(k,gt({name:"trash"},()=>d,{get iconNode(){return $},children:(o,m)=>{var c=X(),y=b(c);ct(y,()=>e.children??$t),i(o,c)},$$slots:{default:!0}})),rt()}var He=T("<!> <!>",1),Ye=T("<!> <!>",1),Fe=T("<!> <!>",1),Ne=T("<!> <!>",1),We=T("<!> <!>",1),ze=T("<!> <!>",1),Ve=T("<!> <!>",1),Ee=T("<!> <!>",1),Ue=T("<!> <!>",1),qe=T("<!> <!> <!>",1),Je=T("<!> <!>",1);function Re(k,e){et(e,!0);let d=vt(!1),$=vt(!1);var o=X(),m=b(o);v(m,()=>Ot,(c,y)=>{y(c,{children:(S,C)=>{var G=Je(),V=b(G);v(V,()=>St,(x,B)=>{B(x,{children:(st,_t)=>{var N=He(),Z=b(N);v(Z,()=>Ct,(at,O)=>{O(at,{children:(L,E)=>{R();var j=Q();Bt(()=>Ht(j,e.backup.name)),i(L,j)},$$slots:{default:!0}})});var J=A(Z,2);v(J,()=>ve,(at,O)=>{O(at,{children:(L,E)=>{R();var j=Q();Bt(D=>Ht(j,D),[()=>Ae(e.backup.creationTime).format("hh:mm a - DD/MM/YY")]),i(L,j)},$$slots:{default:!0}})}),i(st,N)},$$slots:{default:!0}})});var q=A(V,2);v(q,()=>Qt,(x,B)=>{B(x,{class:"flex flex-row gap-3",children:(st,_t)=>{var N=qe(),Z=b(N);Pt(Z,{variant:"outline",size:"icon",onclick:()=>{yt.capture("backup",{type:"copy",location:"cloud"}),navigator.clipboard.writeText(e.backup.data).then(()=>{dt.success("Backup copied to clipboard")}).catch(O=>{dt.error("Failed to copy backup to clipboard")})},children:(O,L)=>{Zt(O,{})},$$slots:{default:!0}});var J=A(Z,2);v(J,()=>At,(O,L)=>{L(O,{get open(){return w(d)},set open(E){K(d,E,!0)},children:(E,j)=>{var D=We(),g=b(D);{let I=it(()=>pt({variant:"default",size:"icon"}));v(g,()=>Wt,(Y,n)=>{n(Y,{get class(){return w(I)},children:(r,t)=>{he(r,{})},$$slots:{default:!0}})})}var f=A(g,2);v(f,()=>Tt,(I,Y)=>{Y(I,{children:(n,r)=>{var t=Ne(),s=b(t);v(s,()=>qt,(l,u)=>{u(l,{children:(h,p)=>{var _=Ye(),P=b(_);v(P,()=>zt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Restore Backup?");i(z,M)},$$slots:{default:!0}})});var H=A(P,2);v(H,()=>Jt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("This will replace all your current data");i(z,M)},$$slots:{default:!0}})}),i(h,_)},$$slots:{default:!0}})});var a=A(s,2);v(a,()=>Ut,(l,u)=>{u(l,{children:(h,p)=>{var _=Fe(),P=b(_);v(P,()=>Et,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Cancel");i(z,M)},$$slots:{default:!0}})});var H=A(P,2);v(H,()=>Vt,(W,F)=>{F(W,{onclick:()=>{yt.capture("backup",{type:"restore",location:"cloud"}),K(d,!1),e.setLoading(!0),Gt(e.backup.data)},children:(z,U)=>{R();var M=Q("Continue");i(z,M)},$$slots:{default:!0}})}),i(h,_)},$$slots:{default:!0}})}),i(n,t)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})});var at=A(J,2);v(at,()=>At,(O,L)=>{L(O,{get open(){return w($)},set open(E){K($,E,!0)},children:(E,j)=>{var D=Ue(),g=b(D);{let I=it(()=>pt({variant:"destructive",size:"icon"}));v(g,()=>Wt,(Y,n)=>{n(Y,{get class(){return w(I)},children:(r,t)=>{Ie(r,{})},$$slots:{default:!0}})})}var f=A(g,2);v(f,()=>Tt,(I,Y)=>{Y(I,{children:(n,r)=>{var t=Ee(),s=b(t);v(s,()=>qt,(l,u)=>{u(l,{children:(h,p)=>{var _=ze(),P=b(_);v(P,()=>zt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Delete Backup?");i(z,M)},$$slots:{default:!0}})});var H=A(P,2);v(H,()=>Jt,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("This will delete the backup permanently");i(z,M)},$$slots:{default:!0}})}),i(h,_)},$$slots:{default:!0}})});var a=A(s,2);v(a,()=>Ut,(l,u)=>{u(l,{children:(h,p)=>{var _=Ve(),P=b(_);v(P,()=>Et,(W,F)=>{F(W,{children:(z,U)=>{R();var M=Q("Cancel");i(z,M)},$$slots:{default:!0}})});var H=A(P,2);{let W=it(()=>pt({variant:"destructive"}));v(H,()=>Vt,(F,z)=>{z(F,{get class(){return w(W)},onclick:async()=>{e.setLoading(!0);try{const U=await e.getToken();await e.client.mutation(Dt.backups.remove,{id:e.backup.id,jwt:U}),dt.success("Backup deleted successfully"),K($,!1)}catch(U){console.error("Failed to delete backup:",U),dt.error("Failed to delete backup")}finally{e.setLoading(!1)}},children:(U,M)=>{R();var ut=Q("Continue");i(U,ut)},$$slots:{default:!0}})})}i(h,_)},$$slots:{default:!0}})}),i(n,t)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})}),i(st,N)},$$slots:{default:!0}})}),i(S,G)},$$slots:{default:!0}})}),i(k,o),rt()}var Ze=T("<!> Loading",1),Qe=T('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),Ge=T("<!> <!>",1),Ke=T("<!> <!>",1),Xe=T("<!> <!>",1),tr=T('<div class="flex items-center justify-center"><!></div>'),er=T('<div class="grid w-full grid-cols-1 gap-3 md:grid-cols-2"><!> <!> <!></div>'),rr=T("<!> <!><!>",1),ar=T('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!> <!> <!></div>');function Or(k,e){et(e,!0);const d=le();let $=vt("");Lt(()=>{d.session&&G().then(N=>{K($,N,!0)})});let o=vt(ee(It(Dt.backups.get,{jwt:""})));const m=ie();let c=vt(""),y=vt(!1),S=vt(""),C=vt("");te(()=>{K(S,Yt(),!0)}),Lt(()=>{K(o,It(Dt.backups.get,{jwt:w($)}),!0)});async function G(){var Z;const N=await((Z=d.session)==null?void 0:Z.getToken());return N||(d.session&&dt.error("Something went wrong"),"")}function V(N){K(y,N,!0)}var q=ar(),x=A(ot(q),2);v(x,()=>At,(N,Z)=>{Z(N,{get open(){return w(y)},children:(J,at)=>{var O=X(),L=b(O);v(L,()=>Tt,(E,j)=>{j(E,{class:"flex flex-row gap-3",children:(D,g)=>{var f=Ze(),I=b(f);Ft(I,{class:"animate-spin"}),R(),i(D,f)},$$slots:{default:!0}})}),i(J,O)},$$slots:{default:!0}})});var B=A(x,2);v(B,()=>Ot,(N,Z)=>{Z(N,{children:(J,at)=>{var O=Ge(),L=b(O);v(L,()=>St,(j,D)=>{D(j,{children:(g,f)=>{var I=X(),Y=b(I);v(Y,()=>Ct,(n,r)=>{r(n,{children:(t,s)=>{R();var a=Q("Local Backup");i(t,a)},$$slots:{default:!0}})}),i(g,I)},$$slots:{default:!0}})});var E=A(L,2);v(E,()=>je,(j,D)=>{D(j,{class:"flex flex-col gap-3",children:(g,f)=>{R();var I=Qe(),Y=A(b(I)),n=ot(Y);Mt(n,{disabled:!0,get value(){return w(S)}});var r=A(n,2);Pt(r,{size:"icon",onclick:()=>{yt.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(w(S)).then(()=>{dt.success("Backup copied to clipboard")}).catch(l=>{dt.error("Failed to copy backup to clipboard")})},children:(l,u)=>{Zt(l,{})},$$slots:{default:!0}}),lt(Y);var t=A(Y,2),s=ot(t);Mt(s,{get value(){return w(C)},set value(l){K(C,l,!0)}});var a=A(s,2);{let l=it(()=>w(C).length===0);Pt(a,{get disabled(){return w(l)},onclick:()=>{yt.capture("backup",{type:"import",location:"local"}),K(y,!0),Gt(w(C))},children:(u,h)=>{R();var p=Q("Import");i(u,p)},$$slots:{default:!0}})}lt(t),i(g,I)},$$slots:{default:!0}})}),i(J,O)},$$slots:{default:!0}})});var st=A(B,2);ue(st,{children:(N,Z)=>{var J=er(),at=ot(J);v(at,()=>Ot,(j,D)=>{D(j,{children:(g,f)=>{var I=Xe(),Y=b(I);v(Y,()=>St,(r,t)=>{t(r,{children:(s,a)=>{var l=X(),u=b(l);v(u,()=>Ct,(h,p)=>{p(h,{children:(_,P)=>{R();var H=Q("Create a Backup");i(_,H)},$$slots:{default:!0}})}),i(s,l)},$$slots:{default:!0}})});var n=A(Y,2);v(n,()=>Qt,(r,t)=>{t(r,{class:"flex flex-row gap-3",children:(s,a)=>{var l=Ke(),u=b(l);Mt(u,{placeholder:"Backup Name",get value(){return w(c)},set value(p){K(c,p,!0)}});var h=A(u,2);{let p=it(()=>!w($)||w(c).length===0);Pt(h,{get disabled(){return w(p)},onclick:()=>{yt.capture("backup",{type:"create",location:"cloud"}),K(y,!0),G().then(_=>{w(c).length>0&&m.mutation(Dt.backups.create,{name:w(c),jwt:_,data:Yt()}).then(()=>{K(c,""),dt.success("Backup created successfully"),K(y,!1)}).catch(P=>{K(y,!1),dt.error("Failed to create backup")})})},children:(_,P)=>{R();var H=Q("Create");i(_,H)},$$slots:{default:!0}})}i(s,l)},$$slots:{default:!0}})}),i(g,I)},$$slots:{default:!0}})});var O=A(at,2);{var L=j=>{var D=tr(),g=ot(D);Ft(g,{class:"animate-spin"}),lt(D),i(j,D)};jt(O,j=>{w(o).data||j(L)})}var E=A(O,2);re(E,17,()=>w(o).data||[],ae,(j,D)=>{Re(j,{get backup(){return w(D)},get client(){return m},getToken:G,setLoading:V})}),lt(J),i(N,J)},$$slots:{default:!0}});var _t=A(st,2);ce(_t,{children:(N,Z)=>{var J=X(),at=b(J);v(at,()=>pe,(O,L)=>{L(O,{children:(E,j)=>{var D=rr(),g=b(D);de(g,{});var f=A(g,2);v(f,()=>Me,(Y,n)=>{n(Y,{children:(r,t)=>{R();var s=Q("Tip");i(r,s)},$$slots:{default:!0}})});var I=A(f);v(I,()=>we,(Y,n)=>{n(Y,{children:(r,t)=>{R();var s=Q("Backup to the cloud with an EduTools account.");i(r,s)},$$slots:{default:!0}})}),i(E,D)},$$slots:{default:!0}})}),i(N,J)},$$slots:{default:!0}}),lt(q),i(k,q),rt()}export{Or as component};
