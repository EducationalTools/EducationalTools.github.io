import"../chunks/CWj6FrbW.js";import{p as _e,l as ae,av as se,f as N,g as r,u as V,s as C,d as J,t as O,a as o,c as he,m as S,n as j,r as G,e as i,i as u,b as ie}from"../chunks/Cd13tLbQ.js";import{b as Ie,s as pe,r as be,p as ne,c as Re,a as Me}from"../chunks/DfCpWMhL.js";import{i as xe}from"../chunks/C1R1Yb0q.js";import{e as L,i as De}from"../chunks/BPTZeVTr.js";import{c as _}from"../chunks/0bJNegf6.js";import{c as Be,T as He,g as Ke,a as Ae,b as Le,d as je,e as le,f as Ge,F as ve,h as Ne,i as $e,r as qe,A as Ee,j as p}from"../chunks/RS-py5Nl.js";import{I as Je}from"../chunks/CsCSiitt.js";import{C as Oe,L as Qe}from"../chunks/5jafnW-H.js";import{B as ce}from"../chunks/Bs6Bh5AQ.js";import{h as ye}from"../chunks/CmffcIn4.js";import{A as Ue}from"../chunks/CxWq2jQ7.js";import{s as de}from"../chunks/1ScPFJNN.js";import{b as We}from"../chunks/BJ1hp0v3.js";import{B as Xe}from"../chunks/DBscU4te.js";import{g as Ye}from"../chunks/CR8BZWlr.js";var Ze=N("<!> <!>",1),et=N('<div class="grid max-h-screen w-full grid-cols-1 flex-col gap-3 rounded-md p-3"><div class="flex w-full flex-row items-center gap-3"><div class="flex h-full items-center justify-center rounded-md border border-dashed px-3 text-lg">History</div> <!> <div class="flex flex-row gap-2"><!> <!></div> <!></div> <!></div>');function tt(t,a){_e(a,!0);const[c,n]=pe(),g=(e,s,l,ge)=>{const I=qe(e.getValue(s),l);return ge({itemRank:I}),I.passed};let f=ae(se([])),d=ae(se([])),h=ae(se({id:!1}));const m=Be({get data(){return a.data},columns:a.columns,getCoreRowModel:Le(),getSortedRowModel:Ae(),getFilteredRowModel:Ke(),filterFns:{fuzzy:g},onSortingChange:e=>{typeof e=="function"?S(f,e(r(f)),!0):S(f,e,!0)},onColumnFiltersChange:e=>{typeof e=="function"?S(d,e(r(d)),!0):S(d,e,!0)},onColumnVisibilityChange:e=>{typeof e=="function"?S(h,e(r(h)),!0):S(h,e,!0)},state:{get sorting(){return r(f)},get columnFilters(){return r(d)},get columnVisibility(){return r(h)}}});var P=et(),z=J(P),q=C(J(z),2);{let e=V(()=>{var s;return((s=m.getColumn("name"))==null?void 0:s.getFilterValue())??""});Je(q,{placeholder:"Search",get value(){return r(e)},onchange:s=>{var l;(l=m.getColumn("name"))==null||l.setFilterValue(s.currentTarget.value)},oninput:s=>{var l;(l=m.getColumn("name"))==null||l.setFilterValue(s.currentTarget.value)},class:"grow"})}var b=C(q,2),ue=J(b),we=()=>{var e;return(e=m.getColumn("id"))==null?void 0:e.getIsVisible()},Ce=e=>{var s;return(s=m.getColumn("id"))==null?void 0:s.toggleVisibility(!!e)};Oe(ue,{get checked(){return we()},set checked(e){Ce(e)},id:"showid"});var Pe=C(ue,2);Qe(Pe,{for:"showid",class:"text-nowrap",children:(e,s)=>{j();var l=O("Show ID");o(e,l)},$$slots:{default:!0}}),G(b);var Te=C(b,2);ce(Te,{variant:"destructive",onclick:()=>Ie(ye,[]),children:(e,s)=>{j();var l=O("Clear");o(e,l)},$$slots:{default:!0}}),G(z);var Fe=C(z,2);_(Fe,()=>He,(e,s)=>{s(e,{children:(l,ge)=>{var I=Ze(),fe=i(I);_(fe,()=>je,(Q,U)=>{U(Q,{class:"bg-background sticky top-0",children:(W,Se)=>{var R=u(),X=i(R);L(X,17,()=>m.getHeaderGroups(),v=>v.id,(v,x)=>{var y=u(),M=i(y);_(M,()=>le,(D,B)=>{B(D,{children:(E,H)=>{var K=u(),T=i(K);L(T,17,()=>r(x).headers,w=>w.id,(w,$)=>{var F=u(),k=i(F);_(k,()=>Ge,(Y,Z)=>{Z(Y,{children:(ee,me)=>{var te=u(),re=i(te);{var Ve=oe=>{{let ze=V(()=>r($).getContext());ve(oe,{get content(){return r($).column.columnDef.header},get context(){return r(ze)}})}};xe(re,oe=>{r($).isPlaceholder||oe(Ve)})}o(ee,te)},$$slots:{default:!0}})}),o(w,F)}),o(E,K)},$$slots:{default:!0}})}),o(v,y)}),o(W,R)},$$slots:{default:!0}})});var ke=C(fe,2);_(ke,()=>Ne,(Q,U)=>{U(Q,{children:(W,Se)=>{var R=u(),X=i(R);L(X,17,()=>m.getRowModel().rows,v=>v.id,(v,x)=>{var y=u(),M=i(y);{let D=V(()=>r(x).getIsSelected()&&"selected");_(M,()=>le,(B,E)=>{E(B,{get"data-state"(){return r(D)},children:(H,K)=>{var T=u(),w=i(T);L(w,17,()=>r(x).getVisibleCells(),$=>$.id,($,F)=>{var k=u(),Y=i(k);_(Y,()=>$e,(Z,ee)=>{ee(Z,{children:(me,te)=>{{let re=V(()=>r(F).getContext());ve(me,{get content(){return r(F).column.columnDef.cell},get context(){return r(re)}})}},$$slots:{default:!0}})}),o($,k)}),o(H,T)},$$slots:{default:!0}})})}o(v,y)},v=>{var x=u(),y=i(x);_(y,()=>le,(M,D)=>{D(M,{children:(B,E)=>{var H=u(),K=i(H);_(K,()=>$e,(T,w)=>{w(T,{get colspan(){return a.columns.length},class:"h-24 text-center",children:($,F)=>{j();var k=O("No results.");o($,k)},$$slots:{default:!0}})}),o(B,H)},$$slots:{default:!0}})}),o(v,x)}),o(W,R)},$$slots:{default:!0}})}),o(l,I)},$$slots:{default:!0}})}),G(P),o(t,P),he(),n()}function rt(t,a){{let c=V(()=>"/g/"+a.id);ce(t,{variant:"ghost",size:"icon",class:"relative size-8 p-0",get href(){return r(c)},children:(n,g)=>{Ue(n,{})},$$slots:{default:!0}})}}var ot=N("<a> </a>");function at(t,a){const c=be(a,["$$slots","$$events","$$legacy","children"]);var n=ot();We(n,()=>({...c}));var g=J(n,!0);G(n),ie(()=>de(g,a.children)),o(t,n)}var st=N('<div class="flex w-full flex-row flex-wrap gap-2"></div>');function nt(t,a){var c=st();L(c,21,()=>a.tags||[],De,(n,g)=>{Xe(n,{variant:"default",children:(f,d)=>{j();var h=O();ie(()=>de(h,`#${r(g)??""}`)),o(f,h)},$$slots:{default:!0}})}),G(c),o(t,c)}var lt=N(" <!>",1);function A(t,a){let c=ne(a,"content",3,""),n=ne(a,"variant",3,"ghost"),g=ne(a,"sort",3,!1),f=be(a,["$$slots","$$events","$$legacy","content","variant","sort"]);ce(t,Re({get variant(){return n()},class:"w-full"},()=>f,{children:(d,h)=>{j();var m=lt(),P=i(m),z=C(P);{var q=b=>{Ee(b,{class:"ml-2"})};xe(z,b=>{g()&&b(q)})}ie(()=>de(P,`${c()??""} `)),o(d,m)},$$slots:{default:!0}}))}const it=[{accessorKey:"id",header:({column:t})=>p(A,{content:"ID"})},{accessorKey:"name",header:({column:t})=>p(A,{onclick:t.getToggleSortingHandler(),content:"Name",sort:!0}),cell:({row:t})=>p(at,{children:t.original.name,href:`/g/${t.original.id}`}),filterFn:"fuzzy"},{accessorKey:"category",header:({column:t})=>p(A,{onclick:t.getToggleSortingHandler(),content:"Category",sort:!0})},{accessorKey:"description",header:({column:t})=>p(A,{content:"Description"})},{accessorKey:"tags",header:({column:t})=>p(A,{content:"Tags"}),cell:({row:t})=>p(nt,{tags:t.original.tags})},{id:"actions",cell:({row:t})=>p(rt,{id:t.original.id})}];function Pt(t,a){_e(a,!0);const[c,n]=pe(),g=()=>Me(ye,"$historyStore",c);let f=V(()=>g().map(d=>Ye(d)).filter(d=>d!==void 0));tt(t,{get data(){return r(f)},get columns(){return it}}),he(),n()}export{Pt as component};
