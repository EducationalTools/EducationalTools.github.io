import"../chunks/Bzak7iHL.js";import{o as Ue}from"../chunks/WtX1KPjl.js";import{aA as Ee,p as G,e as V,g as s,a as t,c as J,i as d,aw as oe,f,d as re,h as ve,r as ae,n as A,t as M,b as Te,s as u,k as R,j as ue,B as Ie,av as We}from"../chunks/8W1ZFGhz.js";import{i as De}from"../chunks/DyZeaouC.js";import{e as Xe,i as Ze}from"../chunks/Bm_VFvCf.js";import{c as o}from"../chunks/BxyT-HaH.js";import{a as et,D as tt,b as rt,c as at,d as ot,C as Ye,u as lt,e as je,f as st,S as nt,g as dt,I as it}from"../chunks/CbiCPAhG.js";import"../chunks/TX3S9vWU.js";import{b as ge,B as he}from"../chunks/DZzzVXzt.js";import{a as ye,b as we,C as Ce}from"../chunks/CefdiL4P.js";import{C as ct}from"../chunks/BK1Nbw_R.js";import{C as ut,a as qe}from"../chunks/qEQLZB1l.js";import{I as ke}from"../chunks/C0uD8DpW.js";import{R as Ae,A as Be,r as Qe}from"../chunks/CJDu-eOh.js";import{a as ie,s as Le}from"../chunks/DwBxj07P.js";import{_ as me}from"../chunks/CqHE2nnZ.js";import{t as de}from"../chunks/Bv1yL0k7.js";import{p as Q,r as Z,s as _e,b as Pe}from"../chunks/BNZORXRz.js";import{H as ft}from"../chunks/BbIs3hNr.js";import{a as $e,c as fe}from"../chunks/qzIG6cGZ.js";import{b as Ge,d as pe,m as Je}from"../chunks/B8efuswh.js";import{c as vt,A as _t,L as Se}from"../chunks/CZnHEgzM.js";import{I as $t}from"../chunks/D7ONiqf4.js";import{c as Me}from"../chunks/C_1WbdsR.js";import{A as gt}from"../chunks/C3nTXBDa.js";var mt=f("<button><!></button>");function pt(i,e){const l=Ee();G(e,!0);let n=Q(e,"id",19,()=>Ge(l)),r=Q(e,"ref",15,null),c=Z(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const a=vt.create({id:pe.with(()=>n()),ref:pe.with(()=>r(),S=>r(S))}),v=oe(()=>Je(c,a.props));var m=V(),k=s(m);{var le=S=>{var $=V(),y=s($);ie(y,()=>e.child,()=>({props:d(v)})),t(S,$)},ce=S=>{var $=mt();$e($,()=>({...d(v)}));var y=re($);ie(y,()=>e.children??ve),ae($),t(S,$)};De(k,S=>{e.child?S(le):S(ce,!1)})}t(i,m),J()}var ht=f("<button><!></button>");function xt(i,e){const l=Ee();G(e,!0);let n=Q(e,"id",19,()=>Ge(l)),r=Q(e,"ref",15,null),c=Q(e,"disabled",3,!1),a=Z(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const v=_t.create({id:pe.with(()=>n()),ref:pe.with(()=>r(),$=>r($)),disabled:pe.with(()=>!!c())}),m=oe(()=>Je(a,v.props));var k=V(),le=s(k);{var ce=$=>{var y=V(),se=s(y);ie(se,()=>e.child,()=>({props:d(m)})),t($,y)},S=$=>{var y=ht();$e(y,()=>({...d(m)}));var se=re(y);ie(se,()=>e.children??ve),ae(y),t($,y)};De(le,$=>{e.child?$(ce):$(S,!1)})}t(i,k),J()}function Pt(i,e){G(e,!0);/**
 * @license @lucide/svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let l=Z(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];$t(i,_e({name:"trash"},()=>l,{get iconNode(){return n},children:(r,c)=>{var a=V(),v=s(a);ie(v,()=>e.children??ve),t(r,a)},$$slots:{default:!0}})),J()}var bt=f("<div><!></div>");function kt(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=bt();$e(r,a=>({"data-slot":"alert-description",class:a,...n}),[()=>fe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e.class)]);var c=re(r);ie(c,()=>e.children??ve),ae(r),Pe(r,a=>l(a),()=>l()),t(i,r),J()}var yt=f("<div><!></div>");function wt(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=yt();$e(r,a=>({"data-slot":"alert-title",class:a,...n}),[()=>fe("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e.class)]);var c=re(r);ie(c,()=>e.children??ve),ae(r),Pe(r,a=>l(a),()=>l()),t(i,r),J()}const xe=et;function Fe(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref"]);var r=V(),c=s(r);o(c,()=>tt,(a,v)=>{v(a,_e({"data-slot":"alert-dialog-trigger"},()=>n,{get ref(){return l()},set ref(m){l(m)}}))}),t(i,r),J()}function ze(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var r=V(),c=s(r);{let a=oe(()=>fe("text-lg font-semibold",e.class));o(c,()=>rt,(v,m)=>{m(v,_e({"data-slot":"alert-dialog-title",get class(){return d(a)}},()=>n,{get ref(){return l()},set ref(k){l(k)}}))})}t(i,r),J()}function Ne(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var r=V(),c=s(r);{let a=oe(()=>fe(ge(),e.class));o(c,()=>pt,(v,m)=>{m(v,_e({"data-slot":"alert-dialog-action",get class(){return d(a)}},()=>n,{get ref(){return l()},set ref(k){l(k)}}))})}t(i,r),J()}function He(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var r=V(),c=s(r);{let a=oe(()=>fe(ge({variant:"outline"}),e.class));o(c,()=>xt,(v,m)=>{m(v,_e({"data-slot":"alert-dialog-cancel",get class(){return d(a)}},()=>n,{get ref(){return l()},set ref(k){l(k)}}))})}t(i,r),J()}var Ct=f("<div><!></div>");function Oe(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ct();$e(r,a=>({"data-slot":"alert-dialog-footer",class:a,...n}),[()=>fe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var c=re(r);ie(c,()=>e.children??ve),ae(r),Pe(r,a=>l(a),()=>l()),t(i,r),J()}var At=f("<div><!></div>");function Re(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=At();$e(r,a=>({"data-slot":"alert-dialog-header",class:a,...n}),[()=>fe("flex flex-col gap-2 text-center sm:text-left",e.class)]);var c=re(r);ie(c,()=>e.children??ve),ae(r),Pe(r,a=>l(a),()=>l()),t(i,r),J()}function Ve(i,e){G(e,!0);let l=Q(e,"ref",15,null),n=Z(e,["$$slots","$$events","$$legacy","ref","class"]);var r=V(),c=s(r);{let a=oe(()=>fe("text-muted-foreground text-sm",e.class));o(c,()=>at,(v,m)=>{m(v,_e({"data-slot":"alert-dialog-description",get class(){return d(a)}},()=>n,{get ref(){return l()},set ref(k){l(k)}}))})}t(i,r),J()}var Bt=f("<!> <!>",1),Dt=f("<!> <!>",1),Tt=f("<!> <!>",1),It=f("<!> <!>",1),jt=f("<!> <!>",1),Lt=f("<!> <!>",1),St=f("<!> <!>",1),Mt=f("<!> <!>",1),Ft=f("<!> <!>",1),zt=f("<!> <!> <!>",1),Nt=f("<!> <!>",1);function Ht(i,e){G(e,!0);let l=ue(!1),n=ue(!1);var r=V(),c=s(r);o(c,()=>Ce,(a,v)=>{v(a,{children:(m,k)=>{var le=Nt(),ce=s(le);o(ce,()=>ye,($,y)=>{y($,{children:(se,be)=>{var h=Bt(),E=s(h);o(E,()=>we,(K,p)=>{p(K,{children:(B,D)=>{A();var g=M();Te(()=>Le(g,e.backup.name)),t(B,g)},$$slots:{default:!0}})});var F=u(E,2);o(F,()=>ut,(K,p)=>{p(K,{children:(B,D)=>{A();var g=M();Te(_=>Le(g,_),[()=>ot(e.backup.creationTime).format("hh:mm a - DD/MM/YY")]),t(B,g)},$$slots:{default:!0}})}),t(se,h)},$$slots:{default:!0}})});var S=u(ce,2);o(S,()=>qe,($,y)=>{y($,{class:"flex flex-row gap-3",children:(se,be)=>{var h=zt(),E=s(h);he(E,{variant:"outline",size:"icon",onclick:()=>{me.capture("backup",{type:"copy",location:"cloud"}),navigator.clipboard.writeText(e.backup.data).then(()=>{de.success("Backup copied to clipboard")}).catch(p=>{de.error("Failed to copy backup to clipboard")})},children:(p,B)=>{Ye(p,{})},$$slots:{default:!0}});var F=u(E,2);o(F,()=>Ae,(p,B)=>{B(p,{get open(){return d(l)},set open(D){R(l,D,!0)},children:(D,g)=>{var _=jt(),T=s(_);{let x=oe(()=>ge({variant:"default",size:"icon"}));o(T,()=>Fe,(P,w)=>{w(P,{get class(){return d(x)},children:(I,C)=>{ft(I,{})},$$slots:{default:!0}})})}var U=u(T,2);o(U,()=>Be,(x,P)=>{P(x,{children:(w,I)=>{var C=It(),j=s(C);o(j,()=>Re,(b,z)=>{z(b,{children:(W,ee)=>{var L=Dt(),Y=s(L);o(Y,()=>ze,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("Restore Backup?");t(O,q)},$$slots:{default:!0}})});var te=u(Y,2);o(te,()=>Ve,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("This will replace all your current data");t(O,q)},$$slots:{default:!0}})}),t(W,L)},$$slots:{default:!0}})});var ne=u(j,2);o(ne,()=>Oe,(b,z)=>{z(b,{children:(W,ee)=>{var L=Tt(),Y=s(L);o(Y,()=>He,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("Cancel");t(O,q)},$$slots:{default:!0}})});var te=u(Y,2);o(te,()=>Ne,(N,H)=>{H(N,{onclick:()=>{me.capture("backup",{type:"restore",location:"cloud"}),R(l,!1),e.setLoading(!0),Qe(e.backup.data)},children:(O,X)=>{A();var q=M("Continue");t(O,q)},$$slots:{default:!0}})}),t(W,L)},$$slots:{default:!0}})}),t(w,C)},$$slots:{default:!0}})}),t(D,_)},$$slots:{default:!0}})});var K=u(F,2);o(K,()=>Ae,(p,B)=>{B(p,{get open(){return d(n)},set open(D){R(n,D,!0)},children:(D,g)=>{var _=Ft(),T=s(_);{let x=oe(()=>ge({variant:"destructive",size:"icon"}));o(T,()=>Fe,(P,w)=>{w(P,{get class(){return d(x)},children:(I,C)=>{Pt(I,{})},$$slots:{default:!0}})})}var U=u(T,2);o(U,()=>Be,(x,P)=>{P(x,{children:(w,I)=>{var C=Mt(),j=s(C);o(j,()=>Re,(b,z)=>{z(b,{children:(W,ee)=>{var L=Lt(),Y=s(L);o(Y,()=>ze,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("Delete Backup?");t(O,q)},$$slots:{default:!0}})});var te=u(Y,2);o(te,()=>Ve,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("This will delete the backup permanently");t(O,q)},$$slots:{default:!0}})}),t(W,L)},$$slots:{default:!0}})});var ne=u(j,2);o(ne,()=>Oe,(b,z)=>{z(b,{children:(W,ee)=>{var L=St(),Y=s(L);o(Y,()=>He,(N,H)=>{H(N,{children:(O,X)=>{A();var q=M("Cancel");t(O,q)},$$slots:{default:!0}})});var te=u(Y,2);{let N=oe(()=>ge({variant:"destructive"}));o(te,()=>Ne,(H,O)=>{O(H,{get class(){return d(N)},onclick:async()=>{e.setLoading(!0);try{const X=await e.getToken();await e.client.mutation(xe.backups.remove,{id:e.backup.id,jwt:X}),de.success("Backup deleted successfully"),R(n,!1)}catch(X){console.error("Failed to delete backup:",X),de.error("Failed to delete backup")}finally{e.setLoading(!1)}},children:(X,q)=>{A();var Ke=M("Continue");t(X,Ke)},$$slots:{default:!0}})})}t(W,L)},$$slots:{default:!0}})}),t(w,C)},$$slots:{default:!0}})}),t(D,_)},$$slots:{default:!0}})}),t(se,h)},$$slots:{default:!0}})}),t(m,le)},$$slots:{default:!0}})}),t(i,r),J()}var Ot=f("<!> Loading",1),Rt=f('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),Vt=f("<!> <!>",1),Et=f("<!> <!>",1),Yt=f("<!> <!>",1),qt=f('<div class="flex items-center justify-center"><!></div>'),Qt=f('<div class="grid w-full grid-cols-1 gap-3 md:grid-cols-2"><!> <!> <!></div>'),Gt=f("<!> <!><!>",1),Jt=f('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!> <!> <!></div>');function xr(i,e){G(e,!0);const l=lt();let n=ue("");Ie(()=>{l.session&&le().then(h=>{R(n,h,!0)})});let r=ue(We(je(xe.backups.get,{jwt:""})));const c=st();let a=ue(""),v=ue(!1),m=ue(""),k=ue("");Ue(()=>{R(m,Me(),!0)}),Ie(()=>{R(r,je(xe.backups.get,{jwt:d(n)}),!0)});async function le(){var E;const h=await((E=l.session)==null?void 0:E.getToken());return h||(l.session&&de.error("Something went wrong"),"")}function ce(h){R(v,h,!0)}var S=Jt(),$=u(re(S),2);o($,()=>Ae,(h,E)=>{E(h,{get open(){return d(v)},children:(F,K)=>{var p=V(),B=s(p);o(B,()=>Be,(D,g)=>{g(D,{class:"flex flex-row gap-3",children:(_,T)=>{var U=Ot(),x=s(U);Se(x,{class:"animate-spin"}),A(),t(_,U)},$$slots:{default:!0}})}),t(F,p)},$$slots:{default:!0}})});var y=u($,2);o(y,()=>Ce,(h,E)=>{E(h,{children:(F,K)=>{var p=Vt(),B=s(p);o(B,()=>ye,(g,_)=>{_(g,{children:(T,U)=>{var x=V(),P=s(x);o(P,()=>we,(w,I)=>{I(w,{children:(C,j)=>{A();var ne=M("Local Backup");t(C,ne)},$$slots:{default:!0}})}),t(T,x)},$$slots:{default:!0}})});var D=u(B,2);o(D,()=>ct,(g,_)=>{_(g,{class:"flex flex-col gap-3",children:(T,U)=>{A();var x=Rt(),P=u(s(x)),w=re(P);ke(w,{disabled:!0,get value(){return d(m)}});var I=u(w,2);he(I,{size:"icon",onclick:()=>{me.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(d(m)).then(()=>{de.success("Backup copied to clipboard")}).catch(b=>{de.error("Failed to copy backup to clipboard")})},children:(b,z)=>{Ye(b,{})},$$slots:{default:!0}}),ae(P);var C=u(P,2),j=re(C);ke(j,{get value(){return d(k)},set value(b){R(k,b,!0)}});var ne=u(j,2);{let b=oe(()=>d(k).length===0);he(ne,{get disabled(){return d(b)},onclick:()=>{me.capture("backup",{type:"import",location:"local"}),R(v,!0),Qe(d(k))},children:(z,W)=>{A();var ee=M("Import");t(z,ee)},$$slots:{default:!0}})}ae(C),t(T,x)},$$slots:{default:!0}})}),t(F,p)},$$slots:{default:!0}})});var se=u(y,2);nt(se,{children:(h,E)=>{var F=Qt(),K=re(F);o(K,()=>Ce,(g,_)=>{_(g,{children:(T,U)=>{var x=Yt(),P=s(x);o(P,()=>ye,(I,C)=>{C(I,{children:(j,ne)=>{var b=V(),z=s(b);o(z,()=>we,(W,ee)=>{ee(W,{children:(L,Y)=>{A();var te=M("Create a Backup");t(L,te)},$$slots:{default:!0}})}),t(j,b)},$$slots:{default:!0}})});var w=u(P,2);o(w,()=>qe,(I,C)=>{C(I,{class:"flex flex-row gap-3",children:(j,ne)=>{var b=Et(),z=s(b);ke(z,{placeholder:"Backup Name",get value(){return d(a)},set value(ee){R(a,ee,!0)}});var W=u(z,2);{let ee=oe(()=>!d(n)||d(a).length===0);he(W,{get disabled(){return d(ee)},onclick:()=>{me.capture("backup",{type:"create",location:"cloud"}),R(v,!0),le().then(L=>{d(a).length>0&&c.mutation(xe.backups.create,{name:d(a),jwt:L,data:Me()}).then(()=>{R(a,""),de.success("Backup created successfully"),R(v,!1)}).catch(Y=>{R(v,!1),de.error("Failed to create backup")})})},children:(L,Y)=>{A();var te=M("Create");t(L,te)},$$slots:{default:!0}})}t(j,b)},$$slots:{default:!0}})}),t(T,x)},$$slots:{default:!0}})});var p=u(K,2);{var B=g=>{var _=qt(),T=re(_);Se(T,{class:"animate-spin"}),ae(_),t(g,_)};De(p,g=>{d(r).data||g(B)})}var D=u(p,2);Xe(D,17,()=>d(r).data||[],Ze,(g,_)=>{Ht(g,{get backup(){return d(_)},get client(){return c},getToken:le,setLoading:ce})}),ae(F),t(h,F)},$$slots:{default:!0}});var be=u(se,2);dt(be,{children:(h,E)=>{var F=V(),K=s(F);o(K,()=>gt,(p,B)=>{B(p,{children:(D,g)=>{var _=Gt(),T=s(_);it(T,{});var U=u(T,2);o(U,()=>wt,(P,w)=>{w(P,{children:(I,C)=>{A();var j=M("Tip");t(I,j)},$$slots:{default:!0}})});var x=u(U);o(x,()=>kt,(P,w)=>{w(P,{children:(I,C)=>{A();var j=M("Backup to the cloud with an EduTools account.");t(I,j)},$$slots:{default:!0}})}),t(D,_)},$$slots:{default:!0}})}),t(h,F)},$$slots:{default:!0}}),ae(S),t(i,S),J()}export{xr as component};
