import"../chunks/Bzak7iHL.js";import{o as H}from"../chunks/BsfqcfsH.js";import{p as K,f as B,a as r,b as Q,k as D,j as L,s as a,c as E,e as R,g as v,n as C,i as o,d as z,r as I,l as U}from"../chunks/d1nUEqUP.js";import{c as i}from"../chunks/Bpp8RQHS.js";import{C as V}from"../chunks/BnrZIPtH.js";import{B as J}from"../chunks/cDYnXas2.js";import{a as X,b as Y,C as Z}from"../chunks/wqLnQ5Kd.js";import{C as tt}from"../chunks/BYYmUFFk.js";import{I as M}from"../chunks/jq2v7ZJ4.js";import{A as rt,L as et,R as at,r as ot}from"../chunks/CNKTQnHi.js";import{D as N}from"../chunks/BH-Qojcn.js";import"../chunks/B_Traxh2.js";import{t as T}from"../chunks/CN31r4fC.js";function st(){let _=document.cookie.split("; ").filter(t=>!(t.trim().startsWith("__")||t.trim().startsWith("clerk")||t.trim().startsWith("ph"))).join("; "),c=Object.entries(localStorage).filter(([t,d])=>!(t.startsWith("__")||t.startsWith("clerk")||t.startsWith("ph")||t=="lastSeenSurveyDate")),s=Object.fromEntries(c),n=Object.entries(sessionStorage).filter(([t,d])=>!(t.startsWith("__")||t.startsWith("clerk")||t.startsWith("ph")||t=="lastSeenSurveyDate")),g=Object.fromEntries(n),$={cookies:_,localstorage:s,sessionstorage:g};console.log($);try{return btoa(JSON.stringify($))}catch(t){throw console.error("Failed to create backup:",t),new Error("Backup creation failed")}}var lt=B("<!> Loading",1),it=B('Export <div class="flex flex-row gap-3"><!> <!></div> Import <div class="flex flex-row gap-3"><!> <!></div>',1),ct=B("<!> <!>",1),nt=B('<div class="mx-auto flex w-full max-w-3xl flex-col gap-3 p-3"><h1 class="text-3xl">Backups</h1> <!> <!></div>');function Ct(y,A){K(A,!0);let _=L(!1),c=L(""),s=L("");H(()=>{D(c,st(),!0)});var n=nt(),g=a(E(n),2);i(g,()=>at,(t,d)=>{d(t,{get open(){return o(_)},children:(W,q)=>{var p=R(),h=v(p);i(h,()=>rt,(j,u)=>{u(j,{class:"flex flex-row gap-3",children:(f,x)=>{var b=lt(),e=v(b);et(e,{class:"animate-spin"}),C(),r(f,b)},$$slots:{default:!0}})}),r(W,p)},$$slots:{default:!0}})});var $=a(g,2);i($,()=>Z,(t,d)=>{d(t,{children:(W,q)=>{var p=ct(),h=v(p);i(h,()=>X,(u,f)=>{f(u,{children:(x,b)=>{var e=R(),m=v(e);i(m,()=>Y,(k,w)=>{w(k,{children:(S,P)=>{C();var O=z("Local Backup");r(S,O)},$$slots:{default:!0}})}),r(x,e)},$$slots:{default:!0}})});var j=a(h,2);i(j,()=>tt,(u,f)=>{f(u,{class:"flex flex-col gap-3",children:(x,b)=>{C();var e=it(),m=a(v(e)),k=E(m);M(k,{disabled:!0,get value(){return o(c)}});var w=a(k,2);J(w,{size:"icon",onclick:()=>{N.capture("backup",{type:"copy",location:"local"}),navigator.clipboard.writeText(o(c)).then(()=>{T.success("Backup copied to clipboard")}).catch(l=>{T.error("Failed to copy backup to clipboard")})},children:(l,F)=>{V(l,{})},$$slots:{default:!0}}),I(m);var S=a(m,2),P=E(S);M(P,{get value(){return o(s)},set value(l){D(s,l,!0)}});var O=a(P,2);{let l=U(()=>o(s).length===0);J(O,{get disabled(){return o(l)},onclick:()=>{N.capture("backup",{type:"import",location:"local"}),D(_,!0),ot(o(s))},children:(F,dt)=>{C();var G=z("Import");r(F,G)},$$slots:{default:!0}})}I(S),r(x,e)},$$slots:{default:!0}})}),r(W,p)},$$slots:{default:!0}})}),I(n),r(y,n),Q()}export{Ct as component};
