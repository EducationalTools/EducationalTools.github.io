var F=Object.getPrototypeOf;var G=Reflect.get;var j=i=>{throw TypeError(i)};var I=(i,u,e)=>u.has(i)||j("Cannot "+e);var s=(i,u,e)=>(I(i,u,"read from private field"),e?e.call(i):u.get(i)),c=(i,u,e)=>u.has(i)?j("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(i):u.set(i,e);var v=(i,u,e)=>(I(i,u,"access private method"),e);var L=(i,u,e)=>G(F(i),e,u);import{j as x,aL as S,aa as H,i as p,k as d,aI as l}from"./d1nUEqUP.js";var o,h,f,w,n,g,m;const E=class E extends Map{constructor(e){super();c(this,n);c(this,o,new Map);c(this,h,x(0));c(this,f,x(0));c(this,w,S||-1);if(e){for(var[t,r]of e)super.set(t,r);s(this,f).v=super.size}}has(e){var t=s(this,o),r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=v(this,n,g).call(this,0),t.set(e,r);else return p(s(this,h)),!1}return p(r),!0}forEach(e,t){v(this,n,m).call(this),super.forEach(e,t)}get(e){var t=s(this,o),r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=v(this,n,g).call(this,0),t.set(e,r);else{p(s(this,h));return}}return p(r),super.get(e)}set(e,t){var b;var r=s(this,o),a=r.get(e),A=super.get(e),B=super.set(e,t),z=s(this,h);if(a===void 0)a=v(this,n,g).call(this,0),r.set(e,a),d(s(this,f),super.size),l(z);else if(A!==t){l(a);var _=z.reactions===null?null:new Set(z.reactions),C=_===null||!((b=a.reactions)!=null&&b.every(D=>_.has(D)));C&&l(z)}return B}delete(e){var t=s(this,o),r=t.get(e),a=super.delete(e);return r!==void 0&&(t.delete(e),d(s(this,f),super.size),d(r,-1),l(s(this,h))),a}clear(){if(super.size!==0){super.clear();var e=s(this,o);d(s(this,f),0);for(var t of e.values())d(t,-1);l(s(this,h)),e.clear()}}keys(){return p(s(this,h)),super.keys()}values(){return v(this,n,m).call(this),super.values()}entries(){return v(this,n,m).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return p(s(this,f)),super.size}};o=new WeakMap,h=new WeakMap,f=new WeakMap,w=new WeakMap,n=new WeakSet,g=function(e){return S===s(this,w)?x(e):H(e)},m=function(){p(s(this,h));var e=s(this,o);if(s(this,f).v!==e.size){for(var t of L(E.prototype,this,"keys").call(this))if(!e.has(t)){var r=v(this,n,g).call(this,0);e.set(t,r)}}for([,r]of s(this,o))p(r)};let q=E;function M(){}export{q as S,M as n};
