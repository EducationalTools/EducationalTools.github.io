import{w as l,B as h,t as d,a as r,p as c}from"./chunk-JMJ3UQ3L-DLa4wvEN.js";import{S as x}from"./spinner-VocTvHE6.js";import{a as w}from"./auth-client-CoRsmko_.js";import{t as L}from"./index-Bqq4DHLr.js";import{b as S}from"./ConvexAuthState-CCLe0bpr.js";import"./index-Dr94eIYd.js";import"./utils-BB8OEnXs.js";import"./bundle-mjs-BNe0Xlio.js";import"./sha2-CO3l0I8W.js";import"./index-vAMRNKaC.js";const b=l(function(){const[a]=h(),m=a.get("token"),t=a.get("redirect"),n=S(),e=d(),[g,i]=r.useState(!0),[u,s]=r.useState("Loading");async function f(){s("Logging in");try{const o=await w.signIn.ott({token:m||""});if(o.error)s(o.error.message||""),i(!1);else if(L.success("Logged in"),t&&t.trim()!=="")try{const p=new URL(t);e(p.pathname)}catch{e(t)}else e("/")}catch{s("Something went wrong"),i(!1)}}return r.useEffect(()=>{n.isLoading||f()},[n.isLoading]),c.jsxs("div",{className:"w-full h-full flex flex-row gap-2 justify-center items-center p-4",children:[g&&c.jsx(x,{}),u]})});export{b as default};
