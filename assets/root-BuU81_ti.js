import{a as g,R as pt,p as l,q as Ko,L as it,t as hi,w as Yo,v as Xo,M as Jo,x as Zo,S as Qo,y as el,O as tl,i as rl}from"./chunk-JMJ3UQ3L-DLa4wvEN.js";import{u as Xn,S as sl,a as il,b as is,c as Pt,d as $t,e as nl,f as al,g as ol,h as ll,i as cl,j as ul,k as dl,T as ns,l as as,m as os,n as hl,o as pl}from"./sidebar-dtmpQVvL.js";import{P as fl,a as gl,b as vl,c as ml,d as Jn,e as _l,f as yl,g as pi,h as bl,i as xl,j as wl,k as El,l as Is,m as Zn,n as kl,o as Sl,p as jl,q as Cl,r as Pl,s as $l,t as Rl,u as Nl,v as Qn,w as Il,x as Ol,y as Tl,z as Al,A as Wt,B as Fl,C as Ml,D as Ll,E as ea,F as Dl,G as Bl}from"./index-Dr94eIYd.js";import{c as Z}from"./utils-BB8OEnXs.js";import{u as ta,c as ra,P as Hl,a as Ul}from"./index-CeJ37sa3.js";import{c as at,u as fi}from"./index-CPvIzByb.js";import"./index-vAMRNKaC.js";import{u as nt}from"./index-RdSmrbPg.js";import{c as ql}from"./bundle-mjs-BNe0Xlio.js";import{p as zl}from"./gmaes-DvkgVeb-.js";import{T as Gl}from"./tools-Cbce0G1B.js";import{u as W,a as Se,b as V,c as Di,d as Wl,e as Vl,r as Kl,f as Yl}from"./state-DJ_Xbwdm.js";import{M as Bi,u as Xl,l as Jl,a as sa,A as ia,m as Ir,N as Os}from"./constants-DzlEtQAh.js";import{u as na,C as Zl,a as Ql}from"./ConvexAuthState-CCLe0bpr.js";import{R as ec,P as tc,O as rc,C as sc,D as ic}from"./index-BoNYA7lJ.js";import{P as Ze}from"./index-DVeKyYZy.js";import{D as Ts,a as As,b as Fs,c as nc,d as Ms,e as ac,f as oc,g as lc,h as cc,i as Hi,S as Qe}from"./dropdown-menu-U7x9GUHW.js";import{B as me}from"./button-D7tyPeF-.js";import{C as uc}from"./checkbox-B7ykQhk0.js";import{u as dc}from"./index-CCnL2lkS.js";import{u as hc}from"./index-CFCRIzy5.js";import{I as fr}from"./input-DE-BWp1k.js";import{C as Rt,a as Nt,b as It,c as Ot,d as Ui}from"./card-BpPdZkTd.js";import{T as pc,a as fc,b as ls}from"./tabs-5MI-11v8.js";import{A as gr,a as vr,b as mr,c as _r,d as yr,e as br,f as xr,g as wr,h as Er}from"./alert-dialog-C5z3n2hc.js";import{U as gc,a as vc,P as mc,S as _c,b as aa,A as yc}from"./index-BIbihrDg.js";import{a as He}from"./auth-client-CoRsmko_.js";import{T as bc,t as xc}from"./index-Bqq4DHLr.js";import{S as wc}from"./spinner-VocTvHE6.js";import"./index-DUVdAX2J.js";import"./index-DhSUr4ds.js";import"./index-DFapR5wA.js";import"./sha2-CO3l0I8W.js";var m=typeof window<"u"?window:void 0,ie=typeof globalThis<"u"?globalThis:m;typeof self>"u"&&(ie.self=ie),typeof File>"u"&&(ie.File=function(){});var oa=Array.prototype,qi=oa.forEach,zi=oa.indexOf,_e=ie?.navigator,S=ie?.document,pe=ie?.location,Ls=ie?.fetch,Ds=ie!=null&&ie.XMLHttpRequest&&"withCredentials"in new ie.XMLHttpRequest?ie.XMLHttpRequest:void 0,Gi=ie?.AbortController,he=_e?.userAgent,N=m??{},Te={DEBUG:!1,LIB_VERSION:"1.313.0"};function Wi(s,e,t,r,i,n,a){try{var o=s[n](a),c=o.value}catch(u){return void t(u)}o.done?e(c):Promise.resolve(c).then(r,i)}function Vi(s){return function(){var e=this,t=arguments;return new Promise((function(r,i){var n=s.apply(e,t);function a(c){Wi(n,r,i,a,o,"next",c)}function o(c){Wi(n,r,i,a,o,"throw",c)}a(void 0)}))}}function C(){return C=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},C.apply(null,arguments)}function la(s,e){if(s==null)return{};var t={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.indexOf(r)!==-1)continue;t[r]=s[r]}return t}var Ec=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Ki=function(s,e){if(e===void 0&&(e=[]),!s)return!1;var t=s.toLowerCase();return Ec.concat(e).some((r=>{var i=r.toLowerCase();return t.indexOf(i)!==-1}))},kc=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function F(s,e){return s.indexOf(e)!==-1}var Yr=function(s){return s.trim()},Bs=function(s){return s.replace(/^\$/,"")},Sc=Array.isArray,ca=Object.prototype,ua=ca.hasOwnProperty,Xr=ca.toString,B=Sc||function(s){return Xr.call(s)==="[object Array]"},Ke=s=>typeof s=="function",Q=s=>s===Object(s)&&!B(s),_t=s=>{if(Q(s)){for(var e in s)if(ua.call(s,e))return!1;return!0}return!1},E=s=>s===void 0,J=s=>Xr.call(s)=="[object String]",Hs=s=>J(s)&&s.trim().length===0,je=s=>s===null,D=s=>E(s)||je(s),Ne=s=>Xr.call(s)=="[object Number]",Ue=s=>Xr.call(s)==="[object Boolean]",jc=s=>s instanceof FormData,Cc=s=>F(kc,s);function Us(s){return s===null||typeof s!="object"}function Or(s,e){return Object.prototype.toString.call(s)==="[object "+e+"]"}function da(s){return!E(Event)&&(function(e,t){try{return e instanceof t}catch{return!1}})(s,Event)}var Pc=[!0,"true",1,"1","yes"],cs=s=>F(Pc,s),$c=[!1,"false",0,"0","no"];function Re(s,e,t,r,i){return e>t&&(r.warn("min cannot be greater than max."),e=t),Ne(s)?s>t?(r.warn(" cannot be  greater than max: "+t+". Using max value instead."),t):s<e?(r.warn(" cannot be less than min: "+e+". Using min value instead."),e):s:(r.warn(" must be a number. using max or fallback. max: "+t+", fallback: "+i),Re(i||t,e,t,r))}let Rc=class{constructor(e){this.t={},this.i=e.i,this.o=Re(e.bucketSize,0,100,e.h),this.m=Re(e.refillRate,0,this.o,e.h),this.$=Re(e.refillInterval,0,864e5,e.h)}S(e,t){var r=t-e.lastAccess,i=Math.floor(r/this.$);if(i>0){var n=i*this.m;e.tokens=Math.min(e.tokens+n,this.o),e.lastAccess=e.lastAccess+i*this.$}}consumeRateLimit(e){var t,r=Date.now(),i=String(e),n=this.t[i];return n?this.S(n,r):(n={tokens:this.o,lastAccess:r},this.t[i]=n),n.tokens===0||(n.tokens--,n.tokens===0&&((t=this.i)==null||t.call(this,e)),n.tokens===0)}stop(){this.t={}}};var xe="Mobile",Tr="iOS",De="Android",ir="Tablet",ha=De+" "+ir,pa="iPad",fa="Apple",ga=fa+" Watch",nr="Safari",wt="BlackBerry",va="Samsung",ma=va+"Browser",_a=va+" Internet",ot="Chrome",Nc=ot+" OS",ya=ot+" "+Tr,gi="Internet Explorer",ba=gi+" "+xe,vi="Opera",Ic=vi+" Mini",mi="Edge",xa="Microsoft "+mi,bt="Firefox",wa=bt+" "+Tr,ar="Nintendo",or="PlayStation",xt="Xbox",Ea=De+" "+xe,ka=xe+" "+nr,Vt="Windows",qs=Vt+" Phone",Yi="Nokia",zs="Ouya",Sa="Generic",Oc=Sa+" "+xe.toLowerCase(),ja=Sa+" "+ir.toLowerCase(),Gs="Konqueror",de="(\\d+(\\.\\d+)?)",us=new RegExp("Version/"+de),Tc=new RegExp(xt,"i"),Ac=new RegExp(or+" \\w+","i"),Fc=new RegExp(ar+" \\w+","i"),_i=new RegExp(wt+"|PlayBook|BB10","i"),Mc={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},kr,Xi,ds,Lc=(s,e)=>e&&F(e,fa)||(function(t){return F(t,nr)&&!F(t,ot)&&!F(t,De)})(s),Ca=function(s,e){return e=e||"",F(s," OPR/")&&F(s,"Mini")?Ic:F(s," OPR/")?vi:_i.test(s)?wt:F(s,"IE"+xe)||F(s,"WPDesktop")?ba:F(s,ma)?_a:F(s,mi)||F(s,"Edg/")?xa:F(s,"FBIOS")?"Facebook "+xe:F(s,"UCWEB")||F(s,"UCBrowser")?"UC Browser":F(s,"CriOS")?ya:F(s,"CrMo")||F(s,ot)?ot:F(s,De)&&F(s,nr)?Ea:F(s,"FxiOS")?wa:F(s.toLowerCase(),Gs.toLowerCase())?Gs:Lc(s,e)?F(s,xe)?ka:nr:F(s,bt)?bt:F(s,"MSIE")||F(s,"Trident/")?gi:F(s,"Gecko")?bt:""},Dc={[ba]:[new RegExp("rv:"+de)],[xa]:[new RegExp(mi+"?\\/"+de)],[ot]:[new RegExp("("+ot+"|CrMo)\\/"+de)],[ya]:[new RegExp("CriOS\\/"+de)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+de)],[nr]:[us],[ka]:[us],[vi]:[new RegExp("(Opera|OPR)\\/"+de)],[bt]:[new RegExp(bt+"\\/"+de)],[wa]:[new RegExp("FxiOS\\/"+de)],[Gs]:[new RegExp("Konqueror[:/]?"+de,"i")],[wt]:[new RegExp(wt+" "+de),us],[Ea]:[new RegExp("android\\s"+de,"i")],[_a]:[new RegExp(ma+"\\/"+de)],[gi]:[new RegExp("(rv:|MSIE )"+de)],Mozilla:[new RegExp("rv:"+de)]},Bc=function(s,e){var t=Ca(s,e),r=Dc[t];if(E(r))return null;for(var i=0;i<r.length;i++){var n=r[i],a=s.match(n);if(a)return parseFloat(a[a.length-2])}return null},Ji=[[new RegExp(xt+"; "+xt+" (.*?)[);]","i"),s=>[xt,s&&s[1]||""]],[new RegExp(ar,"i"),[ar,""]],[new RegExp(or,"i"),[or,""]],[_i,[wt,""]],[new RegExp(Vt,"i"),(s,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[qs,""];if(new RegExp(xe).test(e)&&!/IEMobile\b/.test(e))return[Vt+" "+xe,""];var t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){var r=t[1],i=Mc[r]||"";return/arm/i.test(e)&&(i="RT"),[Vt,i]}return[Vt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,s=>{if(s&&s[3]){var e=[s[3],s[4],s[5]||"0"];return[Tr,e.join(".")]}return[Tr,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,s=>{var e="";return s&&s.length>=3&&(e=E(s[2])?s[3]:s[2]),["watchOS",e]}],[new RegExp("("+De+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+De+")","i"),s=>{if(s&&s[2]){var e=[s[2],s[3],s[4]||"0"];return[De,e.join(".")]}return[De,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,s=>{var e=["Mac OS X",""];if(s&&s[1]){var t=[s[1],s[2],s[3]||"0"];e[1]=t.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Nc,""]],[/Linux|debian/i,["Linux",""]]],Zi=function(s){return Fc.test(s)?ar:Ac.test(s)?or:Tc.test(s)?xt:new RegExp(zs,"i").test(s)?zs:new RegExp("("+qs+"|WPDesktop)","i").test(s)?qs:/iPad/.test(s)?pa:/iPod/.test(s)?"iPod Touch":/iPhone/.test(s)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(s)?ga:_i.test(s)?wt:/(kobo)\s(ereader|touch)/i.test(s)?"Kobo":new RegExp(Yi,"i").test(s)?Yi:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(s)||/(kf[a-z]+)( bui|\)).+silk\//i.test(s)?"Kindle Fire":/(Android|ZTE)/i.test(s)?new RegExp(xe).test(s)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(s)||/pixel[\daxl ]{1,6}/i.test(s)&&!/pixel c/i.test(s)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(s)||/lmy47v/i.test(s)&&!/QTAQZ3/i.test(s)?De:ha:new RegExp("(pda|"+xe+")","i").test(s)?Oc:new RegExp(ir,"i").test(s)&&!new RegExp(ir+" pc","i").test(s)?ja:""},Hc=s=>s instanceof Error;function Uc(s){var e=globalThis._posthogChunkIds;if(e){var t=Object.keys(e);return ds&&t.length===Xi||(Xi=t.length,ds=t.reduce(((r,i)=>{kr||(kr={});var n=kr[i];if(n)r[n[0]]=n[1];else for(var a=s(i),o=a.length-1;o>=0;o--){var c=a[o],u=c?.filename,d=e[i];if(u&&d){r[u]=d,kr[i]=[u,d];break}}return r}),{})),ds}}class qc{constructor(e,t,r){r===void 0&&(r=[]),this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t){t===void 0&&(t={});var r=t&&t.mechanism||{handled:!0,type:"generic"},i=this.buildCoercingContext(r,t,0).apply(e),n=this.buildParsingContext(),a=this.parseStacktrace(i,n);return{$exception_list:this.convertToExceptionList(a,r),$exception_level:"error"}}modifyFrames(e){var t=this;return Vi((function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&B(r.stacktrace.frames)&&(r.stacktrace.frames=yield t.applyModifiers(r.stacktrace.frames));return e}))()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:(t=e.syntheticException)==null?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var r,i;return e.cause!=null&&(r=this.parseStacktrace(e.cause,t)),e.stack!=""&&e.stack!=null&&(i=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),C({},e,{cause:r,stack:i})}applyChunkIds(e,t){return e.map((r=>(r.filename&&t&&(r.chunk_id=t[r.filename]),r)))}applyCoercers(e,t){for(var r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return Vi((function*(){var r=e;for(var i of t.modifiers)r=yield i(r);return r}))()}convertToExceptionList(e,t){var r,i,n,a={type:e.type,value:e.value,mechanism:{type:(r=t.type)!==null&&r!==void 0?r:"generic",handled:(i=t.handled)===null||i===void 0||i,synthetic:(n=e.synthetic)!==null&&n!==void 0&&n}};e.stack&&(a.stacktrace={type:"raw",frames:e.stack});var o=[a];return e.cause!=null&&o.push(...this.convertToExceptionList(e.cause,C({},t,{handled:!0}))),o}buildParsingContext(){return{chunkIdMap:Uc(this.stackParser)}}buildCoercingContext(e,t,r){r===void 0&&(r=0);var i=(n,a)=>{if(a<=4){var o=this.buildCoercingContext(e,t,a);return this.applyCoercers(n,o)}};return C({},t,{syntheticException:r==0?t.syntheticException:void 0,mechanism:e,apply:n=>i(n,r),next:n=>i(n,r+1)})}}var Et="?";function Ws(s,e,t,r,i){var n={platform:s,filename:e,function:t==="<anonymous>"?Et:t,in_app:!0};return E(r)||(n.lineno=r),E(i)||(n.colno=i),n}var Pa=(s,e)=>{var t=s.indexOf("safari-extension")!==-1,r=s.indexOf("safari-web-extension")!==-1;return t||r?[s.indexOf("@")!==-1?s.split("@")[0]:Et,t?"safari-extension:"+e:"safari-web-extension:"+e]:[s,e]},zc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Gc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wc=/\((\S*)(?::(\d+))(?::(\d+))\)/,Vc=(s,e)=>{var t=zc.exec(s);if(t){var[,r,i,n]=t;return Ws(e,r,Et,+i,+n)}var a=Gc.exec(s);if(a){if(a[2]&&a[2].indexOf("eval")===0){var o=Wc.exec(a[2]);o&&(a[2]=o[1],a[3]=o[2],a[4]=o[3])}var[c,u]=Pa(a[1]||Et,a[2]);return Ws(e,u,c,a[3]?+a[3]:void 0,a[4]?+a[4]:void 0)}},Kc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xc=(s,e)=>{var t=Kc.exec(s);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var r=Yc.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}var i=t[3],n=t[1]||Et;return[n,i]=Pa(n,i),Ws(e,i,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Qi=/\(error: (.*)\)/,en=50;function Jc(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return function(i,n){n===void 0&&(n=0);for(var a=[],o=i.split(`
`),c=n;c<o.length;c++){var u=o[c];if(!(u.length>1024)){var d=Qi.test(u)?u.replace(Qi,"$1"):u;if(!d.match(/\S*Error: /)){for(var h of t){var v=h(d,s);if(v){a.push(v);break}}if(a.length>=en)break}}}return(function(f){if(!f.length)return[];var p=Array.from(f);return p.reverse(),p.slice(0,en).map((_=>{return C({},_,{filename:_.filename||(y=p,y[y.length-1]||{}).filename,function:_.function||Et});var y}))})(a)}}class Zc{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var r=J(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return Or(e,"DOMException")}isDOMError(e){return Or(e,"DOMError")}}class Qc{match(e){return(t=>t instanceof Error)(e)}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var r=e.message;return r.error&&typeof r.error.message=="string"?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class eu{constructor(){}match(e){return Or(e,"ErrorEvent")&&e.error!=null}coerce(e,t){var r,i=t.apply(e.error);return i||{type:"ErrorEvent",value:e.message,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}var tu=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class ru{match(e){return typeof e=="string"}coerce(e,t){var r,[i,n]=this.getInfos(e);return{type:i??"Error",value:n??e,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}getInfos(e){var t="Error",r=e,i=e.match(tu);return i&&(t=i[1],r=i[2]),[t,r]}}var su=["fatal","error","warning","log","info","debug"];function $a(s,e){e===void 0&&(e=40);var t=Object.keys(s);if(t.sort(),!t.length)return"[object has no keys]";for(var r=t.length;r>0;r--){var i=t.slice(0,r).join(", ");if(!(i.length>e))return r===t.length||i.length<=e?i:i.slice(0,e)+"..."}return""}class iu{match(e){return typeof e=="object"&&e!==null}coerce(e,t){var r,i=this.getErrorPropertyFromObject(e);return i?t.apply(i):{type:this.getType(e),value:this.getValue(e),stack:(r=t.syntheticException)==null?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return da(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&typeof e.name=="string"){var t="'"+e.name+"' captured as exception";return"message"in e&&typeof e.message=="string"&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&typeof e.message=="string")return e.message;var r=this.getObjectClassName(e);return(r&&r!=="Object"?"'"+r+"'":"Object")+" captured as exception with keys: "+$a(e)}isSeverityLevel(e){return J(e)&&!Hs(e)&&su.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(Hc(r))return r}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{return}}}class nu{match(e){return da(e)}coerce(e,t){var r,i=e.constructor.name;return{type:i,value:i+" captured as exception with keys: "+$a(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class au{match(e){return Us(e)}coerce(e,t){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class ou{match(e){return Or(e,"PromiseRejectionEvent")}coerce(e,t){var r,i=this.getUnhandledRejectionReason(e);return Us(i)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(i),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}:t.apply(i)}getUnhandledRejectionReason(e){if(Us(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}var Ra=function(s,e){var{debugEnabled:t}=e===void 0?{}:e,r={k:function(i){if(m&&(Te.DEBUG||N.POSTHOG_DEBUG||t)&&!E(m.console)&&m.console){for(var n=("__rrweb_original__"in m.console[i])?m.console[i].__rrweb_original__:m.console[i],a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];n(s,...o)}},info:function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];r.k("log",...n)},warn:function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];r.k("warn",...n)},error:function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];r.k("error",...n)},critical:function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];console.error(s,...n)},uninitializedWarning:i=>{r.error("You must initialize PostHog before calling "+i)},createLogger:(i,n)=>Ra(s+" "+i,n)};return r},k=Ra("[PostHog.js]"),Y=k.createLogger,lu=Y("[ExternalScriptsLoader]"),tn=(s,e,t)=>{if(s.config.disable_external_dependency_loading)return lu.warn(e+" was requested but loading of external scripts is disabled."),t("Loading of external scripts is disabled");var r=S?.querySelectorAll("script");if(r){for(var i,n=function(){if(r[a].src===e){var c=r[a];return c.__posthog_loading_callback_fired?{v:t()}:(c.addEventListener("load",(u=>{c.__posthog_loading_callback_fired=!0,t(void 0,u)})),c.onerror=u=>t(u),{v:void 0})}},a=0;a<r.length;a++)if(i=n())return i.v}var o=()=>{if(!S)return t("document not found");var c=S.createElement("script");if(c.type="text/javascript",c.crossOrigin="anonymous",c.src=e,c.onload=h=>{c.__posthog_loading_callback_fired=!0,t(void 0,h)},c.onerror=h=>t(h),s.config.prepare_external_dependency_script&&(c=s.config.prepare_external_dependency_script(c)),!c)return t("prepare_external_dependency_script returned null");var u,d=S.querySelectorAll("body > script");d.length>0?(u=d[0].parentNode)==null||u.insertBefore(c,d[0]):S.body.appendChild(c)};S!=null&&S.body?o():S?.addEventListener("DOMContentLoaded",o)};N.__PosthogExtensions__=N.__PosthogExtensions__||{},N.__PosthogExtensions__.loadExternalDependency=(s,e,t)=>{var r="/static/"+e+".js?v="+s.version;if(e==="remote-config"&&(r="/array/"+s.config.token+"/config.js"),e==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var n=s.requestRouter.endpointFor("assets",r);tn(s,n,t)},N.__PosthogExtensions__.loadSiteApp=(s,e,t)=>{var r=s.requestRouter.endpointFor("api",e);tn(s,r,t)};var Ar={};function Ye(s,e,t){if(B(s)){if(qi&&s.forEach===qi)s.forEach(e,t);else if("length"in s&&s.length===+s.length){for(var r=0,i=s.length;r<i;r++)if(r in s&&e.call(t,s[r],r)===Ar)return}}}function U(s,e,t){if(!D(s)){if(B(s))return Ye(s,e,t);if(jc(s)){for(var r of s.entries())if(e.call(t,r[1],r[0])===Ar)return}else for(var i in s)if(ua.call(s,i)&&e.call(t,s[i],i)===Ar)return}}var K=function(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Ye(t,(function(i){for(var n in i)i[n]!==void 0&&(s[n]=i[n])})),s},St=function(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Ye(t,(function(i){Ye(i,(function(n){s.push(n)}))})),s};function $r(s){for(var e=Object.keys(s),t=e.length,r=new Array(t);t--;)r[t]=[e[t],s[e[t]]];return r}var rn=function(s){try{return s()}catch{return}},cu=function(s){return function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.apply(this,t)}catch(i){k.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),k.critical(i)}}},yi=function(s){var e={};return U(s,(function(t,r){(J(t)&&t.length>0||Ne(t))&&(e[r]=t)})),e};function uu(s,e){return t=s,r=n=>J(n)&&!je(e)?n.slice(0,e):n,i=new Set,(function n(a,o){return a!==Object(a)?r?r(a,o):a:i.has(a)?void 0:(i.add(a),B(a)?(c=[],Ye(a,(u=>{c.push(n(u))}))):(c={},U(a,((u,d)=>{i.has(u)||(c[d]=n(u,d))}))),c);var c})(t);var t,r,i}var du=["herokuapp.com","vercel.app","netlify.app"];function hu(s){var e=s?.hostname;if(!J(e))return!1;var t=e.split(".").slice(-2).join(".");for(var r of du)if(t===r)return!1;return!0}function Na(s,e){for(var t=0;t<s.length;t++)if(e(s[t]))return s[t]}function X(s,e,t,r){var{capture:i=!1,passive:n=!0}=r??{};s?.addEventListener(e,t,{capture:i,passive:n})}var Ia="$people_distinct_id",Kt="__alias",Yt="__timers",sn="$autocapture_disabled_server_side",Vs="$heatmaps_enabled_server_side",nn="$exception_capture_enabled_server_side",Ks="$error_tracking_suppression_rules",an="$error_tracking_capture_extension_exceptions",on="$web_vitals_enabled_server_side",Oa="$dead_clicks_enabled_server_side",ln="$product_tours_enabled_server_side",cn="$web_vitals_allowed_metrics",hs="$session_recording_remote_config",Fr="$sesid",Ta="$session_is_sampled",yt="$enabled_feature_flags",Xt="$early_access_features",Ys="$feature_flag_details",Jt="$stored_person_properties",st="$stored_group_properties",Xs="$surveys",Mr="$flag_call_reported",Ae="$user_state",Js="$client_session_props",Zs="$capture_rate_limit",Qs="$initial_campaign_params",ei="$initial_referrer_info",Lr="$initial_person_info",Dr="$epp",Aa="__POSTHOG_TOOLBAR__",Tt="$posthog_cookieless",pu=[Ia,Kt,"__cmpns",Yt,"$session_recording_enabled_server_side",Vs,Fr,yt,Ks,Ae,Xt,Ys,st,Jt,Xs,Mr,Js,Zs,Qs,ei,Dr,Lr,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function un(s){return s instanceof Element&&(s.id===Aa||!(s.closest==null||!s.closest(".toolbar-global-fade-container")))}function Jr(s){return!!s&&s.nodeType===1}function Xe(s,e){return!!s&&!!s.tagName&&s.tagName.toLowerCase()===e.toLowerCase()}function Fa(s){return!!s&&s.nodeType===3}function Ma(s){return!!s&&s.nodeType===11}function bi(s){return s?Yr(s).split(/\s+/):[]}function dn(s){var e=m?.location.href;return!!(e&&s&&s.some((t=>e.match(t))))}function Br(s){var e="";switch(typeof s.className){case"string":e=s.className;break;case"object":e=(s.className&&"baseVal"in s.className?s.className.baseVal:null)||s.getAttribute("class")||"";break;default:e=""}return bi(e)}function La(s){return D(s)?null:Yr(s).split(/(\s+)/).filter((e=>lr(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function ur(s){var e="";return ti(s)&&!qa(s)&&s.childNodes&&s.childNodes.length&&U(s.childNodes,(function(t){var r;Fa(t)&&t.textContent&&(e+=(r=La(t.textContent))!==null&&r!==void 0?r:"")})),Yr(e)}function Da(s){return E(s.target)?s.srcElement||null:(e=s.target)!=null&&e.shadowRoot?s.composedPath()[0]||null:s.target||null;var e}var xi=["a","button","form","input","select","textarea","label"];function Ba(s,e){if(E(e))return!0;var t,r=function(n){if(e.some((a=>n.matches(a))))return{v:!0}};for(var i of s)if(t=r(i))return t.v;return!1}function Ha(s){var e=s.parentNode;return!(!e||!Jr(e))&&e}var fu=["next","previous","prev",">","<"],hn=10,pn=[".ph-no-rageclick",".ph-no-capture"];function gu(s,e){if(!m||wi(s))return!1;var t,r,i;if(Ue(e)?(t=!!e&&pn,r=void 0):(t=(i=e?.css_selector_ignorelist)!==null&&i!==void 0?i:pn,r=e?.content_ignorelist),t===!1)return!1;var{targetElementList:n}=Ua(s,!1);return!(function(a,o){if(a===!1||E(a))return!1;var c;if(a===!0)c=fu;else{if(!B(a))return!1;if(a.length>hn)return k.error("[PostHog] content_ignorelist array cannot exceed "+hn+" items. Use css_selector_ignorelist for more complex matching."),!1;c=a.map((u=>u.toLowerCase()))}return o.some((u=>{var{safeText:d,ariaLabel:h}=u;return c.some((v=>d.includes(v)||h.includes(v)))}))})(r,n.map((a=>{var o;return{safeText:ur(a).toLowerCase(),ariaLabel:((o=a.getAttribute("aria-label"))==null?void 0:o.toLowerCase().trim())||""}})))&&!Ba(n,t)}var wi=s=>!s||Xe(s,"html")||!Jr(s),Ua=(s,e)=>{if(!m||wi(s))return{parentIsUsefulElement:!1,targetElementList:[]};for(var t=!1,r=[s],i=s;i.parentNode&&!Xe(i,"body");)if(Ma(i.parentNode))r.push(i.parentNode.host),i=i.parentNode.host;else{var n=Ha(i);if(!n)break;if(e||xi.indexOf(n.tagName.toLowerCase())>-1)t=!0;else{var a=m.getComputedStyle(n);a&&a.getPropertyValue("cursor")==="pointer"&&(t=!0)}r.push(n),i=n}return{parentIsUsefulElement:t,targetElementList:r}};function vu(s,e,t,r,i){var n,a,o,c;if(t===void 0&&(t=void 0),!m||wi(s)||(n=t)!=null&&n.url_allowlist&&!dn(t.url_allowlist)||(a=t)!=null&&a.url_ignorelist&&dn(t.url_ignorelist))return!1;if((o=t)!=null&&o.dom_event_allowlist){var u=t.dom_event_allowlist;if(u&&!u.some((p=>e.type===p)))return!1}var{parentIsUsefulElement:d,targetElementList:h}=Ua(s,r);if(!(function(p,_){var y=_?.element_allowlist;if(E(y))return!0;var w,j=function(P){if(y.some((M=>P.tagName.toLowerCase()===M)))return{v:!0}};for(var x of p)if(w=j(x))return w.v;return!1})(h,t)||!Ba(h,(c=t)==null?void 0:c.css_selector_allowlist))return!1;var v=m.getComputedStyle(s);if(v&&v.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var f=s.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return d?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(xi.indexOf(f)>-1||s.getAttribute("contenteditable")==="true")}}function ti(s){for(var e=s;e.parentNode&&!Xe(e,"body");e=e.parentNode){var t=Br(e);if(F(t,"ph-sensitive")||F(t,"ph-no-capture"))return!1}if(F(Br(s),"ph-include"))return!0;var r=s.type||"";if(J(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=s.name||s.id||"";return!(J(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function qa(s){return!!(Xe(s,"input")&&!["button","checkbox","submit","reset"].includes(s.type)||Xe(s,"select")||Xe(s,"textarea")||s.getAttribute("contenteditable")==="true")}var za="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",mu=new RegExp("^(?:"+za+")$"),_u=new RegExp(za),Ga="\\d{3}-?\\d{2}-?\\d{4}",yu=new RegExp("^("+Ga+")$"),bu=new RegExp("("+Ga+")");function lr(s,e){return e===void 0&&(e=!0),!(D(s)||J(s)&&(s=Yr(s),(e?mu:_u).test((s||"").replace(/[- ]/g,""))||(e?yu:bu).test(s)))}function Wa(s){var e=ur(s);return lr(e=(e+" "+Va(s)).trim())?e:""}function Va(s){var e="";return s&&s.childNodes&&s.childNodes.length&&U(s.childNodes,(function(t){var r;if(t&&((r=t.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=ur(t);e=(e+" "+i).trim(),t.childNodes&&t.childNodes.length&&(e=(e+" "+Va(t)).trim())}catch(n){k.error("[AutoCapture]",n)}})),e}function xu(s){return(function(e){var t=e.map((r=>{var i,n,a="";if(r.tag_name&&(a+=r.tag_name),r.attr_class)for(var o of(r.attr_class.sort(),r.attr_class))a+="."+o.replace(/"/g,"");var c=C({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(n=r.nth_of_type)!==null&&n!==void 0?n:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return $r(c).sort(((d,h)=>{var[v]=d,[f]=h;return v.localeCompare(f)})).forEach((d=>{var[h,v]=d;return u[fn(h.toString())]=fn(v.toString())})),a+=":",a+=$r(u).map((d=>{var[h,v]=d;return h+'="'+v+'"'})).join("")}));return t.join(";")})((function(e){return e.map((t=>{var r,i,n={text:(r=t.$el_text)==null?void 0:r.slice(0,400),tag_name:t.tag_name,href:(i=t.attr__href)==null?void 0:i.slice(0,2048),attr_class:wu(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return $r(t).filter((a=>{var[o]=a;return o.indexOf("attr__")===0})).forEach((a=>{var[o,c]=a;return n.attributes[o]=c})),n}))})(s))}function fn(s){return s.replace(/"|\\"/g,'\\"')}function wu(s){var e=s.attr__class;return e?B(e)?e:bi(e):void 0}class Ka{constructor(e){this.disabled=e===!1;var t=Q(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,r){if(this.disabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(t-i.y)<this.thresholdPx&&r-i.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:r}];return!1}}var ps="$copy_autocapture",Le=(function(s){return s.GZipJS="gzip-js",s.Base64="base64",s})({}),Hr=s=>{var e=S?.createElement("a");return E(e)?null:(e.href=s,e)},Eu=function(s,e){var t,r;e===void 0&&(e="&");var i=[];return U(s,(function(n,a){E(n)||E(a)||a==="undefined"||(t=encodeURIComponent((o=>o instanceof File)(n)?n.name:n.toString()),r=encodeURIComponent(a),i[i.length]=r+"="+t)})),i.join(e)},Ur=function(s,e){for(var t,r=((s.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var n=r[i].split("=");if(n[0]===e){t=n;break}}if(!B(t)||t.length<2)return"";var a=t[1];try{a=decodeURIComponent(a)}catch{k.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},dr=function(s,e,t){if(!s||!e||!e.length)return s;for(var r=s.split("#"),i=r[0]||"",n=r[1],a=i.split("?"),o=a[1],c=a[0],u=(o||"").split("&"),d=[],h=0;h<u.length;h++){var v=u[h].split("=");B(v)&&(e.includes(v[0])?d.push(v[0]+"="+t):d.push(u[h]))}var f=c;return o!=null&&(f+="?"+d.join("&")),n!=null&&(f+="#"+n),f},qr=function(s,e){var t=s.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},gn=Y("[AutoCapture]");function fs(s,e){return e.length>s?e.slice(0,s)+"...":e}function ku(s){if(s.previousElementSibling)return s.previousElementSibling;var e=s;do e=e.previousSibling;while(e&&!Jr(e));return e}function Su(s,e,t,r){var i=s.tagName.toLowerCase(),n={tag_name:i};xi.indexOf(i)>-1&&!t&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?n.$el_text=fs(1024,Wa(s)):n.$el_text=fs(1024,ur(s)));var a=Br(s);a.length>0&&(n.classes=a.filter((function(d){return d!==""}))),U(s.attributes,(function(d){var h;if((!qa(s)||["name","id","class","aria-label"].indexOf(d.name)!==-1)&&(r==null||!r.includes(d.name))&&!e&&lr(d.value)&&(h=d.name,!J(h)||h.substring(0,10)!=="_ngcontent"&&h.substring(0,7)!=="_nghost")){var v=d.value;d.name==="class"&&(v=bi(v).join(" ")),n["attr__"+d.name]=fs(1024,v)}}));for(var o=1,c=1,u=s;u=ku(u);)o++,u.tagName===s.tagName&&c++;return n.nth_child=o,n.nth_of_type=c,n}function ju(s,e){for(var t,r,{e:i,maskAllElementAttributes:n,maskAllText:a,elementAttributeIgnoreList:o,elementsChainAsString:c}=e,u=[s],d=s;d.parentNode&&!Xe(d,"body");)Ma(d.parentNode)?(u.push(d.parentNode.host),d=d.parentNode.host):(u.push(d.parentNode),d=d.parentNode);var h,v=[],f={},p=!1,_=!1;if(U(u,(P=>{var M=ti(P);P.tagName.toLowerCase()==="a"&&(p=P.getAttribute("href"),p=M&&p&&lr(p)&&p),F(Br(P),"ph-no-capture")&&(_=!0),v.push(Su(P,n,a,o));var O=(function(A){if(!ti(A))return{};var T={};return U(A.attributes,(function(le){if(le.name&&le.name.indexOf("data-ph-capture-attribute")===0){var ee=le.name.replace("data-ph-capture-attribute-",""),ce=le.value;ee&&ce&&lr(ce)&&(T[ee]=ce)}})),T})(P);K(f,O)})),_)return{props:{},explicitNoCapture:_};if(a||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?v[0].$el_text=Wa(s):v[0].$el_text=ur(s)),p){var y,w;v[0].attr__href=p;var j=(y=Hr(p))==null?void 0:y.host,x=m==null||(w=m.location)==null?void 0:w.host;j&&x&&j!==x&&(h=p)}return{props:K({$event_type:i.type,$ce_version:1},c?{}:{$elements:v},{$elements_chain:xu(v)},(t=v[0])!=null&&t.$el_text?{$el_text:(r=v[0])==null?void 0:r.$el_text}:{},h&&i.type==="click"?{$external_click_url:h}:{},f)}}class Cu{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new Ka(e.config.rageclick),this.C=null}get R(){var e,t,r=Q(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map((i=>new RegExp(i))),r.url_ignorelist=(t=r.url_ignorelist)==null?void 0:t.map((i=>new RegExp(i))),r}F(){if(this.isBrowserSupported()){if(m&&S){var e=r=>{r=r||m?.event;try{this.M(r)}catch(i){gn.error("Failed to capture event",i)}};if(X(S,"submit",e,{capture:!0}),X(S,"change",e,{capture:!0}),X(S,"click",e,{capture:!0}),this.R.capture_copied_text){var t=r=>{r=r||m?.event,this.M(r,ps)};X(S,"copy",t,{capture:!0}),X(S,"cut",t,{capture:!0})}}}else gn.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[sn]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var t,r=[];return(t=this.C)==null||t.forEach((i=>{var n=S?.querySelectorAll(i);n?.forEach((a=>{e===a&&r.push(i)}))})),r}get isEnabled(){var e,t,r=(e=this.instance.persistence)==null?void 0:e.props[sn],i=this.T;if(je(i)&&!Ue(r)&&!this.instance.O())return!1;var n=(t=this.T)!==null&&t!==void 0?t:!!r;return!!this.instance.config.autocapture&&!n}M(e,t){if(t===void 0&&(t="$autocapture"),this.isEnabled){var r,i=Da(e);Fa(i)&&(i=i.parentNode||null),t==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||new Date().getTime())&&gu(i,this.instance.config.rageclick)&&this.M(e,"$rageclick");var n=t===ps;if(i&&vu(i,e,this.R,n,n?["copy","cut"]:void 0)){var{props:a,explicitNoCapture:o}=ju(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(o)return!1;var c=this.getElementSelectors(i);if(c&&c.length>0&&(a.$element_selectors=c),t===ps){var u,d=La(m==null||(u=m.getSelection())==null?void 0:u.toString()),h=e.type||"clipboard";if(!d)return!1;a.$selected_content=d,a.$copy_type=h}return this.instance.capture(t,a),!0}}}isBrowserSupported(){return Ke(S?.querySelectorAll)}}Math.trunc||(Math.trunc=function(s){return s<0?Math.ceil(s):Math.floor(s)}),Number.isInteger||(Number.isInteger=function(s){return Ne(s)&&isFinite(s)&&Math.floor(s)===s});var vn="0123456789abcdef";class zr{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,i){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||t<0||r<0||i<0||e>0xffffffffffff||t>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var n=new Uint8Array(16);return n[0]=e/Math.pow(2,40),n[1]=e/Math.pow(2,32),n[2]=e/Math.pow(2,24),n[3]=e/Math.pow(2,16),n[4]=e/Math.pow(2,8),n[5]=e,n[6]=112|t>>>8,n[7]=t,n[8]=128|r>>>24,n[9]=r>>>16,n[10]=r>>>8,n[11]=r,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i,new zr(n)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+vn.charAt(this.bytes[t]>>>4)+vn.charAt(15&this.bytes[t]),t!==3&&t!==5&&t!==7&&t!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new zr(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var t=0;t<16;t++){var r=this.bytes[t]-e.bytes[t];if(r!==0)return Math.sign(r)}return 0}}class Pu{constructor(){this.A=0,this.D=0,this.j=new $u}generate(){var e=this.generateOrAbort();if(E(e)){this.A=0;var t=this.generateOrAbort();if(E(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return zr.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var mn,Ya=s=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<s.length;e++)s[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return s};m&&!E(m.crypto)&&crypto.getRandomValues&&(Ya=s=>crypto.getRandomValues(s));class $u{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(Ya(this.N),this.U=0),this.N[this.U++]}}var Ve=()=>Ru().toString(),Ru=()=>(mn||(mn=new Pu)).generate(),At="",Nu=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Iu(s,e){if(e){var t=(function(i,n){if(n===void 0&&(n=S),At)return At;if(!n||["localhost","127.0.0.1"].includes(i))return"";for(var a=i.split("."),o=Math.min(a.length,8),c="dmn_chk_"+Ve();!At&&o--;){var u=a.slice(o).join("."),d=c+"=1;domain=."+u+";path=/";n.cookie=d+";max-age=3",n.cookie.includes(c)&&(n.cookie=d+";max-age=0",At=u)}return At})(s);if(!t){var r=(i=>{var n=i.match(Nu);return n?n[0]:""})(s);r!==t&&k.info("Warning: cookie subdomain discovery mismatch",r,t),t=r}return t?"; domain=."+t:""}return""}var $e={H:()=>!!S,B:function(s){k.error("cookieStore error: "+s)},q:function(s){if(S){try{for(var e=s+"=",t=S.cookie.split(";").filter((n=>n.length)),r=0;r<t.length;r++){for(var i=t[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},W:function(s){var e;try{e=JSON.parse($e.q(s))||{}}catch{}return e},G:function(s,e,t,r,i){if(S)try{var n="",a="",o=Iu(S.location.hostname,r);if(t){var c=new Date;c.setTime(c.getTime()+24*t*60*60*1e3),n="; expires="+c.toUTCString()}i&&(a="; secure");var u=s+"="+encodeURIComponent(JSON.stringify(e))+n+"; SameSite=Lax; path=/"+o+a;return u.length>3686.4&&k.warn("cookieStore warning: large cookie, len="+u.length),S.cookie=u,u}catch{return}},V:function(s,e){if(S!=null&&S.cookie)try{$e.G(s,"",-1,e)}catch{return}}},gs=null,G={H:function(){if(!je(gs))return gs;var s=!0;if(E(m))s=!1;else try{var e="__mplssupport__";G.G(e,"xyz"),G.q(e)!=='"xyz"'&&(s=!1),G.V(e)}catch{s=!1}return s||k.error("localStorage unsupported; falling back to cookie store"),gs=s,s},B:function(s){k.error("localStorage error: "+s)},q:function(s){try{return m?.localStorage.getItem(s)}catch(e){G.B(e)}return null},W:function(s){try{return JSON.parse(G.q(s))||{}}catch{}return null},G:function(s,e){try{m?.localStorage.setItem(s,JSON.stringify(e))}catch(t){G.B(t)}},V:function(s){try{m?.localStorage.removeItem(s)}catch(e){G.B(e)}}},Ou=["$device_id","distinct_id",Fr,Ta,Dr,Lr],Sr={},Tu={H:function(){return!0},B:function(s){k.error("memoryStorage error: "+s)},q:function(s){return Sr[s]||null},W:function(s){return Sr[s]||null},G:function(s,e){Sr[s]=e},V:function(s){delete Sr[s]}},et=null,se={H:function(){if(!je(et))return et;if(et=!0,E(m))et=!1;else try{var s="__support__";se.G(s,"xyz"),se.q(s)!=='"xyz"'&&(et=!1),se.V(s)}catch{et=!1}return et},B:function(s){k.error("sessionStorage error: ",s)},q:function(s){try{return m?.sessionStorage.getItem(s)}catch(e){se.B(e)}return null},W:function(s){try{return JSON.parse(se.q(s))||null}catch{}return null},G:function(s,e){try{m?.sessionStorage.setItem(s,JSON.stringify(e))}catch(t){se.B(t)}},V:function(s){try{m?.sessionStorage.removeItem(s)}catch(e){se.B(e)}}},Fe=(function(s){return s[s.PENDING=-1]="PENDING",s[s.DENIED=0]="DENIED",s[s.GRANTED=1]="GRANTED",s})({});class Au{constructor(e){this._instance=e}get R(){return this._instance.config}get consent(){return this.J()?Fe.DENIED:this.K}isOptedOut(){return this.R.cookieless_mode==="always"||this.consent===Fe.DENIED||this.consent===Fe.PENDING&&(this.R.opt_out_capturing_by_default||this.R.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Fe.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:r}=this._instance.config;return r||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return cs(e)?Fe.GRANTED:F($c,e)?Fe.DENIED:Fe.PENDING}get Y(){if(!this.Z){var e=this.R.opt_out_capturing_persistence_type;this.Z=e==="localStorage"?G:$e;var t=e==="localStorage"?$e:G;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(cs(t.q(this.X))),t.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!Na([_e?.doNotTrack,_e?.msDoNotTrack,N.doNotTrack],(e=>cs(e)))}}var jr=Y("[Dead Clicks]"),Fu=()=>!0,Mu=s=>{var e,t=!((e=s.instance.persistence)==null||!e.get_property(Oa)),r=s.instance.config.capture_dead_clicks;return Ue(r)?r:!!Q(r)||t};class Xa{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,r){this.instance=e,this.isEnabled=t,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Oa]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it((()=>{this.et()}))}it(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture&&e(),(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",(i=>{i?jr.error("failed to load script",i):e()}))}et(){var e;if(S){if(!this.tt&&(e=N.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var t=Q(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=N.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(S),jr.info("starting...")}}else jr.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,jr.info("stopping..."))}}var Ft=Y("[ExceptionAutocapture]");class Lu{constructor(e){var t,r,i;this.rt=()=>{var n;if(m&&this.isEnabled&&(n=N.__PosthogExtensions__)!=null&&n.errorWrappingFunctions){var a=N.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=N.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,c=N.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=a(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=o(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=c(this.captureException.bind(this)))}catch(u){Ft.error("failed to start",u),this.ut()}}},this._instance=e,this.ht=!((t=this._instance.persistence)==null||!t.props[nn]),this.dt=new Rc({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(i=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&i!==void 0?i:10,refillInterval:1e4,h:Ft}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Q(e)?t=C({},t,e):(E(e)?this.ht:e)&&(t=C({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(Ft.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.errorWrappingFunctions&&e(),(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",(i=>{if(i)return Ft.error("failed to load script",i);e()}))}ut(){var e,t,r;(e=this.st)==null||e.call(this),this.st=void 0,(t=this.nt)==null||t.call(this),this.nt=void 0,(r=this.ot)==null||r.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ht=!!t||!1,this._instance.persistence&&this._instance.persistence.register({[nn]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(e){var t,r,i=(t=e==null||(r=e.$exception_list)==null||(r=r[0])==null?void 0:r.type)!==null&&t!==void 0?t:"Exception";this.dt.consumeRateLimit(i)?Ft.info("Skipping exception capture because of client rate limiting.",{exception:i}):this._instance.exceptions.sendExceptionEvent(e)}}function _n(s,e,t){try{if(!(e in s))return()=>{};var r=s[e],i=t(r);return Ke(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),s[e]=i,()=>{s[e]=r}}catch{return()=>{}}}class Du{constructor(e){var t;this._instance=e,this.ct=(m==null||(t=m.location)==null?void 0:t.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(k.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,k.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(m&&m.history){var r=this;(e=m.history.pushState)!=null&&e.__posthog_wrapped__||_n(m.history,"pushState",(i=>function(n,a,o){i.call(this,n,a,o),r._t("pushState")})),(t=m.history.replaceState)!=null&&t.__posthog_wrapped__||_n(m.history,"replaceState",(i=>function(n,a,o){i.call(this,n,a,o),r._t("replaceState")})),this.yt()}}_t(e){try{var t,r=m==null||(t=m.location)==null?void 0:t.pathname;if(!r)return;r!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ct=r}catch(i){k.error("Error capturing "+e+" pageview",i)}}yt(){if(!this.ft){var e=()=>{this._t("popstate")};X(m,"popstate",e),this.ft=()=>{m&&m.removeEventListener("popstate",e)}}}}var vs=Y("[SegmentIntegration]");function Bu(s,e){var t=s.config.segment;if(!t)return e();(function(r,i){var n=r.config.segment;if(!n)return i();var a=c=>{var u=()=>c.anonymousId()||Ve();r.config.get_device_id=u,c.id()&&(r.register({distinct_id:c.id(),$device_id:u()}),r.persistence.set_property(Ae,"identified")),i()},o=n.user();"then"in o&&Ke(o.then)?o.then((c=>a(c))):a(o)})(s,(()=>{t.register((r=>{Promise&&Promise.resolve||vs.warn("This browser does not have Promise support, and can not use the segment integration");var i=(n,a)=>{if(!a)return n;n.event.userId||n.event.anonymousId===r.get_distinct_id()||(vs.info("No userId set, resetting PostHog"),r.reset()),n.event.userId&&n.event.userId!==r.get_distinct_id()&&(vs.info("UserId set, identifying with PostHog"),r.identify(n.event.userId));var o=r.calculateEventProperties(a,n.event.properties);return n.event.properties=Object.assign({},o,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:n=>i(n,n.event.event),page:n=>i(n,"$pageview"),identify:n=>i(n,"$identify"),screen:n=>i(n,"$screen")}})(s)).then((()=>{e()}))}))}var Ja="posthog-js";function Za(s,e){var{organization:t,projectId:r,prefix:i,severityAllowList:n=["error"],sendExceptionsToPostHog:a=!0}=e===void 0?{}:e;return o=>{var c,u,d,h,v;if(!(n==="*"||n.includes(o.level))||!s.__loaded)return o;o.tags||(o.tags={});var f=s.requestRouter.endpointFor("ui","/project/"+s.config.token+"/person/"+s.get_distinct_id());o.tags["PostHog Person URL"]=f,s.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=s.get_session_replay_url({withTimestamp:!0}));var p=((c=o.exception)==null?void 0:c.values)||[],_=p.map((w=>C({},w,{stacktrace:w.stacktrace?C({},w.stacktrace,{type:"raw",frames:(w.stacktrace.frames||[]).map((j=>C({},j,{platform:"web:javascript"})))}):void 0}))),y={$exception_message:((u=p[0])==null?void 0:u.value)||o.message,$exception_type:(d=p[0])==null?void 0:d.type,$exception_level:o.level,$exception_list:_,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((h=p[0])==null?void 0:h.value)||o.message,$sentry_exception_type:(v=p[0])==null?void 0:v.type,$sentry_tags:o.tags};return t&&r&&(y.$sentry_url=(i||"https://sentry.io/organizations/")+t+"/issues/?project="+r+"&query="+o.event_id),a&&s.exceptions.sendExceptionEvent(y),o}}class Hu{constructor(e,t,r,i,n,a){this.name=Ja,this.setupOnce=function(o){o(Za(e,{organization:t,projectId:r,prefix:i,severityAllowList:n,sendExceptionsToPostHog:a==null||a}))}}}var Uu=m!=null&&m.location?qr(m.location.hash,"__posthog")||qr(location.hash,"state"):null,yn="_postHogToolbarParams",bn=Y("[Toolbar]"),We=(function(s){return s[s.UNINITIALIZED=0]="UNINITIALIZED",s[s.LOADING=1]="LOADING",s[s.LOADED=2]="LOADED",s})(We||{});class qu{constructor(e){this.instance=e}bt(e){N.ph_toolbar_state=e}wt(){var e;return(e=N.ph_toolbar_state)!==null&&e!==void 0?e:We.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),!m||!S)return!1;e=e??m.location,r=r??m.history;try{if(!t){try{m.localStorage.setItem("test","test"),m.localStorage.removeItem("test")}catch{return!1}t=m?.localStorage}var i,n=Uu||qr(e.hash,"__posthog")||qr(e.hash,"state"),a=n?rn((()=>JSON.parse(atob(decodeURIComponent(n)))))||rn((()=>JSON.parse(decodeURIComponent(n)))):null;return a&&a.action==="ph_authorize"?((i=a).source="url",i&&Object.keys(i).length>0&&(a.desiredHash?e.hash=a.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(t.getItem(yn)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token)&&(this.loadToolbar(i),!0)}catch{return!1}}xt(e){var t=N.ph_load_toolbar||N.ph_load_editor;!D(t)&&Ke(t)?t(e,this.instance):bn.warn("No toolbar load function found")}loadToolbar(e){var t=!(S==null||!S.getElementById(Aa));if(!m||t)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=C({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(m.localStorage.setItem(yn,JSON.stringify(C({},i,{source:void 0}))),this.wt()===We.LOADED)this.xt(i);else if(this.wt()===We.UNINITIALIZED){var n;this.bt(We.LOADING),(n=N.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this.instance,"toolbar",(a=>{if(a)return bn.error("[Toolbar] Failed to load",a),void this.bt(We.UNINITIALIZED);this.bt(We.LOADED),this.xt(i)})),X(m,"turbolinks:load",(()=>{this.bt(We.UNINITIALIZED),this.loadToolbar(i)}))}return!0}Et(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,r){return e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,t,r)}}var zu=Y("[TracingHeaders]");class Gu{constructor(e){this.$t=void 0,this.St=void 0,this.rt=()=>{var t,r;E(this.$t)&&((t=N.__PosthogExtensions__)==null||(t=t.tracingHeadersPatchFns)==null||t._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),E(this.St)&&((r=N.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.tracingHeadersPatchFns&&e(),(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",(i=>{if(i)return zu.error("failed to load script",i);e()}))}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):((e=this.$t)==null||e.call(this),(t=this.St)==null||t.call(this),this.$t=void 0,this.St=void 0)}}var Cr="https?://(.*)",jt=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Wu=St(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],jt),hr="<masked>",Vu=["li_fat_id"];function Qa(s,e,t){if(!S)return{};var r,i=e?St([],jt,t||[]):[],n=eo(dr(S.URL,i,hr),s),a=(r={},U(Vu,(function(o){var c=$e.q(o);r[o]=c||null})),r);return K(a,n)}function eo(s,e){var t=Wu.concat(e||[]),r={};return U(t,(function(i){var n=Ur(s,i);r[i]=n||null})),r}function to(s){var e=(function(n){return n?n.search(Cr+"google.([^/?]*)")===0?"google":n.search(Cr+"bing.com")===0?"bing":n.search(Cr+"yahoo.com")===0?"yahoo":n.search(Cr+"duckduckgo.com")===0?"duckduckgo":null:null})(s),t=e!="yahoo"?"q":"p",r={};if(!je(e)){r.$search_engine=e;var i=S?Ur(S.referrer,t):"";i.length&&(r.ph_keyword=i)}return r}function xn(){return navigator.language||navigator.userLanguage}function ro(){return S?.referrer||"$direct"}function so(s,e){var t=s?St([],jt,e||[]):[],r=pe?.href.substring(0,1e3);return{r:ro().substring(0,1e3),u:r?dr(r,t,hr):void 0}}function io(s){var e,{r:t,u:r}=s,i={$referrer:t,$referring_domain:t==null?void 0:t=="$direct"?"$direct":(e=Hr(t))==null?void 0:e.host};if(r){i.$current_url=r;var n=Hr(r);i.$host=n?.host,i.$pathname=n?.pathname;var a=eo(r);K(i,a)}if(t){var o=to(t);K(i,o)}return i}function no(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Ku(){try{return new Date().getTimezoneOffset()}catch{return}}function Yu(s,e){if(!he)return{};var t,r,i,n=s?St([],jt,e||[]):[],[a,o]=(function(c){for(var u=0;u<Ji.length;u++){var[d,h]=Ji[u],v=d.exec(c),f=v&&(Ke(h)?h(v,c):h);if(f)return f}return["",""]})(he);return K(yi({$os:a,$os_version:o,$browser:Ca(he,navigator.vendor),$device:Zi(he),$device_type:(r=he,i=Zi(r),i===pa||i===ha||i==="Kobo"||i==="Kindle Fire"||i===ja?ir:i===ar||i===xt||i===or||i===zs?"Console":i===ga?"Wearable":i?xe:"Desktop"),$timezone:no(),$timezone_offset:Ku()}),{$current_url:dr(pe?.href,n,hr),$host:pe?.host,$pathname:pe?.pathname,$raw_user_agent:he.length>1e3?he.substring(0,997)+"...":he,$browser_version:Bc(he,navigator.vendor),$browser_language:xn(),$browser_language_prefix:(t=xn(),typeof t=="string"?t.split("-")[0]:void 0),$screen_height:m?.screen.height,$screen_width:m?.screen.width,$viewport_height:m?.innerHeight,$viewport_width:m?.innerWidth,$lib:"web",$lib_version:Te.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ze=Y("[Web Vitals]"),wn=9e5;class Xu{constructor(e){var t;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce(((r,i)=>C({},r,{["$web_vitals_"+i.name+"_event"]:C({},i),["$web_vitals_"+i.name+"_value"]:i.value})),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=r=>{var i,n=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(E(n))ze.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var a=this.Ct();E(a)||(D(r?.name)||D(r?.value)?ze.error("Invalid metric received",r):this.Rt&&r.value>=this.Rt?ze.error("Ignoring metric with value >= "+this.Rt,r):(this.N.url!==a&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),E(this.N.url)&&(this.N.url=a),this.N.firstMetricTimestamp=E(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.N.metrics.push(C({},r,{$current_url:a,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{var r,i,n,a,o=N.__PosthogExtensions__;E(o)||E(o.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:n,onINP:a}=o.postHogWebVitalsCallbacks),r&&i&&n&&a?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&a(this.It.bind(this)),this.P=!0):ze.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.kt=!((t=this._instance.persistence)==null||!t.props[on]),this.startIfEnabled()}get allowedMetrics(){var e,t,r=Q(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return E(r)?((t=this._instance.persistence)==null?void 0:t.props[cn])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Q(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=Q(this._instance.config.capture_performance)&&Ne(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:wn;return 0<e&&e<=6e4?wn:e}get isEnabled(){var e=pe?.protocol;if(e!=="http:"&&e!=="https:")return ze.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=Q(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ue(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ue(t)?t:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(ze.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=Q(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Q(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[on]:t}),this._instance.persistence.register({[cn]:r})),this.kt=t,this.startIfEnabled()}it(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.postHogWebVitalsCallbacks&&e(),(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",(i=>{i?ze.error("failed to load script",i):e()}))}Ct(){var e=m?m.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,i=t?St([],jt,r||[]):[];return dr(e,i,hr)}ze.error("Could not determine current URL")}}var Ju=Y("[Heatmaps]");function En(s){return Q(s)&&"clientX"in s&&"clientY"in s&&Ne(s.clientX)&&Ne(s.clientY)}class Zu{constructor(e){var t;this.kt=!1,this.P=!1,this.Ft=null,this.instance=e,this.kt=!((t=this.instance.persistence)==null||!t.props[Vs]),this.rageclicks=new Ka(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return Q(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return E(this.instance.config.capture_heatmaps)?E(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;Ju.info("starting..."),this.Mt(),this.Ot()}else{var e;clearInterval((e=this.Ft)!==null&&e!==void 0?e:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Vs]:t}),this.kt=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Dt(e){this.jt(e.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft=(function(e){return e?.visibilityState==="visible"})(S)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){m&&S&&(this.Nt=this.Lt.bind(this),X(m,"beforeunload",this.Nt),this.Ut=e=>this.jt(e||m?.event),X(S,"click",this.Ut,{capture:!0}),this.zt=e=>this.Ht(e||m?.event),X(S,"mousemove",this.zt,{capture:!0}),this.Bt=new Xa(this.instance,Fu,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),X(S,"visibilitychange",this.qt),this.P=!0)}At(){var e;m&&S&&(this.Nt&&m.removeEventListener("beforeunload",this.Nt),this.Ut&&S.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&S.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&S.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),(e=this.Bt)==null||e.stop(),this.P=!1)}Gt(e,t){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),n=this.instance.scrollManager.scrollElement(),a=(function(o,c,u){for(var d=o;d&&Jr(d)&&!Xe(d,"body");){if(d===u)return!1;if(F(c,m?.getComputedStyle(d).position))return!0;d=Ha(d)}return!1})(Da(e),["fixed","sticky"],n);return{x:e.clientX+(a?0:i),y:e.clientY+(a?0:r),target_fixed:a,type:t}}jt(e,t){var r;if(t===void 0&&(t="click"),!un(e.target)&&En(e)){var i=this.Gt(e,t);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.Vt(C({},i,{type:"rageclick"})),this.Vt(i)}}Ht(e){!un(e.target)&&En(e)&&(clearTimeout(this.Wt),this.Wt=setTimeout((()=>{this.Vt(this.Gt(e,"mousemove"))}),500))}Vt(e){if(m){var t=m.location.href,r=this.instance.config.mask_personal_data_properties,i=this.instance.config.custom_personal_data_properties,n=r?St([],jt,i||[]):[],a=dr(t,n,hr);this.N=this.N||{},this.N[a]||(this.N[a]=[]),this.N[a].push(e)}}Lt(){this.N&&!_t(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class kn{constructor(e){this.Jt=(t,r,i)=>{i&&(i.noSessionId||i.activityTimeout||i.sessionPastMaximumLength)&&(k.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:t,changeReason:i}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=e,this.Yt()}Yt(){var e;this.Xt=(e=this._instance.sessionManager)==null?void 0:e.onSessionId(this.Jt)}destroy(){var e;(e=this.Xt)==null||e.call(this),this.Xt=void 0}doPageView(e,t){var r,i=this.Qt(e,t);return this.Kt={pathname:(r=m?.location.pathname)!==null&&r!==void 0?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),i}doPageLeave(e){var t;return this.Qt(e,(t=this.Kt)==null?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.Kt)==null?void 0:e.pageViewId}}Qt(e,t){var r=this.Kt;if(!r)return{$pageview_id:t};var i={$pageview_id:t,$prev_pageview_id:r.pageViewId},n=this._instance.scrollManager.getContext();if(n&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:a,lastScrollY:o,maxScrollY:c,maxContentHeight:u,lastContentY:d,maxContentY:h}=n;if(!(E(a)||E(o)||E(c)||E(u)||E(d)||E(h))){a=Math.ceil(a),o=Math.ceil(o),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d),h=Math.ceil(h);var v=a<=1?1:Re(o/a,0,1,k),f=a<=1?1:Re(c/a,0,1,k),p=u<=1?1:Re(d/u,0,1,k),_=u<=1?1:Re(h/u,0,1,k);i=K(i,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:v,$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:f,$prev_pageview_last_content:d,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:h,$prev_pageview_max_content_percentage:_})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),i}}var we=Uint8Array,fe=Uint16Array,kt=Uint32Array,Ei=new we([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ki=new we([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sn=new we([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ao=function(s,e){for(var t=new fe(31),r=0;r<31;++r)t[r]=e+=1<<s[r-1];var i=new kt(t[30]);for(r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)i[n]=n-t[r]<<5|r;return[t,i]},oo=ao(Ei,2),Qu=oo[0],ri=oo[1];Qu[28]=258,ri[258]=28;for(var jn=ao(ki,0)[1],lo=new fe(32768),z=0;z<32768;++z){var tt=(43690&z)>>>1|(21845&z)<<1;tt=(61680&(tt=(52428&tt)>>>2|(13107&tt)<<2))>>>4|(3855&tt)<<4,lo[z]=((65280&tt)>>>8|(255&tt)<<8)>>>1}var er=function(s,e,t){for(var r=s.length,i=0,n=new fe(e);i<r;++i)++n[s[i]-1];var a,o=new fe(e);for(i=0;i<e;++i)o[i]=o[i-1]+n[i-1]<<1;for(a=new fe(r),i=0;i<r;++i)a[i]=lo[o[s[i]-1]++]>>>15-s[i];return a},lt=new we(288);for(z=0;z<144;++z)lt[z]=8;for(z=144;z<256;++z)lt[z]=9;for(z=256;z<280;++z)lt[z]=7;for(z=280;z<288;++z)lt[z]=8;var Gr=new we(32);for(z=0;z<32;++z)Gr[z]=5;var ed=er(lt,9),td=er(Gr,5),co=function(s){return(s/8>>0)+(7&s&&1)},uo=function(s,e,t){(t==null||t>s.length)&&(t=s.length);var r=new(s instanceof fe?fe:s instanceof kt?kt:we)(t-e);return r.set(s.subarray(e,t)),r},Oe=function(s,e,t){t<<=7&e;var r=e/8>>0;s[r]|=t,s[r+1]|=t>>>8},Mt=function(s,e,t){t<<=7&e;var r=e/8>>0;s[r]|=t,s[r+1]|=t>>>8,s[r+2]|=t>>>16},ms=function(s,e){for(var t=[],r=0;r<s.length;++r)s[r]&&t.push({s:r,f:s[r]});var i=t.length,n=t.slice();if(!i)return[new we(0),0];if(i==1){var a=new we(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort((function(M,O){return M.f-O.f})),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,d=1,h=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=i-1;)o=t[t[u].f<t[h].f?u++:h++],c=t[u!=d&&t[u].f<t[h].f?u++:h++],t[d++]={s:-1,f:o.f+c.f,l:o,r:c};var v=n[0].s;for(r=1;r<i;++r)n[r].s>v&&(v=n[r].s);var f=new fe(v+1),p=si(t[d-1],f,0);if(p>e){r=0;var _=0,y=p-e,w=1<<y;for(n.sort((function(M,O){return f[O.s]-f[M.s]||M.f-O.f}));r<i;++r){var j=n[r].s;if(!(f[j]>e))break;_+=w-(1<<p-f[j]),f[j]=e}for(_>>>=y;_>0;){var x=n[r].s;f[x]<e?_-=1<<e-f[x]++-1:++r}for(;r>=0&&_;--r){var P=n[r].s;f[P]==e&&(--f[P],++_)}p=e}return[new we(f),p]},si=function(s,e,t){return s.s==-1?Math.max(si(s.l,e,t+1),si(s.r,e,t+1)):e[s.s]=t},Cn=function(s){for(var e=s.length;e&&!s[--e];);for(var t=new fe(++e),r=0,i=s[0],n=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(s[o]==i&&o!=e)++n;else{if(!i&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(i),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(i);n=1,i=s[o]}return[t.subarray(0,r),e]},Lt=function(s,e){for(var t=0,r=0;r<e.length;++r)t+=s[r]*e[r];return t},ii=function(s,e,t){var r=t.length,i=co(e+2);s[i]=255&r,s[i+1]=r>>>8,s[i+2]=255^s[i],s[i+3]=255^s[i+1];for(var n=0;n<r;++n)s[i+n+4]=t[n];return 8*(i+4+r)},Pn=function(s,e,t,r,i,n,a,o,c,u,d){Oe(e,d++,t),++i[256];for(var h=ms(i,15),v=h[0],f=h[1],p=ms(n,15),_=p[0],y=p[1],w=Cn(v),j=w[0],x=w[1],P=Cn(_),M=P[0],O=P[1],A=new fe(19),T=0;T<j.length;++T)A[31&j[T]]++;for(T=0;T<M.length;++T)A[31&M[T]]++;for(var le=ms(A,7),ee=le[0],ce=le[1],ne=19;ne>4&&!ee[Sn[ne-1]];--ne);var ye,te,ae,Ce,be=u+5<<3,Pe=Lt(i,lt)+Lt(n,Gr)+a,ge=Lt(i,v)+Lt(n,_)+a+14+3*ne+Lt(A,ee)+(2*A[16]+3*A[17]+7*A[18]);if(be<=Pe&&be<=ge)return ii(e,d,s.subarray(c,c+u));if(Oe(e,d,1+(ge<Pe)),d+=2,ge<Pe){ye=er(v,f),te=v,ae=er(_,y),Ce=_;var Ee=er(ee,ce);for(Oe(e,d,x-257),Oe(e,d+5,O-1),Oe(e,d+10,ne-4),d+=14,T=0;T<ne;++T)Oe(e,d+3*T,ee[Sn[T]]);d+=3*ne;for(var Ie=[j,M],b=0;b<2;++b){var R=Ie[b];for(T=0;T<R.length;++T){var I=31&R[T];Oe(e,d,Ee[I]),d+=ee[I],I>15&&(Oe(e,d,R[T]>>>5&127),d+=R[T]>>>12)}}}else ye=ed,te=lt,ae=td,Ce=Gr;for(T=0;T<o;++T)if(r[T]>255){I=r[T]>>>18&31,Mt(e,d,ye[I+257]),d+=te[I+257],I>7&&(Oe(e,d,r[T]>>>23&31),d+=Ei[I]);var $=31&r[T];Mt(e,d,ae[$]),d+=Ce[$],$>3&&(Mt(e,d,r[T]>>>5&8191),d+=ki[$])}else Mt(e,d,ye[r[T]]),d+=te[r[T]];return Mt(e,d,ye[256]),d+te[256]},rd=new kt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sd=(function(){for(var s=new kt(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(1&t&&3988292384)^t>>>1;s[e]=t}return s})(),id=function(s,e,t,r,i){return(function(n,a,o,c,u,d){var h=n.length,v=new we(c+h+5*(1+Math.floor(h/7e3))+u),f=v.subarray(c,v.length-u),p=0;if(!a||h<8)for(var _=0;_<=h;_+=65535){var y=_+65535;y<h?p=ii(f,p,n.subarray(_,y)):(f[_]=d,p=ii(f,p,n.subarray(_,h)))}else{for(var w=rd[a-1],j=w>>>13,x=8191&w,P=(1<<o)-1,M=new fe(32768),O=new fe(P+1),A=Math.ceil(o/3),T=2*A,le=function(ss){return(n[ss]^n[ss+1]<<A^n[ss+2]<<T)&P},ee=new kt(25e3),ce=new fe(288),ne=new fe(32),ye=0,te=0,ae=(_=0,0),Ce=0,be=0;_<h;++_){var Pe=le(_),ge=32767&_,Ee=O[Pe];if(M[ge]=Ee,O[Pe]=ge,Ce<=_){var Ie=h-_;if((ye>7e3||ae>24576)&&Ie>423){p=Pn(n,f,0,ee,ce,ne,te,ae,be,_-be,p),ae=ye=te=0,be=_;for(var b=0;b<286;++b)ce[b]=0;for(b=0;b<30;++b)ne[b]=0}var R=2,I=0,$=x,L=ge-Ee&32767;if(Ie>2&&Pe==le(_-L))for(var q=Math.min(j,Ie)-1,ue=Math.min(32767,_),re=Math.min(258,Ie);L<=ue&&--$&&ge!=Ee;){if(n[_+R]==n[_+R-L]){for(var ve=0;ve<re&&n[_+ve]==n[_+ve-L];++ve);if(ve>R){if(R=ve,I=L,ve>q)break;var Vo=Math.min(L,ve-2),Ai=0;for(b=0;b<Vo;++b){var rs=_-L+b+32768&32767,Fi=rs-M[rs]+32768&32767;Fi>Ai&&(Ai=Fi,Ee=rs)}}}L+=(ge=Ee)-(Ee=M[ge])+32768&32767}if(I){ee[ae++]=268435456|ri[R]<<18|jn[I];var Mi=31&ri[R],Li=31&jn[I];te+=Ei[Mi]+ki[Li],++ce[257+Mi],++ne[Li],Ce=_+R,++ye}else ee[ae++]=n[_],++ce[n[_]]}}p=Pn(n,f,d,ee,ce,ne,te,ae,be,_-be,p)}return uo(v,0,c+co(p)+u)})(s,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):12+e.mem,t,r,!0)},_s=function(s,e,t){for(;t;++e)s[e]=t,t>>>=8};function nd(s,e){e===void 0&&(e={});var t=(function(){var o=4294967295;return{p:function(c){for(var u=o,d=0;d<c.length;++d)u=sd[255&u^c[d]]^u>>>8;o=u},d:function(){return 4294967295^o}}})(),r=s.length;t.p(s);var i,n=id(s,e,10+((i=e).filename&&i.filename.length+1||0),8),a=n.length;return(function(o,c){var u=c.filename;if(o[0]=31,o[1]=139,o[2]=8,o[8]=c.level<2?4:c.level==9?2:0,o[9]=3,c.mtime!=0&&_s(o,4,Math.floor(new Date(c.mtime||Date.now())/1e3)),u){o[3]=8;for(var d=0;d<=u.length;++d)o[d+10]=u.charCodeAt(d)}})(n,e),_s(n,a-8,t.d()),_s(n,a-4,r),n}var ad=function(s){var e,t,r,i,n="";for(e=t=0,r=(s=(s+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var a=s.charCodeAt(i),o=null;a<128?t++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),je(o)||(t>e&&(n+=s.substring(e,t)),n+=o,e=t=i+1)}return t>e&&(n+=s.substring(e,s.length)),n},od=!!Ds||!!Ls,$n="text/plain",Wr=function(s,e,t){var r;t===void 0&&(t=!0);var[i,n]=s.split("?"),a=C({},e),o=(r=n?.split("&").map((u=>{var d,[h,v]=u.split("="),f=t&&(d=a[h])!==null&&d!==void 0?d:v;return delete a[h],h+"="+f})))!==null&&r!==void 0?r:[],c=Eu(a);return c&&o.push(c),i+"?"+o.join("&")},Zt=(s,e)=>JSON.stringify(s,((t,r)=>typeof r=="bigint"?r.toString():r),e),ys=s=>{var{data:e,compression:t}=s;if(e){if(t===Le.GZipJS){var r=nd((function(c,u){var d=c.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(c);for(var h=new we(c.length+(c.length>>>1)),v=0,f=function(w){h[v++]=w},p=0;p<d;++p){if(v+5>h.length){var _=new we(v+8+(d-p<<1));_.set(h),h=_}var y=c.charCodeAt(p);y<128||u?f(y):y<2048?(f(192|y>>>6),f(128|63&y)):y>55295&&y<57344?(f(240|(y=65536+(1047552&y)|1023&c.charCodeAt(++p))>>>18),f(128|y>>>12&63),f(128|y>>>6&63),f(128|63&y)):(f(224|y>>>12),f(128|y>>>6&63),f(128|63&y))}return uo(h,0,v)})(Zt(e)),{mtime:0}),i=new Blob([r],{type:$n});return{contentType:$n,body:i,estimatedSize:i.size}}if(t===Le.Base64){var n=(function(c){var u,d,h,v,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=0,y=0,w="",j=[];if(!c)return c;c=ad(c);do u=(f=c.charCodeAt(_++)<<16|c.charCodeAt(_++)<<8|c.charCodeAt(_++))>>18&63,d=f>>12&63,h=f>>6&63,v=63&f,j[y++]=p.charAt(u)+p.charAt(d)+p.charAt(h)+p.charAt(v);while(_<c.length);switch(w=j.join(""),c.length%3){case 1:w=w.slice(0,-2)+"==";break;case 2:w=w.slice(0,-1)+"="}return w})(Zt(e)),a=(c=>"data="+encodeURIComponent(typeof c=="string"?c:Zt(c)))(n);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var o=Zt(e);return{contentType:"application/json",body:o,estimatedSize:new Blob([o]).size}}},Rr=[];Ls&&Rr.push({transport:"fetch",method:s=>{var e,t,{contentType:r,body:i,estimatedSize:n}=(e=ys(s))!==null&&e!==void 0?e:{},a=new Headers;U(s.headers,(function(d,h){a.append(h,d)})),r&&a.append("Content-Type",r);var o=s.url,c=null;if(Gi){var u=new Gi;c={signal:u.signal,timeout:setTimeout((()=>u.abort()),s.timeout)}}Ls(o,C({method:s?.method||"GET",headers:a,keepalive:s.method==="POST"&&(n||0)<52428.8,body:i,signal:(t=c)==null?void 0:t.signal},s.fetchOptions)).then((d=>d.text().then((h=>{var v={statusCode:d.status,text:h};if(d.status===200)try{v.json=JSON.parse(h)}catch(f){k.error(f)}s.callback==null||s.callback(v)})))).catch((d=>{k.error(d),s.callback==null||s.callback({statusCode:0,text:d})})).finally((()=>c?clearTimeout(c.timeout):null))}}),Ds&&Rr.push({transport:"XHR",method:s=>{var e,t=new Ds;t.open(s.method||"GET",s.url,!0);var{contentType:r,body:i}=(e=ys(s))!==null&&e!==void 0?e:{};U(s.headers,(function(n,a){t.setRequestHeader(a,n)})),r&&t.setRequestHeader("Content-Type",r),s.timeout&&(t.timeout=s.timeout),s.disableXHRCredentials||(t.withCredentials=!0),t.onreadystatechange=()=>{if(t.readyState===4){var n={statusCode:t.status,text:t.responseText};if(t.status===200)try{n.json=JSON.parse(t.responseText)}catch{}s.callback==null||s.callback(n)}},t.send(i)}}),_e!=null&&_e.sendBeacon&&Rr.push({transport:"sendBeacon",method:s=>{var e=Wr(s.url,{beacon:"1"});try{var t,{contentType:r,body:i}=(t=ys(s))!==null&&t!==void 0?t:{},n=typeof i=="string"?new Blob([i],{type:r}):i;_e.sendBeacon(e,n)}catch{}}});var Vr=function(s,e){if(!(function(t){try{new RegExp(t)}catch{return!1}return!0})(e))return!1;try{return new RegExp(e).test(s)}catch{return!1}};function Rn(s,e,t){return Zt({distinct_id:s,userPropertiesToSet:e,userPropertiesToSetOnce:t})}var ho={exact:(s,e)=>e.some((t=>s.some((r=>t===r)))),is_not:(s,e)=>e.every((t=>s.every((r=>t!==r)))),regex:(s,e)=>e.some((t=>s.some((r=>Vr(t,r))))),not_regex:(s,e)=>e.every((t=>s.every((r=>!Vr(t,r))))),icontains:(s,e)=>e.map(Pr).some((t=>s.map(Pr).some((r=>t.includes(r))))),not_icontains:(s,e)=>e.map(Pr).every((t=>s.map(Pr).every((r=>!t.includes(r))))),gt:(s,e)=>e.some((t=>{var r=parseFloat(t);return!isNaN(r)&&s.some((i=>r>parseFloat(i)))})),lt:(s,e)=>e.some((t=>{var r=parseFloat(t);return!isNaN(r)&&s.some((i=>r<parseFloat(i)))}))},Pr=s=>s.toLowerCase();function po(s,e){return!s||Object.entries(s).every((t=>{var[r,i]=t,n=e?.[r];if(E(n)||je(n))return!1;var a=[String(n)],o=ho[i.operator];return!!o&&o(i.values,a)}))}var bs=Y("[Error tracking]");class ld{constructor(e){var t,r;this.Zt=[],this.ti=new qc([new Zc,new ou,new eu,new Qc,new nu,new iu,new ru,new au],Jc("web:javascript",Vc,Xc)),this._instance=e,this.Zt=(t=(r=this._instance.persistence)==null?void 0:r.get_property(Ks))!==null&&t!==void 0?t:[]}onRemoteConfig(e){var t,r,i,n=(t=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&t!==void 0?t:[],a=(i=e.errorTracking)==null?void 0:i.captureExtensionExceptions;this.Zt=n,this._instance.persistence&&this._instance.persistence.register({[Ks]:this.Zt,[an]:a})}get ii(){var e,t=!!this._instance.get_property(an),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??t)!==null&&e!==void 0&&e}buildProperties(e,t){return this.ti.buildFromUnknown(e,{syntheticException:t?.syntheticException,mechanism:{handled:t?.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.ei(t)){if(this.ri(t))return void bs.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(t))return void bs.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(t))return void bs.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(e){if(e.length===0)return!1;var t=e.reduce(((r,i)=>{var{type:n,value:a}=i;return J(n)&&n.length>0&&r.$exception_types.push(n),J(a)&&a.length>0&&r.$exception_values.push(a),r}),{$exception_types:[],$exception_values:[]});return this.Zt.some((r=>{var i=r.values.map((n=>{var a,o=ho[n.operator],c=B(n.value)?n.value:[n.value],u=(a=t[n.key])!==null&&a!==void 0?a:[];return c.length>0&&o(c,u)}));return r.type==="OR"?i.some(Boolean):i.every(Boolean)}))}si(e){return e.flatMap((t=>{var r,i;return(r=(i=t.stacktrace)==null?void 0:i.frames)!==null&&r!==void 0?r:[]})).some((t=>t.filename&&t.filename.startsWith("chrome-extension://")))}ni(e){if(e.length>0){var t,r,i,n,a=(t=(r=e[0].stacktrace)==null?void 0:r.frames)!==null&&t!==void 0?t:[],o=a[a.length-1];return(i=o==null||(n=o.filename)==null?void 0:n.includes("posthog.com/static"))!==null&&i!==void 0&&i}return!1}ei(e){return!D(e)&&B(e)}}var ke=Y("[FeatureFlags]"),Dt=Y("[FeatureFlags]",{debugEnabled:!0}),xs="$active_feature_flags",ut="$override_feature_flags",Nn="$feature_flag_payloads",Bt="$override_feature_flag_payloads",In="$feature_flag_request_id",On="$feature_flag_evaluated_at",Tn=s=>{var e={};for(var[t,r]of $r(s||{}))r&&(e[t]=r);return e},cd=s=>{var e=s.flags;return e?(s.featureFlags=Object.fromEntries(Object.keys(e).map((t=>{var r;return[t,(r=e[t].variant)!==null&&r!==void 0?r:e[t].enabled]}))),s.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter((t=>e[t].enabled)).filter((t=>{var r;return(r=e[t].metadata)==null?void 0:r.payload})).map((t=>{var r;return[t,(r=e[t].metadata)==null?void 0:r.payload]})))):ke.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),s},ud=(function(s){return s.FeatureFlags="feature_flags",s.Recordings="recordings",s})({});class dd{constructor(e){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this._instance=e,this.featureFlagEventHandlers=[]}ci(){var e=this._instance.config.evaluation_environments;return e!=null&&e.length?e.filter((t=>{var r=t&&typeof t=="string"&&t.trim().length>0;return r||ke.error("Invalid evaluation environment found:",t,"Expected non-empty string"),r})):[]}fi(){return this.ci().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var e=!this.pi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.gi({disableFlags:e})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Ys),t=this._instance.get_property(ut),r=this._instance.get_property(Bt);if(!r&&!t)return e||{};var i=K({},e||{}),n=[...new Set([...Object.keys(r||{}),...Object.keys(t||{})])];for(var a of n){var o,c,u=i[a],d=t?.[a],h=E(d)?(o=u?.enabled)!==null&&o!==void 0&&o:!!d,v=E(d)?u.variant:typeof d=="string"?d:void 0,f=r?.[a],p=C({},u,{enabled:h,variant:h?v??u?.variant:void 0});h!==u?.enabled&&(p.original_enabled=u?.enabled),v!==u?.variant&&(p.original_variant=u?.variant),f&&(p.metadata=C({},u?.metadata,{payload:f,original_payload:u==null||(c=u.metadata)==null?void 0:c.payload})),i[a]=p}return this.oi||(ke.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:i}),this.oi=!0),i}getFlagVariants(){var e=this._instance.get_property(yt),t=this._instance.get_property(ut);if(!t)return e||{};for(var r=K({},e),i=Object.keys(t),n=0;n<i.length;n++)r[i[n]]=t[i[n]];return this.oi||(ke.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:r}),this.oi=!0),r}getFlagPayloads(){var e=this._instance.get_property(Nn),t=this._instance.get_property(Bt);if(!t)return e||{};for(var r=K({},e||{}),i=Object.keys(t),n=0;n<i.length;n++)r[i[n]]=t[i[n]];return this.oi||(ke.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:r}),this.oi=!0),r}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.pi||(this.pi=setTimeout((()=>{this.gi()}),5))}mi(){clearTimeout(this.pi),this.pi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.pi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.ui=e}gi(e){var t;if(this.mi(),!this._instance.O())if(this.li)this.hi=!0;else{var r=this._instance.config.token,i=this._instance.get_property("$device_id"),n={token:r,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:C({},((t=this._instance.persistence)==null?void 0:t.get_initial_props())||{},this._instance.get_property(Jt)||{}),group_properties:this._instance.get_property(st)};je(i)||E(i)||(n.$device_id=i),(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(n.disable_flags=!0),this.fi()&&(n.evaluation_environments=this.ci());var a=this._instance.config.__preview_remote_config,o=a?"/flags/?v=2":"/flags/?v=2&config=true",c=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",u=this._instance.requestRouter.endpointFor("flags",o+c);a&&(n.timezone=no()),this.li=!0,this._instance._send_request({method:"POST",url:u,data:n,compression:this._instance.config.disable_compression?void 0:Le.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:d=>{var h,v,f=!0;if(d.statusCode===200&&(this.hi||(this.$anon_distinct_id=void 0),f=!1),this.li=!1,this.di||(this.di=!0,this._instance.yi((v=d.json)!==null&&v!==void 0?v:{})),!n.disable_flags||this.hi)if(this.vi=!f,d.json&&(h=d.json.quotaLimited)!=null&&h.includes(ud.FeatureFlags))ke.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var p;n.disable_flags||this.receivedFeatureFlags((p=d.json)!==null&&p!==void 0?p:{},f),this.hi&&(this.hi=!1,this.gi())}}})}}getFeatureFlag(e,t){if(t===void 0&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],i=""+r,n=this._instance.get_property(In)||void 0,a=this._instance.get_property(On)||void 0,o=this._instance.get_property(Mr)||{};if((t.send_event||!("send_event"in t))&&(!(e in o)||!o[e].includes(i))){var c,u,d,h,v,f,p,_,y;B(o[e])?o[e].push(i):o[e]=[i],(c=this._instance.persistence)==null||c.register({[Mr]:o});var w=this.getFeatureFlagDetails(e),j={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:n,$feature_flag_evaluated_at:a,$feature_flag_bootstrapped_response:((u=this._instance.config.bootstrap)==null||(u=u.featureFlags)==null?void 0:u[e])||null,$feature_flag_bootstrapped_payload:((d=this._instance.config.bootstrap)==null||(d=d.featureFlagPayloads)==null?void 0:d[e])||null,$used_bootstrap_value:!this.vi};E(w==null||(h=w.metadata)==null?void 0:h.version)||(j.$feature_flag_version=w.metadata.version);var x,P=(v=w==null||(f=w.reason)==null?void 0:f.description)!==null&&v!==void 0?v:w==null||(p=w.reason)==null?void 0:p.code;P&&(j.$feature_flag_reason=P),w!=null&&(_=w.metadata)!=null&&_.id&&(j.$feature_flag_id=w.metadata.id),E(w?.original_variant)&&E(w?.original_enabled)||(j.$feature_flag_original_response=E(w.original_variant)?w.original_enabled:w.original_variant),w!=null&&(y=w.metadata)!=null&&y.original_payload&&(j.$feature_flag_original_payload=w==null||(x=w.metadata)==null?void 0:x.original_payload),this._instance.capture("$feature_flag_called",j)}return r}ke.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var r=this._instance.config.token,i={distinct_id:this._instance.get_distinct_id(),token:r};this.fi()&&(i.evaluation_environments=this.ci()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:i,compression:this._instance.config.disable_compression?void 0:Le.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:n=>{var a,o=(a=n.json)==null?void 0:a.featureFlagPayloads;t(o?.[e]||void 0)}})}isFeatureEnabled(e,t){if(t===void 0&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,t);return E(r)?void 0:!!r}ke.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((t=>t!==e))}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ai=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),n=this.getFlagsWithDetails();(function(a,o,c,u,d){c===void 0&&(c={}),u===void 0&&(u={}),d===void 0&&(d={});var h=cd(a),v=h.flags,f=h.featureFlags,p=h.featureFlagPayloads;if(f){var _=a.requestId,y=a.evaluatedAt;if(B(f)){ke.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var w={};if(f)for(var j=0;j<f.length;j++)w[f[j]]=!0;o&&o.register({[xs]:f,[yt]:w})}else{var x=f,P=p,M=v;a.errorsWhileComputingFlags&&(x=C({},c,x),P=C({},u,P),M=C({},d,M)),o&&o.register(C({[xs]:Object.keys(Tn(x)),[yt]:x||{},[Nn]:P||{},[Ys]:M||{}},_?{[In]:_}:{},y?{[On]:y}:{}))}}})(e,this._instance.persistence,r,i,n),this.bi(t)}}override(e,t){t===void 0&&(t=!1),ke.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return ke.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(ut),this._instance.persistence.unregister(Bt),this.bi(),Dt.info("All overrides cleared");if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var t,r=e;if(this.oi=!!((t=r.suppressWarning)!==null&&t!==void 0&&t),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(ut),Dt.info("Flag overrides cleared");else if(r.flags){if(B(r.flags)){for(var i={},n=0;n<r.flags.length;n++)i[r.flags[n]]=!0;this._instance.persistence.register({[ut]:i})}else this._instance.persistence.register({[ut]:r.flags});Dt.info("Flag overrides set",{flags:r.flags})}}return"payloads"in r&&(r.payloads===!1?(this._instance.persistence.unregister(Bt),Dt.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[Bt]:r.payloads}),Dt.info("Payload overrides set",{payloads:r.payloads}))),void this.bi()}this.bi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ai){var{flags:t,flagVariants:r}=this.wi();e(t,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,r){var i,n=(this._instance.get_property(Xt)||[]).find((u=>u.flagKey===e)),a={["$feature_enrollment/"+e]:t},o={$feature_flag:e,$feature_enrollment:t,$set:a};n&&(o.$early_access_feature_name=n.name),r&&(o.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(a,!1);var c=C({},this.getFlagVariants(),{[e]:t});(i=this._instance.persistence)==null||i.register({[xs]:Object.keys(Tn(c)),[yt]:c}),this.bi()}getEarlyAccessFeatures(e,t,r){t===void 0&&(t=!1);var i=this._instance.get_property(Xt),n=r?"&"+r.map((a=>"stage="+a)).join("&"):"";if(i&&!t)return e(i);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+n),method:"GET",callback:a=>{var o,c;if(a.json){var u=a.json.earlyAccessFeatures;return(o=this._instance.persistence)==null||o.unregister(Xt),(c=this._instance.persistence)==null||c.register({[Xt]:u}),e(u)}}})}wi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((r=>t[r])),flagVariants:Object.keys(t).filter((r=>t[r])).reduce(((r,i)=>(r[i]=t[i],r)),{})}}bi(e){var{flags:t,flagVariants:r}=this.wi();this.featureFlagEventHandlers.forEach((i=>i(t,r,{errorsLoading:e})))}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(Jt)||{};this._instance.register({[Jt]:C({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Jt)}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(st)||{};Object.keys(r).length!==0&&Object.keys(r).forEach((i=>{r[i]=C({},r[i],e[i]),delete e[i]})),this._instance.register({[st]:C({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(st)||{};this._instance.register({[st]:C({},t,{[e]:{}})})}else this._instance.unregister(st)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.mi(),this.oi=!1}}var hd=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class ws{constructor(e,t){this.R=e,this.props={},this.xi=!1,this.Ei=(r=>{var i="";return r.token&&(i=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+i+"_posthog"})(e),this.Y=this.$i(e),this.load(),e.debug&&k.info("Persistence loaded",e.persistence,C({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.Si}$i(e){hd.indexOf(e.persistence.toLowerCase())===-1&&(k.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=(function(i){i===void 0&&(i=[]);var n=[...Ou,...i];return C({},G,{W:function(a){try{var o={};try{o=$e.W(a)||{}}catch{}var c=K(o,JSON.parse(G.q(a)||"{}"));return G.G(a,c),c}catch{}return null},G:function(a,o,c,u,d,h){try{G.G(a,o,void 0,void 0,h);var v={};n.forEach((f=>{o[f]&&(v[f]=o[f])})),Object.keys(v).length&&$e.G(a,v,c,u,d,h)}catch(f){G.B(f)}},V:function(a,o){try{m?.localStorage.removeItem(a),$e.V(a,o)}catch(c){G.B(c)}}})})(e.cookie_persisted_properties||[]),r=e.persistence.toLowerCase();return r==="localstorage"&&G.H()?G:r==="localstorage+cookie"&&t.H()?t:r==="sessionstorage"&&se.H()?se:r==="memory"?Tu:r==="cookie"?$e:t.H()?t:$e}properties(){var e={};return U(this.props,(function(t,r){if(r===yt&&Q(t))for(var i=Object.keys(t),n=0;n<i.length;n++)e["$feature/"+i[n]]=t[i[n]];else o=r,c=!1,(je(a=pu)?c:zi&&a.indexOf===zi?a.indexOf(o)!=-1:(U(a,(function(u){if(c||(c=u===o))return Ar})),c))||(e[r]=t);var a,o,c})),e}load(){if(!this.Si){var e=this.Y.W(this.Ei);e&&(this.props=K({},e))}}save(){this.Si||this.Y.G(this.Ei,this.props,this.ki,this.Pi,this.Ti,this.R.debug)}remove(){this.Y.V(this.Ei,!1),this.Y.V(this.Ei,!0)}clear(){this.remove(),this.props={}}register_once(e,t,r){if(Q(e)){E(t)&&(t="None"),this.ki=E(r)?this.Ii:r;var i=!1;if(U(e,((n,a)=>{this.props.hasOwnProperty(a)&&this.props[a]!==t||(this.props[a]=n,i=!0)})),i)return this.save(),!0}return!1}register(e,t){if(Q(e)){this.ki=E(t)?this.Ii:t;var r=!1;if(U(e,((i,n)=>{e.hasOwnProperty(n)&&this.props[n]!==i&&(this.props[n]=i,r=!0)})),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.xi){var e=Qa(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);_t(yi(e))||this.register(e),this.xi=!0}}update_search_keyword(){var e;this.register((e=S?.referrer)?to(e):{})}update_referrer_info(){var e;this.register_once({$referrer:ro(),$referring_domain:S!=null&&S.referrer&&((e=Hr(S.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Qs]||this.props[ei]||this.register_once({[Lr]:so(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};U([ei,Qs],(a=>{var o=this.props[a];o&&U(o,(function(c,u){e["$initial_"+Bs(u)]=c}))}));var t,r,i=this.props[Lr];if(i){var n=(t=io(i),r={},U(t,(function(a,o){r["$initial_"+Bs(o)]=a})),r);K(e,n)}return e}safe_merge(e){return U(this.props,(function(t,r){r in e||(e[r]=t)})),e}update_config(e,t,r){if(this.Ii=this.ki=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence||!((a,o)=>{if(a.length!==o.length)return!1;var c=[...a].sort(),u=[...o].sort();return c.every(((d,h)=>d===u[h]))})(e.cookie_persisted_properties||[],t.cookie_persisted_properties||[])){var i=this.$i(e),n=this.props;this.clear(),this.Y=i,this.props=n,this.save()}}set_disabled(e){this.Si=e,this.Si?this.remove():this.save()}set_cross_subdomain(e){e!==this.Pi&&(this.Pi=e,this.remove(),this.save())}set_secure(e){e!==this.Ti&&(this.Ti=e,this.remove(),this.save())}set_event_timer(e,t){var r=this.props[Yt]||{};r[e]=t,this.props[Yt]=r,this.save()}remove_event_timer(e){var t=(this.props[Yt]||{})[e];return E(t)||(delete this.props[Yt][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var An=Y("[Product Tours]"),Es="ph_product_tours";class pd{constructor(e){this.Ci=null,this.Ri=null,this._instance=e}onRemoteConfig(e){this._instance.persistence&&this._instance.persistence.register({[ln]:!(e==null||!e.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var e,t;this.Ci||(e=this._instance).config.disable_product_tours||(t=e.persistence)==null||!t.get_property(ln)||this.it((()=>this.Fi()))}it(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.generateProductTours?e():(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"product-tours",(i=>{i?An.error("Could not load product tours script",i):e()}))}Fi(){var e;!this.Ci&&(e=N.__PosthogExtensions__)!=null&&e.generateProductTours&&(this.Ci=N.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(e,t){if(t===void 0&&(t=!1),!B(this.Ri)||t){var r=this._instance.persistence;if(r){var i=r.props[Es];if(B(i)&&!t)return this.Ri=i,void e(i,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:n=>{var a=n.statusCode;if(a!==200||!n.json){var o="Product Tours API could not be loaded, status: "+a;return An.error(o),void e([],{isLoaded:!1,error:o})}var c=B(n.json.product_tours)?n.json.product_tours:[];this.Ri=c,r&&r.register({[Es]:c}),e(c,{isLoaded:!0})}})}else e(this.Ri,{isLoaded:!0})}getActiveProductTours(e){D(this.Ci)?e([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ci.getActiveProductTours(e)}showProductTour(e){var t;(t=this.Ci)==null||t.showTourById(e)}previewTour(e){this.Ci?this.Ci.previewTour(e):this.it((()=>{var t;this.Fi(),(t=this.Ci)==null||t.previewTour(e)}))}dismissProductTour(){var e;(e=this.Ci)==null||e.dismissTour("user_clicked_skip")}nextStep(){var e;(e=this.Ci)==null||e.nextStep()}previousStep(){var e;(e=this.Ci)==null||e.previousStep()}clearCache(){var e;this.Ri=null,(e=this._instance.persistence)==null||e.unregister(Es)}resetTour(e){var t;(t=this.Ci)==null||t.resetTour(e)}resetAllTours(){var e;(e=this.Ci)==null||e.resetAllTours()}cancelPendingTour(e){var t;(t=this.Ci)==null||t.cancelPendingTour(e)}}var Ht=(function(s){return s.Activation="events",s.Cancellation="cancelEvents",s})({});(function(s){return s.Button="button",s.Tab="tab",s.Selector="selector",s})({});(function(s){return s.TopLeft="top_left",s.TopRight="top_right",s.TopCenter="top_center",s.MiddleLeft="middle_left",s.MiddleRight="middle_right",s.MiddleCenter="middle_center",s.Left="left",s.Center="center",s.Right="right",s.NextToTrigger="next_to_trigger",s})({});(function(s){return s.Top="top",s.Left="left",s.Right="right",s.Bottom="bottom",s})({});var ks=(function(s){return s.Popover="popover",s.API="api",s.Widget="widget",s.ExternalSurvey="external_survey",s})({});(function(s){return s.Open="open",s.MultipleChoice="multiple_choice",s.SingleChoice="single_choice",s.Rating="rating",s.Link="link",s})({});(function(s){return s.NextQuestion="next_question",s.End="end",s.ResponseBased="response_based",s.SpecificQuestion="specific_question",s})({});(function(s){return s.Once="once",s.Recurring="recurring",s.Always="always",s})({});var Nr=(function(s){return s.SHOWN="survey shown",s.DISMISSED="survey dismissed",s.SENT="survey sent",s.ABANDONED="survey abandoned",s})({}),Fn=(function(s){return s.SURVEY_ID="$survey_id",s.SURVEY_NAME="$survey_name",s.SURVEY_RESPONSE="$survey_response",s.SURVEY_ITERATION="$survey_iteration",s.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",s.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",s.SURVEY_SUBMISSION_ID="$survey_submission_id",s.SURVEY_QUESTIONS="$survey_questions",s.SURVEY_COMPLETED="$survey_completed",s.PRODUCT_TOUR_ID="$product_tour_id",s})({}),fo=(function(s){return s.Popover="popover",s.Inline="inline",s})({}),H=Y("[Surveys]"),go="seenSurvey_",fd=(s,e)=>{var t="$survey_"+e+"/"+s.id;return s.current_iteration&&s.current_iteration>0&&(t="$survey_"+e+"/"+s.id+"/"+s.current_iteration),t},Mn=s=>((e,t)=>{var r=""+e+t.id;return t.current_iteration&&t.current_iteration>0&&(r=""+e+t.id+"_"+t.current_iteration),r})(go,s),gd=[ks.Popover,ks.Widget,ks.API],vd={ignoreConditions:!1,ignoreDelay:!1,displayType:fo.Popover};class Si{constructor(){this.Mi={},this.Mi={}}on(e,t){return this.Mi[e]||(this.Mi[e]=[]),this.Mi[e].push(t),()=>{this.Mi[e]=this.Mi[e].filter((r=>r!==t))}}emit(e,t){for(var r of this.Mi[e]||[])r(t);for(var i of this.Mi["*"]||[])i(e,t)}}function dt(s,e,t){if(D(s))return!1;switch(t){case"exact":return s===e;case"contains":var r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(r,"i").test(s);case"regex":try{return new RegExp(e).test(s)}catch{return!1}default:return!1}}class md{constructor(e){this.Oi=new Si,this.Ai=(t,r)=>this.Di(t,r)&&this.ji(t,r)&&this.Li(t,r)&&this.Ni(t,r),this.Di=(t,r)=>r==null||!r.event||t?.event===r?.event,this._instance=e,this.Ui=new Set,this.zi=new Set}init(){var e;if(!E((e=this._instance)==null?void 0:e.Hi)){var t;(t=this._instance)==null||t.Hi(((r,i)=>{this.on(r,i)}))}}register(e){var t,r;if(!E((t=this._instance)==null?void 0:t.Hi)&&(e.forEach((a=>{var o,c;(o=this.zi)==null||o.add(a),(c=a.steps)==null||c.forEach((u=>{var d;(d=this.Ui)==null||d.add(u?.event||"")}))})),(r=this._instance)!=null&&r.autocapture)){var i,n=new Set;e.forEach((a=>{var o;(o=a.steps)==null||o.forEach((c=>{c!=null&&c.selector&&n.add(c?.selector)}))})),(i=this._instance)==null||i.autocapture.setElementSelectors(n)}}on(e,t){var r;t!=null&&e.length!=0&&(this.Ui.has(e)||this.Ui.has(t?.event))&&this.zi&&((r=this.zi)==null?void 0:r.size)>0&&this.zi.forEach((i=>{this.Bi(t,i)&&this.Oi.emit("actionCaptured",i.name)}))}qi(e){this.onAction("actionCaptured",(t=>e(t)))}Bi(e,t){if(t?.steps==null)return!1;for(var r of t.steps)if(this.Ai(e,r))return!0;return!1}onAction(e,t){return this.Oi.on(e,t)}ji(e,t){if(t!=null&&t.url){var r,i=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!dt(i,t.url,t.url_matching||"contains"))return!1}return!0}Li(e,t){return!!this.Wi(e,t)&&!!this.Gi(e,t)&&!!this.Vi(e,t)}Wi(e,t){var r;if(t==null||!t.href)return!0;var i=this.Ji(e);if(i.length>0)return i.some((o=>dt(o.href,t.href,t.href_matching||"exact")));var n,a=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!a&&dt((n=a.match(/(?::|")href="(.*?)"/))?n[1]:"",t.href,t.href_matching||"exact")}Gi(e,t){var r;if(t==null||!t.text)return!0;var i=this.Ji(e);if(i.length>0)return i.some((u=>dt(u.text,t.text,t.text_matching||"exact")||dt(u.$el_text,t.text,t.text_matching||"exact")));var n,a,o,c=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!c&&(n=(function(u){for(var d,h=[],v=/(?::|")text="(.*?)"/g;!D(d=v.exec(u));)h.includes(d[1])||h.push(d[1]);return h})(c),a=t.text,o=t.text_matching||"exact",n.some((u=>dt(u,a,o))))}Vi(e,t){var r,i;if(t==null||!t.selector)return!0;var n=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(n!=null&&n.includes(t.selector))return!0;var a=(e==null||(i=e.properties)==null?void 0:i.$elements_chain)||"";if(t.selector_regex&&a)try{return new RegExp(t.selector_regex).test(a)}catch{return!1}return!1}Ji(e){var t;return(e==null||(t=e.properties)==null?void 0:t.$elements)==null?[]:e?.properties.$elements}Ni(e,t){return t==null||!t.properties||t.properties.length===0||po(t.properties.reduce(((r,i)=>{var n=B(i.value)?i.value.map(String):i.value!=null?[String(i.value)]:[];return r[i.key]={values:n,operator:i.operator||"exact"},r}),{}),e?.properties)}}class _d{constructor(e){this._instance=e,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(e,t){return!!e&&po(e.propertyFilters,t?.properties)}Zi(e,t){var r=new Map;return e.forEach((i=>{var n;(n=i.conditions)==null||(n=n[t])==null||(n=n.values)==null||n.forEach((a=>{if(a!=null&&a.name){var o=r.get(a.name)||[];o.push(i.id),r.set(a.name,o)}}))})),r}te(e,t,r){var i=(r===Ht.Activation?this.Ki:this.Yi).get(e),n=[];return this.ie((a=>{n=a.filter((o=>i?.includes(o.id)))})),n.filter((a=>{var o,c=(o=a.conditions)==null||(o=o[r])==null||(o=o.values)==null?void 0:o.find((u=>u.name===e));return this.Qi(c,t)}))}register(e){var t;E((t=this._instance)==null?void 0:t.Hi)||(this.ee(e),this.re(e))}re(e){var t=e.filter((r=>{var i,n;return((i=r.conditions)==null?void 0:i.actions)&&((n=r.conditions)==null||(n=n.actions)==null||(n=n.values)==null?void 0:n.length)>0}));t.length!==0&&(this.se==null&&(this.se=new md(this._instance),this.se.init(),this.se.qi((r=>{this.onAction(r)}))),t.forEach((r=>{var i,n,a,o,c;r.conditions&&(i=r.conditions)!=null&&i.actions&&(n=r.conditions)!=null&&(n=n.actions)!=null&&n.values&&((a=r.conditions)==null||(a=a.actions)==null||(a=a.values)==null?void 0:a.length)>0&&((o=this.se)==null||o.register(r.conditions.actions.values),(c=r.conditions)==null||(c=c.actions)==null||(c=c.values)==null||c.forEach((u=>{if(u&&u.name){var d=this.Xi.get(u.name);d&&d.push(r.id),this.Xi.set(u.name,d||[r.id])}})))})))}ee(e){var t,r=e.filter((n=>{var a,o;return((a=n.conditions)==null?void 0:a.events)&&((o=n.conditions)==null||(o=o.events)==null||(o=o.values)==null?void 0:o.length)>0})),i=e.filter((n=>{var a,o;return((a=n.conditions)==null?void 0:a.cancelEvents)&&((o=n.conditions)==null||(o=o.cancelEvents)==null||(o=o.values)==null?void 0:o.length)>0}));(r.length!==0||i.length!==0)&&((t=this._instance)==null||t.Hi(((n,a)=>{this.onEvent(n,a)})),this.Ki=this.Zi(e,Ht.Activation),this.Yi=this.Zi(e,Ht.Cancellation))}onEvent(e,t){var r,i=this.ne(),n=this.oe(),a=this.ae(),o=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[n])||[];if(a===e&&t&&o.length>0){var c,u;i.info("event matched, removing item from activated items",{event:e,eventPayload:t,existingActivatedItems:o});var d=(t==null||(c=t.properties)==null?void 0:c.$survey_id)||(t==null||(u=t.properties)==null?void 0:u.$product_tour_id);if(d){var h=o.indexOf(d);h>=0&&(o.splice(h,1),this.le(o))}}else{if(this.Yi.has(e)){var v=this.te(e,t,Ht.Cancellation);v.length>0&&(i.info("cancel event matched, cancelling items",{event:e,itemsToCancel:v.map((p=>p.id))}),v.forEach((p=>{var _=o.indexOf(p.id);_>=0&&o.splice(_,1),this.ue(p.id)})),this.le(o))}if(this.Ki.has(e)){i.info("event name matched",{event:e,eventPayload:t,items:this.Ki.get(e)});var f=this.te(e,t,Ht.Activation);this.le(o.concat(f.map((p=>p.id))||[]))}}}onAction(e){var t,r=this.oe(),i=((t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[r])||[];this.Xi.has(e)&&this.le(i.concat(this.Xi.get(e)||[]))}le(e){var t,r=this.ne(),i=this.oe(),n=[...new Set(e)].filter((a=>!this.he(a)));r.info("updating activated items",{activatedItems:n}),(t=this._instance)==null||(t=t.persistence)==null||t.register({[i]:n})}getActivatedIds(){var e,t=this.oe(),r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[t];return r||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}}class yd extends _d{constructor(e){super(e)}oe(){return"$surveys_activated"}ae(){return Nr.SHOWN}ie(e){var t;(t=this._instance)==null||t.getSurveys(e)}ue(e){var t;(t=this._instance)==null||t.cancelPendingSurvey(e)}ne(){return H}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class bd{constructor(e){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(D(t))return H.warn("Flags not loaded yet. Not loading surveys.");var r=B(t);this.ve=r?t.length>0:t,H.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);(r!=null&&r.startsWith(go)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach((i=>localStorage.removeItem(i)))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)H.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)H.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())H.info("Not loading surveys in cookieless mode without consent.");else{var e=N?.__PosthogExtensions__;if(e){if(!E(this.ve)||this._instance.config.advanced_enable_surveys){var t=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var r=e.generateSurveys;if(r)return void this.ge(r,t);var i=e.loadExternalDependency;if(!i)return void this._e("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",(n=>{n||!e.generateSurveys?this._e("Could not load surveys script",n):this.ge(e.generateSurveys,t)}))}catch(n){throw this._e("Error initializing surveys",n),n}finally{this.ce=!1}}}else H.error("PostHog Extensions not found.")}}ge(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new yd(this._instance),H.info("Surveys loaded successfully"),this.me({isLoaded:!0})}_e(e,t){H.error(e,t),this.me({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.fe.push(e),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter((t=>t!==e))}}getSurveys(e,t){if(t===void 0&&(t=!1),this._instance.config.disable_surveys)return H.info("Disabled. Not loading surveys."),e([]);var r,i=this._instance.get_property(Xs);if(i&&!t)return e(i,{isLoaded:!0});typeof Promise<"u"&&this.pe?this.pe.then((n=>{var{surveys:a,context:o}=n;return e(a,o)})):(typeof Promise<"u"&&(this.pe=new Promise((n=>{r=n}))),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:n=>{var a;this.pe=null;var o=n.statusCode;if(o!==200||!n.json){var c="Surveys API could not be loaded, status: "+o;H.error(c);var u={isLoaded:!1,error:c};return e([],u),void(r==null||r({surveys:[],context:u}))}var d,h=n.json.surveys||[],v=h.filter((p=>(function(_){return!(!_.start_date||_.end_date)})(p)&&((function(_){var y;return!((y=_.conditions)==null||(y=y.events)==null||(y=y.values)==null||!y.length)})(p)||(function(_){var y;return!((y=_.conditions)==null||(y=y.actions)==null||(y=y.values)==null||!y.length)})(p))));v.length>0&&((d=this._surveyEventReceiver)==null||d.register(v)),(a=this._instance.persistence)==null||a.register({[Xs]:h});var f={isLoaded:!0};e(h,f),r?.({surveys:h,context:f})}}))}me(e){for(var t of this.fe)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(r){H.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,t){if(t===void 0&&(t=!1),!D(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);H.warn("init was not called")}ye(e){var t=null;return this.getSurveys((r=>{var i;t=(i=r.find((n=>n.id===e)))!==null&&i!==void 0?i:null})),t}be(e){if(D(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t=typeof e=="string"?this.ye(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(D(this._surveyManager))return H.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.be(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return D(this._surveyManager)?(H.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((r=>{this.getSurveys((i=>{var n,a=(n=i.find((c=>c.id===e)))!==null&&n!==void 0?n:null;if(a){var o=this.be(a);r({visible:o.eligible,disabledReason:o.reason})}else r({visible:!1,disabledReason:"Survey not found"})}),t)}))}renderSurvey(e,t){var r;if(D(this._surveyManager))H.warn("init was not called");else{var i=typeof e=="string"?this.ye(e):e;if(i!=null&&i.id)if(gd.includes(i.type)){var n=S?.querySelector(t);if(n)return(r=i.appearance)!=null&&r.surveyPopupDelaySeconds?(H.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var a,o;H.info("Rendering survey "+i.id+" with delay of "+((a=i.appearance)==null?void 0:a.surveyPopupDelaySeconds)+" seconds"),(o=this._surveyManager)==null||o.renderSurvey(i,n),H.info("Survey "+i.id+" rendered")}),1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,n);H.warn("Survey element not found")}else H.warn("Surveys of type "+i.type+" cannot be rendered in the app");else H.warn("Survey not found")}}displaySurvey(e,t){var r;if(D(this._surveyManager))H.warn("init was not called");else{var i=this.ye(e);if(i){var n=i;if((r=i.appearance)!=null&&r.surveyPopupDelaySeconds&&t.ignoreDelay&&(n=C({},i,{appearance:C({},i.appearance,{surveyPopupDelaySeconds:0})})),t.ignoreConditions===!1){var a=this.canRenderSurvey(i);if(!a.visible)return void H.warn("Survey is not eligible to be displayed: ",a.disabledReason)}t.displayType!==fo.Inline?this._surveyManager.handlePopoverSurvey(n):this.renderSurvey(n,t.selector)}else H.warn("Survey not found")}}cancelPendingSurvey(e){D(this._surveyManager)?H.warn("init was not called"):this._surveyManager.cancelSurvey(e)}handlePageUnload(){var e;(e=this._surveyManager)==null||e.handlePageUnload()}}var Ut=Y("[Conversations]");class xd{constructor(e){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.Ee=null,this._instance=e}onRemoteConfig(e){if(!this._instance.config.disable_conversations){var t=e.conversations;D(t)||(Ue(t)?this.we=t:(this.we=t.enabled,this.Ee=t),this.loadIfEnabled())}}reset(){var e;(e=this._conversationsManager)==null||e.reset(),this._conversationsManager=null,this.we=void 0,this.Ee=null}loadIfEnabled(){if(!this._conversationsManager&&!this.xe&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var e=N?.__PosthogExtensions__;if(e&&!E(this.we)&&this.we)if(this.Ee&&this.Ee.token){if((function(i){var n;if(!i||i.length===0)return!0;var a=m==null||(n=m.location)==null?void 0:n.hostname;return!a||i.some((o=>{var c=(function(d){var h=d.replace(/^https?:\/\//,"");return(h=h.split("/")[0].split("?")[0].split(":")[0])||null})(o);if(!c)return!1;if(c.startsWith("*.")){var u=c.slice(2);return a.endsWith("."+u)||a===u}return a===c}))})(this.Ee.domains)){this.xe=!0;try{var t=e.initConversations;if(t)return this.$e(t),void(this.xe=!1);var r=e.loadExternalDependency;if(!r)return void this.Se("PostHog loadExternalDependency extension not found.");r(this._instance,"conversations",(i=>{i||!e.initConversations?this.Se("Could not load conversations script",i):this.$e(e.initConversations),this.xe=!1}))}catch(i){this.Se("Error initializing conversations",i),this.xe=!1}}}else Ut.error("Conversations enabled but missing token in remote config.")}}$e(e){if(this.Ee)try{this._conversationsManager=e(this.Ee,this._instance),Ut.info("Conversations loaded successfully")}catch(t){this.Se("Error completing conversations initialization",t)}else Ut.error("Cannot complete initialization: remote config is null")}Se(e,t){Ut.error(e,t),this._conversationsManager=null,this.xe=!1}enable(){this._conversationsManager?this._conversationsManager.enable():Ut.warn("Conversations not loaded yet.")}disable(){this._conversationsManager&&this._conversationsManager.disable()}isLoaded(){return!je(this._conversationsManager)}isEnabled(){return this.we===!0}}var Ln=Y("[RateLimiter]");class wd{constructor(e){var t,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var n=i.text;if(n&&n.length)try{(JSON.parse(n).quota_limited||[]).forEach((a=>{Ln.info((a||"events")+" is quota limited."),this.serverLimits[a]=new Date().getTime()+6e4}))}catch(a){return void Ln.warn('could not rate limit - continuing. Error: "'+a?.message+'"',{text:n})}},this.instance=e,this.captureEventsPerSecond=((t=e.config.rate_limiting)==null?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,r,i;e===void 0&&(e=!1);var n=new Date().getTime(),a=(t=(r=this.instance.persistence)==null?void 0:r.get_property(Zs))!==null&&t!==void 0?t:{tokens:this.captureEventsBurstLimit,last:n};a.tokens+=(n-a.last)/1e3*this.captureEventsPerSecond,a.last=n,a.tokens>this.captureEventsBurstLimit&&(a.tokens=this.captureEventsBurstLimit);var o=a.tokens<1;return o||e||(a.tokens=Math.max(0,a.tokens-1)),!o||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,(i=this.instance.persistence)==null||i.set_property(Zs,a),{isRateLimited:o,remainingTokens:a.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return t!==!1&&new Date().getTime()<t}}var rt=Y("[RemoteConfig]");class Ed{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=N._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}ke(e){var t,r;(t=N.__PosthogExtensions__)!=null&&t.loadExternalDependency?(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",(()=>e(this.remoteConfig))):(rt.error("PostHog Extensions not found. Cannot load remote config."),e())}Pe(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return rt.info("Using preloaded remote config",this.remoteConfig),void this.yi(this.remoteConfig);if(this._instance.O())return void rt.warn("Remote config is disabled. Falling back to local config.");this.ke((e=>{if(!e)return rt.info("No config found after loading remote JS config. Falling back to JSON."),void this.Pe((t=>{this.yi(t)}));this.yi(e)}))}catch(e){rt.error("Error loading remote config",e)}}yi(e){e?this._instance.config.__preview_remote_config?(this._instance.yi(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):rt.info("__preview_remote_config is disabled. Logging config instead",e):rt.error("Failed to fetch remote config from PostHog.")}}var ni=3e3;class kd{constructor(e,t){this.Te=!0,this.Ie=[],this.Ce=Re(t?.flush_interval_ms||ni,250,5e3,k.createLogger("flush interval"),ni),this.Re=e}enqueue(e){this.Ie.push(e),this.Fe||this.Me()}unload(){this.Oe();var e=this.Ie.length>0?this.Ae():{},t=Object.values(e);[...t.filter((r=>r.url.indexOf("/e")===0)),...t.filter((r=>r.url.indexOf("/e")!==0))].map((r=>{this.Re(C({},r,{transport:"sendBeacon"}))}))}enable(){this.Te=!1,this.Me()}Me(){var e=this;this.Te||(this.Fe=setTimeout((()=>{if(this.Oe(),this.Ie.length>0){var t=this.Ae(),r=function(){var n=t[i],a=new Date().getTime();n.data&&B(n.data)&&U(n.data,(o=>{o.offset=Math.abs(o.timestamp-a),delete o.timestamp})),e.Re(n)};for(var i in t)r()}}),this.Ce))}Oe(){clearTimeout(this.Fe),this.Fe=void 0}Ae(){var e={};return U(this.Ie,(t=>{var r,i=t,n=(i?i.batchKey:null)||i.url;E(e[n])&&(e[n]=C({},i,{data:[]})),(r=e[n].data)==null||r.push(i.data)})),this.Ie=[],e}}var Sd=["retriesPerformedSoFar"];class jd{constructor(e){this.De=!1,this.je=3e3,this.Ie=[],this._instance=e,this.Ie=[],this.Le=!0,!E(m)&&"onLine"in m.navigator&&(this.Le=m.navigator.onLine,this.Ne=()=>{this.Le=!0,this.Lt()},this.Ue=()=>{this.Le=!1},X(m,"online",this.Ne),X(m,"offline",this.Ue))}get length(){return this.Ie.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,r=la(e,Sd);Ne(t)&&t>0&&(r.url=Wr(r.url,{retry_count:t})),this._instance._send_request(C({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(t??0)<10?this.ze(C({retriesPerformedSoFar:t},r)):r.callback==null||r.callback(i)}}))}ze(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var r=(function(a){var o=3e3*Math.pow(2,a),c=o/2,u=Math.min(18e5,o),d=(Math.random()-.5)*(u-c);return Math.ceil(u+d)})(t),i=Date.now()+r;this.Ie.push({retryAt:i,requestOptions:e});var n="Enqueued failed request for retry in "+r;navigator.onLine||(n+=" (Browser is offline)"),k.warn(n),this.De||(this.De=!0,this.He())}He(){if(this.Be&&clearTimeout(this.Be),this.Ie.length===0)return this.De=!1,void(this.Be=void 0);this.Be=setTimeout((()=>{this.Le&&this.Ie.length>0&&this.Lt(),this.He()}),this.je)}Lt(){var e=Date.now(),t=[],r=this.Ie.filter((n=>n.retryAt<e||(t.push(n),!1)));if(this.Ie=t,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.Be&&(clearTimeout(this.Be),this.Be=void 0),this.De=!1,E(m)||(this.Ne&&(m.removeEventListener("online",this.Ne),this.Ne=void 0),this.Ue&&(m.removeEventListener("offline",this.Ue),this.Ue=void 0)),this.Ie))try{this._instance._send_request(C({},e,{transport:"sendBeacon"}))}catch(t){k.error(t)}this.Ie=[]}}class Cd{constructor(e){this.qe=()=>{var t,r,i,n;this.We||(this.We={});var a=this.scrollElement(),o=this.scrollY(),c=a?Math.max(0,a.scrollHeight-a.clientHeight):0,u=o+(a?.clientHeight||0),d=a?.scrollHeight||0;this.We.lastScrollY=Math.ceil(o),this.We.maxScrollY=Math.max(o,(t=this.We.maxScrollY)!==null&&t!==void 0?t:0),this.We.maxScrollHeight=Math.max(c,(r=this.We.maxScrollHeight)!==null&&r!==void 0?r:0),this.We.lastContentY=u,this.We.maxContentY=Math.max(u,(i=this.We.maxContentY)!==null&&i!==void 0?i:0),this.We.maxContentHeight=Math.max(d,(n=this.We.maxContentHeight)!==null&&n!==void 0?n:0)},this._instance=e}getContext(){return this.We}resetContext(){var e=this.We;return setTimeout(this.qe,0),e}startMeasuringScrollPosition(){X(m,"scroll",this.qe,{capture:!0}),X(m,"scrollend",this.qe,{capture:!0}),X(m,"resize",this.qe)}scrollElement(){if(!this._instance.config.scroll_root_selector)return m?.document.documentElement;var e=B(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var r=m?.document.querySelector(t);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return m&&(m.scrollY||m.pageYOffset||m.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return m&&(m.scrollX||m.pageXOffset||m.document.documentElement.scrollLeft)||0}}var Pd=s=>so(s?.config.mask_personal_data_properties,s?.config.custom_personal_data_properties);class Dn{constructor(e,t,r,i){this.Ge=n=>{var a=this.Ve();if(!a||a.sessionId!==n){var o={sessionId:n,props:this.Je(this._instance)};this.Ke.register({[Js]:o})}},this._instance=e,this.Ye=t,this.Ke=r,this.Je=i||Pd,this.Ye.onSessionId(this.Ge)}Ve(){return this.Ke.props[Js]}getSetOnceProps(){var e,t=(e=this.Ve())==null?void 0:e.props;return t?"r"in t?io(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return U(yi(this.getSetOnceProps()),((t,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+Bs(r)]=t})),e}}var Ss=Y("[SessionId]");class Bn{on(e,t){return this.Xe.on(e,t)}constructor(e,t,r){var i;if(this.Qe=[],this.Ze=void 0,this.Xe=new Si,this.tr=(d,h)=>Math.abs(d-h)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=e.config,this.Ke=e.persistence,this.ir=void 0,this.er=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.rr=t||Ve,this.sr=r||Ve;var n=this.R.persistence_name||this.R.token,a=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Re(a,60,36e3,Ss.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.nr(),this.ar="ph_"+n+"_window_id",this.lr="ph_"+n+"_primary_window_exists",this.ur()){var o=se.W(this.ar),c=se.W(this.lr);o&&!c?this.ir=o:se.V(this.ar),se.G(this.lr,!0)}if((i=this.R.bootstrap)!=null&&i.sessionID)try{var u=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.R.bootstrap.sessionID);this.hr(this.R.bootstrap.sessionID,new Date().getTime(),u)}catch(d){Ss.error("Invalid sessionID in bootstrap",d)}this.dr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return E(this.Qe)&&(this.Qe=[]),this.Qe.push(e),this.er&&e(this.er,this.ir),()=>{this.Qe=this.Qe.filter((t=>t!==e))}}ur(){return this.R.persistence!=="memory"&&!this.Ke.Si&&se.H()}vr(e){e!==this.ir&&(this.ir=e,this.ur()&&se.G(this.ar,e))}cr(){return this.ir?this.ir:this.ur()?se.W(this.ar):null}hr(e,t,r){e===this.er&&t===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=t,this.er=e,this.Ke.register({[Fr]:[t,e,r]}))}pr(){var e=this.Ke.props[Fr];return B(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.hr(null,null,null)}destroy(){clearTimeout(this.gr),this.gr=void 0,this.Ze&&m&&(m.removeEventListener("beforeunload",this.Ze,{capture:!1}),this.Ze=void 0),this.Qe=[]}dr(){this.Ze=()=>{this.ur()&&se.V(this.lr)},X(m,"beforeunload",this.Ze,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=null),this.R.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=t||new Date().getTime(),[i,n,a]=this.pr(),o=this.cr(),c=Ne(a)&&a>0&&Math.abs(r-a)>864e5,u=!1,d=!n,h=!d&&!e&&this.tr(r,i);d||h||c?(n=this.rr(),o=this.sr(),Ss.info("new session ID generated",{sessionId:n,windowId:o,changeReason:{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}}),a=r,u=!0):o||(o=this.sr(),u=!0);var v=i===0||!e||c?r:i,f=a===0?new Date().getTime():a;return this.vr(o),this.hr(n,v,f),e||this.nr(),u&&this.Qe.forEach((p=>p(n,o,u?{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}:void 0))),{sessionId:n,windowId:o,sessionStartTimestamp:f,changeReason:u?{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}:void 0,lastActivityTimestamp:i}}nr(){clearTimeout(this.gr),this.gr=setTimeout((()=>{var[e]=this.pr();if(this.tr(new Date().getTime(),e)){var t=this.er;this.resetSessionId(),this.Xe.emit("forcedIdleReset",{idleSessionId:t})}}),1.1*this.sessionTimeoutMs)}}var $d=["$set_once","$set"],Ge=Y("[SiteApps]");class Rd{constructor(e){this._instance=e,this._r=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}mr(e,t){if(t){var r=this.globalsForEvent(t);this._r.push(r),this._r.length>1e3&&(this._r=this._r.slice(10))}}get siteAppLoaders(){var e;return(e=N._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Hi(this.mr.bind(this));this.yr=()=>{e(),this._r=[],this.yr=void 0}}}globalsForEvent(e){var t,r,i,n,a,o,c;if(!e)throw new Error("Event payload is required");var u={},d=this._instance.get_property("$groups")||[],h=this._instance.get_property("$stored_group_properties")||{};for(var[v,f]of Object.entries(h))u[v]={id:d[v],type:v,properties:f};var{$set_once:p,$set:_}=e;return{event:C({},la(e,$d),{properties:C({},e.properties,_?{$set:C({},(t=(r=e.properties)==null?void 0:r.$set)!==null&&t!==void 0?t:{},_)}:{},p?{$set_once:C({},(i=(n=e.properties)==null?void 0:n.$set_once)!==null&&i!==void 0?i:{},p)}:{}),elements_chain:(a=(o=e.properties)==null?void 0:o.$elements_chain)!==null&&a!==void 0?a:"",distinct_id:(c=e.properties)==null?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var t=this.apps[e.id],r=()=>{var o;!t.errored&&this._r.length&&(Ge.info("Processing "+this._r.length+" events for site app with id "+e.id),this._r.forEach((c=>t.processEvent==null?void 0:t.processEvent(c))),t.processedBuffer=!0),Object.values(this.apps).every((c=>c.processedBuffer||c.errored))&&((o=this.yr)==null||o.call(this))},i=!1,n=o=>{t.errored=!o,t.loaded=!0,Ge.info("Site app with id "+e.id+" "+(o?"loaded":"errored")),i&&r()};try{var{processEvent:a}=e.init({posthog:this._instance,callback:o=>{n(o)}});a&&(t.processEvent=a),i=!0}catch(o){Ge.error("Error while initializing PostHog app with config id "+e.id,o),n(!1)}if(i&&t.loaded)try{r()}catch(o){Ge.error("Error while processing buffered events PostHog app with config id "+e.id,o),t.errored=!0}}br(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}wr(e){if(Object.keys(this.apps).length!==0){var t=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(t)}catch(i){Ge.error("Error while processing event "+e.event+" for site app "+r.id,i)}}}onRemoteConfig(e){var t,r,i,n=this;if((t=this.siteAppLoaders)!=null&&t.length)return this.isEnabled?(this.br(),void this._instance.on("eventCaptured",(u=>this.wr(u)))):void Ge.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.yr)==null||r.call(this),(i=e.siteApps)!=null&&i.length)if(this.isEnabled){var a=function(u){var d;N["__$$ph_site_app_"+u]=n._instance,(d=N.__PosthogExtensions__)==null||d.loadSiteApp==null||d.loadSiteApp(n._instance,c,(h=>{if(h)return Ge.error("Error while initializing PostHog app with config id "+u,h)}))};for(var{id:o,url:c}of e.siteApps)a(o)}else Ge.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var vo=function(s,e){if(!s)return!1;var t=s.userAgent;if(t&&Ki(t,e))return!0;try{var r=s?.userAgentData;if(r!=null&&r.brands&&r.brands.some((i=>Ki(i?.brand,e))))return!0}catch{}return!!s.webdriver},Qt=(function(s){return s.US="us",s.EU="eu",s.CUSTOM="custom",s})({}),Hn="i.posthog.com";class Nd{constructor(e){this.Er={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+Hn,".posthog.com")),t==="https://app.posthog.com"?"https://us.posthog.com":t}get region(){return this.Er[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Er[this.apiHost]=Qt.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Er[this.apiHost]=Qt.EU:this.Er[this.apiHost]=Qt.CUSTOM),this.Er[this.apiHost]}endpointFor(e,t){if(t===void 0&&(t=""),t&&(t=t[0]==="/"?t:"/"+t),e==="ui")return this.uiHost+t;if(e==="flags")return this.flagsApiHost+t;if(this.region===Qt.CUSTOM)return this.apiHost+t;var r=Hn+t;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var Id={icontains:(s,e)=>!!m&&e.href.toLowerCase().indexOf(s.toLowerCase())>-1,not_icontains:(s,e)=>!!m&&e.href.toLowerCase().indexOf(s.toLowerCase())===-1,regex:(s,e)=>!!m&&Vr(e.href,s),not_regex:(s,e)=>!!m&&!Vr(e.href,s),exact:(s,e)=>e.href===s,is_not:(s,e)=>e.href!==s};class oe{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),t.getWebExperiments((i=>{oe.$r("retrieved web experiments from the server"),t.Sr=new Map,i.forEach((n=>{if(n.feature_flag_key){var a;t.Sr&&(oe.$r("setting flag key ",n.feature_flag_key," to web experiment ",n),(a=t.Sr)==null||a.set(n.feature_flag_key,n));var o=t._instance.getFeatureFlag(n.feature_flag_key);J(o)&&n.variants[o]&&t.kr(n.name,o,n.variants[o].transforms)}else if(n.variants)for(var c in n.variants){var u=n.variants[c];oe.Pr(u)&&t.kr(n.name,c,u.transforms)}}))}),r)},this._instance=e,this._instance.onFeatureFlags((r=>{this.onFeatureFlags(r)}))}onFeatureFlags(e){if(this._is_bot())oe.$r("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(D(this.Sr))return this.Sr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();oe.$r("applying feature flags",e),e.forEach((t=>{var r;if(this.Sr&&(r=this.Sr)!=null&&r.has(t)){var i,n=this._instance.getFeatureFlag(t),a=(i=this.Sr)==null?void 0:i.get(t);n&&a!=null&&a.variants[n]&&this.kr(a.name,n,a.variants[n].transforms)}}))}}previewWebExperiment(){var e=oe.getWindowLocation();if(e!=null&&e.search){var t=Ur(e?.search,"__experiment_id"),r=Ur(e?.search,"__experiment_variant");t&&r&&(oe.$r("previewing web experiments "+t+" && "+r),this.getWebExperiments((i=>{this.Tr(parseInt(t),r,i)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var i=this._instance.get_property("$web_experiments");if(i&&!t)return e(i);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:n=>{if(n.statusCode!==200||!n.json)return e([]);var a=n.json.experiments||[];return e(a)}})}Tr(e,t,r){var i=r.filter((n=>n.id===e));i&&i.length>0&&(oe.$r("Previewing web experiment ["+i[0].name+"] with variant ["+t+"]"),this.kr(i[0].name,t,i[0].variants[t].transforms))}static Pr(e){return!D(e.conditions)&&oe.Ir(e)&&oe.Cr(e)}static Ir(e){var t;if(D(e.conditions)||D((t=e.conditions)==null?void 0:t.url))return!0;var r,i,n,a=oe.getWindowLocation();return!!a&&((r=e.conditions)==null||!r.url||Id[(i=(n=e.conditions)==null?void 0:n.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,a))}static getWindowLocation(){return m?.location}static Cr(e){var t;if(D(e.conditions)||D((t=e.conditions)==null?void 0:t.utm))return!0;var r=Qa();if(r.utm_source){var i,n,a,o,c,u,d,h,v=(i=e.conditions)==null||(i=i.utm)==null||!i.utm_campaign||((n=e.conditions)==null||(n=n.utm)==null?void 0:n.utm_campaign)==r.utm_campaign,f=(a=e.conditions)==null||(a=a.utm)==null||!a.utm_source||((o=e.conditions)==null||(o=o.utm)==null?void 0:o.utm_source)==r.utm_source,p=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_medium||((u=e.conditions)==null||(u=u.utm)==null?void 0:u.utm_medium)==r.utm_medium,_=(d=e.conditions)==null||(d=d.utm)==null||!d.utm_term||((h=e.conditions)==null||(h=h.utm)==null?void 0:h.utm_term)==r.utm_term;return v&&p&&_&&f}return!1}static $r(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];k.info("[WebExperiments] "+e,r)}kr(e,t,r){this._is_bot()?oe.$r("Refusing to render web experiment since the viewer is a likely bot"):t!=="control"?r.forEach((i=>{if(i.selector){var n;oe.$r("applying transform of variant "+t+" for experiment "+e+" ",i);var a=(n=document)==null?void 0:n.querySelectorAll(i.selector);a?.forEach((o=>{var c=o;i.html&&(c.innerHTML=i.html),i.css&&c.setAttribute("style",i.css)}))}})):oe.$r("Control variants leave the page unmodified.")}_is_bot(){return _e&&this._instance?vo(_e,this._instance.config.custom_blocked_useragents):void 0}}var Od=Y("[PostHog ExternalIntegrations]"),Td={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class Ad{constructor(e){this._instance=e}it(e,t){var r;(r=N.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,(i=>{if(i)return Od.error("failed to load script",i);t()}))}startIfEnabledOrStop(){var e=this,t=function(a){var o,c,u;!i||(o=N.__PosthogExtensions__)!=null&&(o=o.integrations)!=null&&o[a]||e.it(Td[a],(()=>{var d;(d=N.__PosthogExtensions__)==null||(d=d.integrations)==null||(d=d[a])==null||d.start(e._instance)})),!i&&(c=N.__PosthogExtensions__)!=null&&(c=c.integrations)!=null&&c[a]&&((u=N.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[a])==null||u.stop())};for(var[r,i]of Object.entries((n=this._instance.config.integrations)!==null&&n!==void 0?n:{})){var n;t(r)}}}var ai="[SessionRecording]",qt=Y(ai);class Un{get started(){var e;return!((e=this.Rr)==null||!e.isStarted)}get status(){return this.Rr?this.Rr.status:this.Fr&&!this.Mr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.Fr=!1,this.Or=void 0,this._instance=e,!this._instance.sessionManager)throw qt.error("started without valid sessionManager"),new Error(ai+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(ai+' cannot be used with cookieless_mode="always"')}get Mr(){var e,t=!((e=this._instance.get_property(hs))==null||!e.enabled),r=!this._instance.config.disable_session_recording,i=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return m&&t&&r&&!i}startIfEnabledOrStop(e){var t;if(!this.Mr||(t=this.Rr)==null||!t.isStarted){var r=!E(Object.assign)&&!E(Array.from);this.Mr&&r?(this.Ar(e),qt.info("starting")):this.stopRecording()}}Ar(e){var t,r,i;this.Mr&&(N!=null&&(t=N.__PosthogExtensions__)!=null&&(t=t.rrweb)!=null&&t.record&&(r=N.__PosthogExtensions__)!=null&&r.initSessionRecording?this.Dr(e):(i=N.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,this.jr,(n=>{if(n)return qt.error("could not load recorder",n);this.Dr(e)})))}stopRecording(){var e,t;(e=this.Or)==null||e.call(this),this.Or=void 0,(t=this.Rr)==null||t.stop()}Lr(){var e;(e=this._instance.persistence)==null||e.unregister(Ta)}Nr(e){if(this._instance.persistence){var t,r,i=this._instance.persistence,n=()=>{var a=e.sessionRecording===!1?void 0:e.sessionRecording,o=a?.sampleRate,c=D(o)?null:parseFloat(o);D(c)&&this.Lr();var u=a?.minimumDurationMilliseconds;i.register({[hs]:C({enabled:!!a},a,{networkPayloadCapture:C({capturePerformance:e.capturePerformance},a?.networkPayloadCapture),canvasRecording:{enabled:a?.recordCanvas,fps:a?.canvasFps,quality:a?.canvasQuality},sampleRate:c,minimumDurationMilliseconds:E(u)?null:u,endpoint:a?.endpoint,triggerMatchType:a?.triggerMatchType,masking:a?.masking,urlTriggers:a?.urlTriggers})})};n(),(t=this.Or)==null||t.call(this),this.Or=(r=this._instance.sessionManager)==null?void 0:r.onSessionId(n)}}onRemoteConfig(e){"sessionRecording"in e?e.sessionRecording!==!1?(this.Nr(e),this.Fr=!0,this.startIfEnabledOrStop()):this.Fr=!0:qt.info("skipping remote config with no sessionRecording",e)}log(e,t){var r;t===void 0&&(t="log"),(r=this.Rr)!=null&&r.log?this.Rr.log(e,t):qt.warn("log called before recorder was ready")}get jr(){var e,t,r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.get_property(hs);return(r==null||(t=r.scriptConfig)==null?void 0:t.script)||"lazy-recorder"}Dr(e){var t,r;if((t=N.__PosthogExtensions__)==null||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Rr||(this.Rr=(r=N.__PosthogExtensions__)==null?void 0:r.initSessionRecording(this._instance),this.Rr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Rr.start(e)}onRRwebEmit(e){var t;(t=this.Rr)==null||t.onRRwebEmit==null||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.Rr||(t=this._instance.persistence)==null||t.register({$replay_override_linked_flag:!0}),(e=this.Rr)==null||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.Rr||(t=this._instance.persistence)==null||t.register({$replay_override_sampling:!0}),(e=this.Rr)==null||e.overrideSampling()}overrideTrigger(e){var t,r;this.Rr||(r=this._instance.persistence)==null||r.register({[e==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(t=this.Rr)==null||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.Rr)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var r;return!((r=this.Rr)==null||!r.tryAddCustomEvent(e,t))}}var tr={},oi=()=>{},ft="posthog",mo=!od&&he?.indexOf("MSIE")===-1&&he?.indexOf("Mozilla")===-1,qn=s=>{var e;return C({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:hu(S?.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:oi,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:s??"unset",__preview_deferred_init_extensions:!1,debug:pe&&J(pe?.search)&&pe.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(m==null||(e=m.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var r="Bad HTTP status: "+t.statusCode+" "+t.text;k.error(r)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:ni},error_tracking:{},_onCapture:oi,__preview_eager_load_replay:!1},(t=>({rageclick:!(t&&t>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(t&&t>="2025-05-24")||"history_change",session_recording:t&&t>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(s))},zn=s=>{var e={};E(s.process_person)||(e.person_profiles=s.process_person),E(s.xhr_headers)||(e.request_headers=s.xhr_headers),E(s.cookie_name)||(e.persistence_name=s.cookie_name),E(s.disable_cookie)||(e.disable_persistence=s.disable_cookie),E(s.store_google)||(e.save_campaign_params=s.store_google),E(s.verbose)||(e.debug=s.verbose);var t=K({},e,s);return B(s.property_blacklist)&&(E(s.property_denylist)?t.property_denylist=s.property_blacklist:B(s.property_denylist)?t.property_denylist=[...s.property_blacklist,...s.property_denylist]:k.error("Invalid value for property_denylist config: "+s.property_denylist)),t};class Fd{constructor(){this.__forceAllowLocalhost=!1}get Ur(){return this.__forceAllowLocalhost}set Ur(e){k.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Zr{get decideEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new Fd,this.zr=!1,this.version=Te.LIB_VERSION,this.Hr=new Si,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=qn(),this.SentryIntegration=Hu,this.sentryIntegration=e=>(function(t,r){var i=Za(t,r);return{name:Ja,processEvent:n=>i(n)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Br=!1,this.qr=null,this.Wr=null,this.Gr=null,this.featureFlags=new dd(this),this.toolbar=new qu(this),this.scrollManager=new Cd(this),this.pageViewManager=new kn(this),this.surveys=new bd(this),this.conversations=new xd(this),this.experiments=new oe(this),this.exceptions=new ld(this),this.rateLimiter=new wd(this),this.requestRouter=new Nd(this),this.consent=new Au(this),this.externalIntegrations=new Ad(this),this.people={set:(e,t,r)=>{var i=J(e)?{[e]:t}:e;this.setPersonProperties(i),r?.({})},set_once:(e,t,r)=>{var i=J(e)?{[e]:t}:e;this.setPersonProperties(void 0,i),r?.({})}},this.on("eventCaptured",(e=>k.info('send "'+e?.event+'"',e)))}init(e,t,r){if(r&&r!==ft){var i,n=(i=tr[r])!==null&&i!==void 0?i:new Zr;return n._init(e,t,r),tr[r]=n,tr[ft][r]=n,n}return this._init(e,t,r)}_init(e,t,r){var i;if(t===void 0&&(t={}),E(e)||Hs(e))return k.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Vr(t.debug),this.Jr=t,this.Kr=[],t.person_profiles&&(this.Wr=t.person_profiles),this.set_config(K({},qn(t.defaults),zn(t),{name:r,token:e})),this.config.on_xhr_error&&k.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:Le.GZipJS;var n=this.Yr();this.persistence=new ws(this.config,n),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ws(C({},this.config,{persistence:"sessionStorage"}),n);var a=C({},this.persistence.props),o=C({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Xr=new kd((j=>this.Qr(j)),this.config.request_queue_config),this.Zr=new jd(this),this.__request_queue=[];var c=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(c||(this.sessionManager=new Bn(this),this.sessionPropsManager=new Dn(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(k.info("Deferring extension initialization to improve startup performance"),setTimeout((()=>{this.ts(c)}),0)):(k.info("Initializing extensions synchronously"),this.ts(c)),Te.DEBUG=Te.DEBUG||this.config.debug,Te.DEBUG&&k.info("Starting in debug mode",{this:this,config:t,thisC:C({},this.config),p:a,s:o}),((i=t.bootstrap)==null?void 0:i.distinctID)!==void 0){var u,d,h=this.config.get_device_id(Ve()),v=(u=t.bootstrap)!=null&&u.isIdentifiedID?h:t.bootstrap.distinctID;this.persistence.set_property(Ae,(d=t.bootstrap)!=null&&d.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:v})}if(this.es()){var f,p,_=Object.keys(((f=t.bootstrap)==null?void 0:f.featureFlags)||{}).filter((j=>{var x;return!((x=t.bootstrap)==null||(x=x.featureFlags)==null||!x[j])})).reduce(((j,x)=>{var P;return j[x]=((P=t.bootstrap)==null||(P=P.featureFlags)==null?void 0:P[x])||!1,j}),{}),y=Object.keys(((p=t.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter((j=>_[j])).reduce(((j,x)=>{var P,M;return(P=t.bootstrap)!=null&&(P=P.featureFlagPayloads)!=null&&P[x]&&(j[x]=(M=t.bootstrap)==null||(M=M.featureFlagPayloads)==null?void 0:M[x]),j}),{});this.featureFlags.receivedFeatureFlags({featureFlags:_,featureFlagPayloads:y})}if(c)this.register_once({distinct_id:Tt,$device_id:null},"");else if(!this.get_distinct_id()){var w=this.config.get_device_id(Ve());this.register_once({distinct_id:w,$device_id:w},""),this.persistence.set_property(Ae,"anonymous")}return X(m,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?Bu(this,(()=>this.rs())):this.rs(),Ke(this.config._onCapture)&&this.config._onCapture!==oi&&(k.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(j=>this.config._onCapture(j.event,j)))),this.config.ip&&k.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}ts(e){var t=performance.now();this.historyAutocapture=new Du(this),this.historyAutocapture.startIfEnabled();var r=[];r.push((()=>{new Gu(this).startIfEnabledOrStop()})),r.push((()=>{var i;this.siteApps=new Rd(this),(i=this.siteApps)==null||i.init()})),e||r.push((()=>{this.sessionRecording=new Un(this),this.sessionRecording.startIfEnabledOrStop()})),this.config.disable_scroll_properties||r.push((()=>{this.scrollManager.startMeasuringScrollPosition()})),r.push((()=>{this.autocapture=new Cu(this),this.autocapture.startIfEnabled()})),r.push((()=>{this.surveys.loadIfEnabled()})),r.push((()=>{this.conversations.loadIfEnabled()})),r.push((()=>{this.productTours=new pd(this),this.productTours.loadIfEnabled()})),r.push((()=>{this.heatmaps=new Zu(this),this.heatmaps.startIfEnabled()})),r.push((()=>{this.webVitalsAutocapture=new Xu(this)})),r.push((()=>{this.exceptionObserver=new Lu(this),this.exceptionObserver.startIfEnabledOrStop()})),r.push((()=>{this.deadClicksAutocapture=new Xa(this,Mu),this.deadClicksAutocapture.startIfEnabled()})),r.push((()=>{if(this.ss){var i=this.ss;this.ss=void 0,this.yi(i)}})),this.ns(r,t)}ns(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout((()=>{this.ns(e,t)}),0);var r=e.shift();if(r)try{r()}catch(n){k.error("Error initializing extension:",n)}}var i=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:i}),this.config.__preview_deferred_init_extensions&&k.info("PostHog extensions initialized ("+i+"ms)")}yi(e){var t,r,i,n,a,o,c,u,d;if(!S||!S.body)return k.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.yi(e)}),500);this.config.__preview_deferred_init_extensions&&(this.ss=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=F(e.supportedCompression,Le.GZipJS)?Le.GZipJS:F(e.supportedCompression,Le.Base64)?Le.Base64:void 0),(t=e.analytics)!=null&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Wr?this.Wr:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(i=this.sessionRecording)==null||i.onRemoteConfig(e),(n=this.autocapture)==null||n.onRemoteConfig(e),(a=this.heatmaps)==null||a.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.conversations.onRemoteConfig(e),(o=this.productTours)==null||o.onRemoteConfig(e),(c=this.webVitalsAutocapture)==null||c.onRemoteConfig(e),(u=this.exceptionObserver)==null||u.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(d=this.deadClicksAutocapture)==null||d.onRemoteConfig(e)}rs(){try{this.config.loaded(this)}catch(e){k.critical("`loaded` function failed",e)}this.os(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.ls()}),1),new Ed(this).load(),this.featureFlags.flags()}os(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.Xr)==null||e.enable())}_dom_loaded(){this.is_capturing()&&Ye(this.__request_queue,(e=>this.Qr(e))),this.__request_queue=[],this.os()}_handle_unload(){var e,t;this.surveys.handlePageUnload(),this.config.request_batching?(this.us()&&this.capture("$pageleave"),(e=this.Xr)==null||e.unload(),(t=this.Zr)==null||t.unload()):this.us()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(mo?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Wr(e.url,{ip:this.config.ip?1:0}),e.headers=C({},this.config.request_headers,e.headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(t=>{var r,i,n,a=C({},t);a.timeout=a.timeout||6e4,a.url=Wr(a.url,{_:new Date().getTime().toString(),ver:Te.LIB_VERSION,compression:a.compression});var o=(r=a.transport)!==null&&r!==void 0?r:"fetch",c=Rr.filter((d=>!a.disableTransport||!d.transport||!a.disableTransport.includes(d.transport))),u=(i=(n=Na(c,(d=>d.transport===o)))==null?void 0:n.method)!==null&&i!==void 0?i:c[0].method;if(!u)throw new Error("No available transport method");u(a)})(C({},e,{callback:t=>{var r,i;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,t)),e.callback==null||e.callback(t)}}))))}Qr(e){this.Zr?this.Zr.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,r=[],i=[],n=[];Ye(e,(o=>{o&&(t=o[0],B(t)?n.push(o):Ke(o)?o.call(this):B(o)&&t==="alias"?r.push(o):B(o)&&t.indexOf("capture")!==-1&&Ke(this[t])?n.push(o):i.push(o))}));var a=function(o,c){Ye(o,(function(u){if(B(u[0])){var d=c;U(u,(function(h){d=d[h[0]].apply(d,h.slice(1))}))}else this[u[0]].apply(this,u.slice(1))}),c)};a(r,this),a(i,this),a(n,this)}es(){var e,t;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((t=this.config.bootstrap)==null?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Xr){if(this.is_capturing())if(!E(e)&&J(e)){var n=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(n&&!this.config.__preview_capture_bot_pageviews)){var a=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(a==null||!a.isRateLimited){t!=null&&t.$current_url&&!J(t?.$current_url)&&(k.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),t==null||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,c=r?.timestamp||o,u=Ve(),d={uuid:u,event:e,properties:this.calculateEventProperties(e,t||{},c,u)};e==="$pageview"&&this.config.__preview_capture_bot_pageviews&&n&&(d.event="$bot_pageview",d.properties.$browser_type="bot"),a&&(d.properties.$lib_rate_limit_remaining_tokens=a.remainingTokens),r?.$set&&(d.$set=r?.$set);var h,v=e!=="$groupidentify",f=this.hs(r?.$set_once,v);if(f&&(d.$set_once=f),(d=uu(d,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=c,E(r?.timestamp)||(d.properties.$event_time_override_provided=!0,d.properties.$event_time_override_system_time=o),e===Nr.DISMISSED||e===Nr.SENT){var p=t?.[Fn.SURVEY_ID],_=t?.[Fn.SURVEY_ITERATION];h={id:p,current_iteration:_},localStorage.getItem(Mn(h))||localStorage.setItem(Mn(h),"true"),d.$set=C({},d.$set,{[fd({id:p,current_iteration:_},e===Nr.SENT?"responded":"dismissed")]:!0})}var y=C({},d.properties.$set,d.$set);if(_t(y)||this.setPersonPropertiesForFlags(y),!D(this.config.before_send)){var w=this.ds(d);if(!w)return;d=w}this.Hr.emit("eventCaptured",d);var j={method:"POST",url:(i=r?._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:d,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Qr(j):this.Xr.enqueue(j),d}k.critical("This capture call is ignored due to client rate limiting.")}}else k.error("No event name provided to posthog.capture")}else k.uninitializedWarning("posthog.capture")}Hi(e){return this.on("eventCaptured",(t=>e(t.event,t)))}calculateEventProperties(e,t,r,i,n){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var a=n?void 0:this.persistence.remove_event_timer(e),o=C({},t);if(o.token=this.config.token,o.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(o.$cookieless_mode=!0),e==="$snapshot"){var c=C({},this.persistence.properties(),this.sessionPersistence.properties());return o.distinct_id=c.distinct_id,(!J(o.distinct_id)&&!Ne(o.distinct_id)||Hs(o.distinct_id))&&k.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var u,d=Yu(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:h,windowId:v}=this.sessionManager.checkAndGetSessionAndWindowId(n,r.getTime());o.$session_id=h,o.$window_id=v}this.sessionPropsManager&&K(o,this.sessionPropsManager.getSessionProps());try{var f;this.sessionRecording&&K(o,this.sessionRecording.sdkDebugProperties),o.$sdk_debug_retry_queue_size=(f=this.Zr)==null?void 0:f.length}catch(w){o.$sdk_debug_error_capturing_properties=String(w)}if(this.requestRouter.region===Qt.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),u=e!=="$pageview"||n?e!=="$pageleave"||n?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,i),o=K(o,u),e==="$pageview"&&S&&(o.title=S.title),!E(a)){var p=r.getTime()-a;o.$duration=parseFloat((p/1e3).toFixed(3))}he&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=K({},d,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),B(this.config.property_denylist)?U(this.config.property_denylist,(function(w){delete o[w]})):k.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var _=this.config.sanitize_properties;_&&(k.error("sanitize_properties is deprecated. Use before_send instead"),o=_(o,e));var y=this.vs();return o.$process_person_profile=y,y&&!n&&this.cs("_calculate_event_properties"),o}hs(e,t){var r;if(t===void 0&&(t=!0),!this.persistence||!this.vs()||this.zr)return e;var i=this.persistence.get_initial_props(),n=(r=this.sessionPropsManager)==null?void 0:r.getSetOnceProps(),a=K({},i,n||{},e||{}),o=this.config.sanitize_properties;return o&&(k.error("sanitize_properties is deprecated. Use before_send instead"),a=o(a,"$set_once")),t&&(this.zr=!0),_t(a)?void 0:a}register(e,t){var r;(r=this.persistence)==null||r.register(e,t)}register_once(e,t,r){var i;(i=this.persistence)==null||i.register_once(e,t,r)}register_for_session(e){var t;(t=this.sessionPersistence)==null||t.register(e)}unregister(e){var t;(t=this.persistence)==null||t.unregister(e)}unregister_for_session(e){var t;(t=this.sessionPersistence)==null||t.unregister(e)}fs(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(e,t,r){var i=r!=null&&r.merge?this.featureFlags.getFlagVariants():{},n=r!=null&&r.merge?this.featureFlags.getFlagPayloads():{},a=C({},i,e),o=C({},n,t),c={};for(var[u,d]of Object.entries(a)){var h=typeof d=="string";c[u]={key:u,enabled:!!h||!!d,variant:h?d:void 0,reason:void 0,metadata:E(o?.[u])?void 0:{id:0,version:void 0,description:void 0,payload:o[u]}}}this.featureFlags.receivedFeatureFlags({flags:c})}updateEarlyAccessFeatureEnrollment(e,t,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,r)}getEarlyAccessFeatures(e,t,r){return t===void 0&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,r)}on(e,t){return this.Hr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,r;return(t=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&t!==void 0?t:()=>{}}getSurveys(e,t){t===void 0&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){t===void 0&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){t===void 0&&(t=vd),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return t===void 0&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,r){if(!this.__loaded||!this.persistence)return k.uninitializedWarning("posthog.identify");if(Ne(e)&&(e=e.toString(),k.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))k.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Tt){if(this.cs("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var n=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:n},"")}e!==i&&e!==this.get_property(Kt)&&(this.unregister(Kt),this.register({distinct_id:e}));var a=(this.persistence.get_property(Ae)||"anonymous")==="anonymous";e!==i&&a?(this.persistence.set_property(Ae,"identified"),this.setPersonPropertiesForFlags(C({},r||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:t||{},$set_once:r||{}}),this.Gr=Rn(e,t,r),this.featureFlags.setAnonymousDistinctId(i)):(t||r)&&this.setPersonProperties(t,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(Mr))}}else k.critical('The string "'+Tt+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else k.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.cs("posthog.setPersonProperties")){var r=Rn(this.get_distinct_id(),e,t);this.Gr!==r?(this.setPersonPropertiesForFlags(C({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Gr=r):k.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,r){if(e&&t){var i=this.getGroups();i[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:C({},i,{[e]:t})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===t||r||this.reloadFeatureFlags()}else k.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0),this.cs("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,r,i,n;if(k.info("reset"),!this.__loaded)return k.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),(t=this.persistence)==null||t.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(i=this.persistence)==null||i.set_property(Ae,"anonymous"),(n=this.sessionManager)==null||n.resetSessionId(),this.Gr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Tt,$device_id:null},"");else{var o=this.config.get_device_id(Ve());this.register_once({distinct_id:o,$device_id:e?o:a},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return(e=(t=this.sessionManager)==null?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(e!=null&&e.withTimestamp&&r){var n,a=(n=e.timestampLookBack)!==null&&n!==void 0?n:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-a,0)}return i}alias(e,t){return e===this.get_property(Ia)?(k.critical("Attempting to create alias for existing People user - aborting."),-2):this.cs("posthog.alias")?(E(t)&&(t=this.get_distinct_id()),e!==t?(this.fs(Kt,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(k.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=C({},this.config);if(Q(e)){var r,i,n,a,o,c,u;K(this.config,zn(e));var d=this.Yr();(r=this.persistence)==null||r.update_config(this.config,t,d),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ws(C({},this.config,{persistence:"sessionStorage"}),d);var h=this.Vr(this.config.debug);Ue(h)&&(this.config.debug=h),Ue(this.config.debug)&&(this.config.debug?(Te.DEBUG=!0,G.H()&&G.G("ph_debug","true"),k.info("set_config",{config:e,oldConfig:t,newConfig:C({},this.config)})):(Te.DEBUG=!1,G.H()&&G.V("ph_debug"))),(i=this.exceptionObserver)==null||i.onConfigChange(),(n=this.sessionRecording)==null||n.startIfEnabledOrStop(),(a=this.autocapture)==null||a.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),(c=this.exceptionObserver)==null||c.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this.ps(),(u=this.externalIntegrations)==null||u.startIfEnabledOrStop()}}startSessionRecording(e){var t=e===!0,r={sampling:t||!(e==null||!e.sampling),linked_flag:t||!(e==null||!e.linked_flag),url_trigger:t||!(e==null||!e.url_trigger),event_trigger:t||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,n,a,o,c;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((n=this.sessionRecording)==null||n.overrideSampling()),r.linked_flag&&((a=this.sessionRecording)==null||a.overrideLinkedFlag()),r.url_trigger&&((o=this.sessionRecording)==null||o.overrideTrigger("url")),r.event_trigger&&((c=this.sessionRecording)==null||c.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,t){var r=new Error("PostHog syntheticException"),i=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(C({},i,t))}startExceptionAutocapture(e){this.set_config({capture_exceptions:e==null||e})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return(t=this.persistence)==null?void 0:t.props[e]}getSessionProperty(e){var t;return(t=this.sessionPersistence)==null?void 0:t.props[e]}toString(){var e,t=(e=this.config.name)!==null&&e!==void 0?e:ft;return t!==ft&&(t=ft+"."+t),t}_isIdentified(){var e,t;return((e=this.persistence)==null?void 0:e.get_property(Ae))==="identified"||((t=this.sessionPersistence)==null?void 0:t.get_property(Ae))==="identified"}vs(){var e,t;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&_t(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Kt])&&((t=this.persistence)==null||(t=t.props)==null||!t[Dr]))}us(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.vs()||this.cs("posthog.createPersonProfile")&&this.setPersonProperties({},{})}cs(e){return this.config.person_profiles==="never"?(k.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.fs(Dr,!0),!0)}Yr(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!t}ps(){var e,t,r,i,n=this.Yr();return((e=this.persistence)==null?void 0:e.Si)!==n&&((r=this.persistence)==null||r.set_disabled(n)),((t=this.sessionPersistence)==null?void 0:t.Si)!==n&&((i=this.sessionPersistence)==null||i.set_disabled(n)),n}opt_in_capturing(e){var t;if(this.config.cookieless_mode!=="always"){var r,i,n;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(r=this.sessionManager)==null||r.destroy(),(i=this.pageViewManager)==null||i.destroy(),this.sessionManager=new Bn(this),this.pageViewManager=new kn(this),this.persistence&&(this.sessionPropsManager=new Dn(this,this.sessionManager,this.persistence)),this.sessionRecording=new Un(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.ps(),this.os(),(t=this.sessionRecording)==null||t.startIfEnabledOrStop(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(E(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e?.captureEventName)!==null&&n!==void 0?n:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.ls()}else k.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t,r;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.ps(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Tt,$device_id:null}),(e=this.sessionManager)==null||e.destroy(),(t=this.pageViewManager)==null||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(r=this.sessionRecording)==null||r.stopRecording(),this.sessionRecording=void 0,this.ls())):k.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===Fe.GRANTED?"granted":e===Fe.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.ps()}_is_bot(){return _e?vo(_e,this.config.custom_blocked_useragents):void 0}ls(){S&&(S.visibilityState==="visible"?this.Br||(this.Br=!0,this.capture("$pageview",{title:S.title},{send_instantly:!0}),this.qr&&(S.removeEventListener("visibilitychange",this.qr),this.qr=null)):this.qr||(this.qr=this.ls.bind(this),X(S,"visibilitychange",this.qr)))}debug(e){e===!1?(m?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(m?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,r,i,n,a,o,c=this.Jr||{};return"advanced_disable_flags"in c?!!c.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(k.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",i=!1,n=k,a=(t="advanced_disable_flags")in(e=c)&&!E(e[t]),o=r in e&&!E(e[r]),a?e[t]:o?(n&&n.warn("Config field '"+r+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[r]):i)}ds(e){if(D(this.config.before_send))return e;var t=B(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of t){if(r=i(r),D(r)){var n="Event '"+e.event+"' was rejected in beforeSend function";return Cc(e.event)?k.warn(n+". This can cause unexpected behavior."):k.info(n),null}r.properties&&!_t(r.properties)||k.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.Kt)==null?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(r)})}Vr(e){var t=Ue(e)&&!e,r=G.H()&&G.q("ph_debug")==="true";return!t&&(!!r||e)}}(function(s,e){for(var t=0;t<e.length;t++)s.prototype[e[t]]=cu(s.prototype[e[t]])})(Zr,["identify"]);var Gn,gt=(Gn=tr[ft]=new Zr,(function(){function s(){s.done||(s.done=!0,mo=!1,U(tr,(function(e){e._dom_loaded()})))}S!=null&&S.addEventListener?S.readyState==="complete"?s():X(S,"DOMContentLoaded",s,{capture:!1}):m&&k.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),Gn),_o=g.createContext({client:gt,bootstrap:void 0});function yo(s,e,t){if(t===void 0&&(t=new WeakMap),s===e)return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(t.has(s)&&t.get(s)===e)return!0;t.set(s,e);var r=Object.keys(s),i=Object.keys(e);if(r.length!==i.length)return!1;for(var n=0,a=r;n<a.length;n++){var o=a[n];if(!i.includes(o)||!yo(s[o],e[o],t))return!1}return!0}function Md(s){var e,t,r=s.children,i=s.client,n=s.apiKey,a=s.options,o=g.useRef(null),c=g.useMemo(function(){return i?(n&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),a&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),i):(n||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),gt)},[i,n,JSON.stringify(a)]);return g.useEffect(function(){if(!i){var u=o.current;u?(n!==u.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),a&&!yo(a,u.options)&&gt.set_config(a),o.current={apiKey:n,options:a??{}}):(gt.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),gt.init(n,a),o.current={apiKey:n,options:a??{}})}},[i,n,JSON.stringify(a)]),pt.createElement(_o.Provider,{value:{client:c,bootstrap:(e=a?.bootstrap)!==null&&e!==void 0?e:(t=i?.config)===null||t===void 0?void 0:t.bootstrap}},r)}var js=function(s){return typeof s=="function"},li=function(s,e){return li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},li(s,e)};function Ld(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");li(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Dd={componentStack:null,exceptionEvent:null,error:null},Bd={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(s){Ld(e,s);function e(t){var r=s.call(this,t)||this;return r.state=Dd,r}return e.prototype.componentDidCatch=function(t,r){var i=this.props.additionalProperties,n;js(i)?n=i(t):typeof i=="object"&&(n=i);var a=this.context.client,o=a.captureException(t,n),c=r.componentStack;this.setState({error:t,componentStack:c??null,exceptionEvent:o})},e.prototype.render=function(){var t=this.props,r=t.children,i=t.fallback,n=this.state;if(n.componentStack==null)return js(r)?r():r;var a=js(i)?pt.createElement(i,{error:n.error,componentStack:n.componentStack,exceptionEvent:n.exceptionEvent}):i;return pt.isValidElement(a)?a:(console.warn(Bd.INVALID_FALLBACK),pt.createElement(pt.Fragment,null))},e.contextType=_o,e})(pt.Component);function Hd(s,e=[]){let t=[];function r(n,a){const o=g.createContext(a),c=t.length;t=[...t,a];const u=h=>{const{scope:v,children:f,...p}=h,_=v?.[s]?.[c]||o,y=g.useMemo(()=>p,Object.values(p));return l.jsx(_.Provider,{value:y,children:f})};u.displayName=n+"Provider";function d(h,v){const f=v?.[s]?.[c]||o,p=g.useContext(f);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${n}\``)}return[u,d]}const i=()=>{const n=t.map(a=>g.createContext(a));return function(o){const c=o?.[s]||n;return g.useMemo(()=>({[`__scope${s}`]:{...o,[s]:c}}),[o,c])}};return i.scopeName=s,[r,Ud(i,...e)]}function Ud(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(n){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const h=c(n)[`__scope${u}`];return{...o,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function qd(s){const e=zd(s),t=g.forwardRef((r,i)=>{const{children:n,...a}=r,o=g.Children.toArray(n),c=o.find(Wd);if(c){const u=c.props.children,d=o.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...a,ref:i,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...a,ref:i,children:n})});return t.displayName=`${s}.Slot`,t}function zd(s){const e=g.forwardRef((t,r)=>{const{children:i,...n}=t;if(g.isValidElement(i)){const a=Kd(i),o=Vd(n,i.props);return i.type!==g.Fragment&&(o.ref=r?at(r,a):a),g.cloneElement(i,o)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var Gd=Symbol("radix.slottable");function Wd(s){return g.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Gd}function Vd(s,e){const t={...e};for(const r in e){const i=s[r],n=e[r];/^on[A-Z]/.test(r)?i&&n?t[r]=(...o)=>{const c=n(...o);return i(...o),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...n}:r==="className"&&(t[r]=[i,n].filter(Boolean).join(" "))}return{...s,...t}}function Kd(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var Yd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ji=Yd.reduce((s,e)=>{const t=qd(`Primitive.${e}`),r=g.forwardRef((i,n)=>{const{asChild:a,...o}=i,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${e}`,{...s,[e]:r}},{}),Qr="Collapsible",[Xd]=Hd(Qr),[Jd,Ci]=Xd(Qr),bo=g.forwardRef((s,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:i,disabled:n,onOpenChange:a,...o}=s,[c,u]=ta({prop:r,defaultProp:i??!1,onChange:a,caller:Qr});return l.jsx(Jd,{scope:t,disabled:n,contentId:nt(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:l.jsx(ji.div,{"data-state":$i(c),"data-disabled":n?"":void 0,...o,ref:e})})});bo.displayName=Qr;var xo="CollapsibleTrigger",wo=g.forwardRef((s,e)=>{const{__scopeCollapsible:t,...r}=s,i=Ci(xo,t);return l.jsx(ji.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":$i(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ra(s.onClick,i.onOpenToggle)})});wo.displayName=xo;var Pi="CollapsibleContent",Eo=g.forwardRef((s,e)=>{const{forceMount:t,...r}=s,i=Ci(Pi,s.__scopeCollapsible);return l.jsx(Hl,{present:t||i.open,children:({present:n})=>l.jsx(Zd,{...r,ref:e,present:n})})});Eo.displayName=Pi;var Zd=g.forwardRef((s,e)=>{const{__scopeCollapsible:t,present:r,children:i,...n}=s,a=Ci(Pi,t),[o,c]=g.useState(r),u=g.useRef(null),d=fi(e,u),h=g.useRef(0),v=h.current,f=g.useRef(0),p=f.current,_=a.open||o,y=g.useRef(_),w=g.useRef(void 0);return g.useEffect(()=>{const j=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(j)},[]),Ul(()=>{const j=u.current;if(j){w.current=w.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const x=j.getBoundingClientRect();h.current=x.height,f.current=x.width,y.current||(j.style.transitionDuration=w.current.transitionDuration,j.style.animationName=w.current.animationName),c(r)}},[a.open,r]),l.jsx(ji.div,{"data-state":$i(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!_,...n,ref:d,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...s.style},children:_&&i})});function $i(s){return s?"open":"closed"}var Qd=bo;function eh({...s}){return l.jsx(Qd,{"data-slot":"collapsible",...s})}function th({...s}){return l.jsx(wo,{"data-slot":"collapsible-trigger",...s})}function rh({...s}){return l.jsx(Eo,{"data-slot":"collapsible-content",className:Z("overflow-hidden data-[state=open]:animate-collapsible-down data-[state=closed]:animate-collapsible-up",s.className),...s})}const sh=({title:s,titleId:e,...t},r)=>l.jsxs("svg",{viewBox:"0 0 640 640",width:"1.2em",height:"1.2em",ref:r,"aria-labelledby":e,...t,children:[s?l.jsx("title",{id:e,children:s}):null,l.jsx("path",{fill:"currentColor",d:"M524.5 133.8c-.2-.3-.4-.6-.8-.7c-38.1-17.5-78.4-30-119.7-37.1c-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6c-44.6-6.8-89.9-6.8-134.4 0c-4.5-10.5-9.5-20.7-15.1-30.6c-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2c-41.3 7.1-81.6 19.6-119.7 37.1c-.3.1-.6.4-.8.7c-76.2 113.8-97.1 224.9-86.9 334.5c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2c.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8c.1-.2.2-.5.2-.8s0-.5-.1-.8s-.2-.5-.4-.6s-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9c-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9s0-.6.2-.9s.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1c.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0c.3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2c.2.2.4.4.6.7s.2.6.2.9q0 .45-.3.9t-.6.6c-14.7 8.6-30 15.9-45.9 21.8c-.2.1-.5.2-.7.4s-.3.4-.4.7s-.1.5-.1.8s.1.5.2.8c8.8 17 18.8 33.3 30 48.8c.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2c.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2c0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2c0 32.7-23.2 59.2-52.8 59.2"})]}),ih=g.forwardRef(sh),ko=[{label:"Home",href:"/",icon:fl,experimental:!1,kbd:"  H"},{label:"Tools",icon:gl,experimental:!1,children:Gl.map(s=>({label:s.label,href:`/tools/${s.id}`,experimental:!1,icon:s.icon}))},{label:"Gmaes",icon:vl,experimental:!0,children:[{label:"All Gmaes",href:"/g",kbd:"  G"},...zl.map(s=>({label:s.name,href:`/g/${s.id}`}))]},{label:"Backups",href:"/backups",icon:ml,experimental:!0},{label:"Admin",href:"/admin",icon:Jn,requiresAdmin:!0},{label:"Discord",href:"https://discord.gg/AFec9wNar8",icon:ih,experimental:!0,newTab:!0},{label:"About",href:"/about",icon:_l,experimental:!0},{label:"Privacy",href:"/privacy",icon:yl,experimental:!0}];function Me({className:s,...e}){return l.jsx("kbd",{"data-slot":"kbd",className:Z("bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium select-none","[&_svg:not([class*='size-'])]:size-3","[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10",s),...e})}function rr({className:s,...e}){return l.jsx("kbd",{"data-slot":"kbd-group",className:Z("inline-flex items-center gap-1",s),...e})}const Kr={default:{name:"Default",dark:!0,light:!0},terminal:{name:"Terminal",dark:!0,light:!1},catppuccin:{name:"Catppuccin",dark:!0,light:!0},"better-catppuccin":{name:"Better Catppuccin",dark:!0,light:!0},mono:{name:"Mono",dark:!0,light:!0},noeco:{name:"Noe Co.",dark:!0,light:!1},"ingo-au":{name:"ingo.au",dark:!0,light:!1}};function nh({children:s,isValidProp:e,...t}){e&&Jl(e),t={...g.useContext(Bi),...t},t.isStatic=Xl(()=>t.isStatic);const r=g.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return l.jsx(Bi.Provider,{value:r,children:s})}function ah(){const s=Xn(),e=W(u=>u.setSearchOpen),t=Ko(),r=Se(u=>u.enabled),i=na(sa.auth.getCurrentUser),n=V(u=>u.disableAllBlur),a=u=>l.jsxs(l.Fragment,{children:[u.icon&&l.jsx(u.icon,{}),l.jsx("span",{children:u.label}),u.kbd&&l.jsx(rr,{className:"ml-auto",children:u.kbd.split(" ").map(d=>l.jsx(Me,{children:d},d))}),u.children&&u.children.length>0&&l.jsx(El,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),o=i?.role==="admin",c=ko.filter(u=>!(u.experimental&&!r)&&!(u.requiresAdmin&&!o));return r?l.jsxs(sl,{variant:"inset",className:ql("p-0 duration-200 transition-all ease-out",!s.open&&!n&&"blur-lg opacity-0"),children:[l.jsx(il,{children:l.jsxs(is,{children:[l.jsx(Pt,{children:l.jsx($t,{size:"lg",asChild:!0,children:l.jsxs(it,{to:"/",children:[l.jsx("div",{className:"text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:l.jsx("img",{src:"/edutools-black.svg",className:"dark:invert size-6",alt:""})}),l.jsx("div",{className:"flex flex-col gap-0.5 leading-none",children:l.jsx("span",{className:"font-medium",children:"EduTools"})})]})})}),l.jsx(Pt,{children:l.jsxs($t,{onClick:()=>e(!0),className:"border cursor-text",children:[l.jsx(pi,{className:"size-4"}),"Search",l.jsxs(rr,{className:"ml-auto",children:[l.jsx(Me,{className:"text-nowrap",children:""}),l.jsx(Me,{className:"text-nowrap",children:"K"})]})]})})]})}),l.jsx(nl,{children:l.jsx(al,{children:l.jsx(ol,{children:l.jsx(is,{children:l.jsx(ia,{mode:"popLayout",initial:!1,children:c.map(u=>{const d=(h,v=!1)=>{const f=a(h);if(h.href){const p=v?$t:$t;return l.jsx(p,{isActive:h.href==t.pathname,asChild:!0,children:l.jsx(it,{to:h.href,target:h.newTab?"_blank":"_self",children:f})})}return l.jsx($t,{children:f})};return u.children&&u.children.length>0?l.jsx(Ir.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:Os},layout:!0,children:l.jsx(eh,{className:"group/collapsible",defaultOpen:u.children.some(h=>h.href==t.pathname),children:l.jsxs(Pt,{children:[l.jsx(th,{className:"sticky top-0 z-10 bg-sidebar/50 backdrop-blur-2xl",asChild:!0,children:d(u)}),l.jsx(rh,{children:l.jsx(ll,{children:u.children.map(h=>l.jsx(cl,{children:d(h,!0)},h.label))})})]})})},u.label):l.jsx(Ir.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:Os},layout:!0,children:l.jsx(Pt,{children:d(u)})},u.label)})})})})})}),l.jsx(ul,{children:l.jsx(is,{children:l.jsx(Pt,{children:l.jsxs("div",{className:"p-4 flex flex-col border rounded-lg text-sm gap-2 opacity-25 hover:opacity-100 duration-200 bg-muted",children:[l.jsxs(it,{to:"https://github.com/EducationalTools/src",target:"_blank",className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(bl,{}),"EducationalTools/src"]}),l.jsxs("div",{className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(xl,{}),"prod"]}),l.jsxs("div",{className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(wl,{}),"Built on"," ",new Date(1767764744232).toLocaleString()]})]})})})}),l.jsx(dl,{className:"z-50"})]}):null}const So=["shift","alt","meta","mod","ctrl","control"],oh={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Je(s){return(oh[s.trim()]||s.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function jo(s){return So.includes(s)}function Cs(s,e=","){return s.toLowerCase().split(e)}function Ps(s,e="+",t=">",r=!1,i){let n=[],a=!1;s=s.trim(),s.includes(t)?(a=!0,n=s.toLocaleLowerCase().split(t).map(u=>Je(u))):n=s.toLocaleLowerCase().split(e).map(u=>Je(u));const o={alt:n.includes("alt"),ctrl:n.includes("ctrl")||n.includes("control"),shift:n.includes("shift"),meta:n.includes("meta"),mod:n.includes("mod"),useKey:r},c=n.filter(u=>!So.includes(u));return{...o,keys:c,description:i,isSequence:a,hotkey:s}}typeof document<"u"&&(document.addEventListener("keydown",s=>{s.code!==void 0&&Co([Je(s.code)])}),document.addEventListener("keyup",s=>{s.code!==void 0&&Po([Je(s.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Be.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Be.clear()},0)}));const Be=new Set;function Ri(s){return Array.isArray(s)}function lh(s,e=","){return(Ri(s)?s:s.split(e)).every(t=>Be.has(t.trim().toLowerCase()))}function Co(s){const e=Array.isArray(s)?s:[s];Be.has("meta")&&Be.forEach(t=>!jo(t)&&Be.delete(t.toLowerCase())),e.forEach(t=>Be.add(t.toLowerCase()))}function Po(s){const e=Array.isArray(s)?s:[s];s==="meta"?Be.clear():e.forEach(t=>Be.delete(t.toLowerCase()))}function ch(s,e,t){(typeof t=="function"&&t(s,e)||t===!0)&&s.preventDefault()}function uh(s,e,t){return typeof t=="function"?t(s,e):t===!0||t===void 0}const dh=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function hh(s){return $o(s,dh)}function $o(s,e=!1){const{target:t,composed:r}=s;let i,n;return ph(t)&&r?(i=s.composedPath()[0]&&s.composedPath()[0].tagName,n=s.composedPath()[0]&&s.composedPath()[0].role):(i=t&&t.tagName,n=t&&t.role),Ri(e)?!!(i&&e&&e.some(a=>a.toLowerCase()===i.toLowerCase()||a===n)):!!(i&&e&&e)}function ph(s){return!!s.tagName&&!s.tagName.startsWith("-")&&s.tagName.includes("-")}function fh(s,e){return s.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?s.some(t=>e.includes(t))||s.includes("*"):!0}const gh=(s,e,t=!1)=>{const{alt:r,meta:i,mod:n,shift:a,ctrl:o,keys:c,useKey:u}=e,{code:d,key:h,ctrlKey:v,metaKey:f,shiftKey:p,altKey:_}=s,y=Je(d);if(u&&c?.length===1&&c.includes(h))return!0;if(!c?.includes(y)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(y))return!1;if(!t){if(r!==_&&y!=="alt"||a!==p&&y!=="shift")return!1;if(n){if(!f&&!v)return!1}else if(i!==f&&y!=="meta"&&y!=="os"||o!==v&&y!=="ctrl"&&y!=="control")return!1}return c&&c.length===1&&c.includes(y)?!0:c?lh(c):!c},vh=g.createContext(void 0),mh=()=>g.useContext(vh);function Ro(s,e){return s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(s).length===Object.keys(e).length&&Object.keys(s).reduce((t,r)=>t&&Ro(s[r],e[r]),!0):s===e}const _h=g.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),yh=()=>g.useContext(_h);function bh(s){const e=g.useRef(void 0);return Ro(e.current,s)||(e.current=s),e.current}const Wn=s=>{s.stopPropagation(),s.preventDefault(),s.stopImmediatePropagation()},xh=typeof window<"u"?g.useLayoutEffect:g.useEffect;function ht(s,e,t,r){const i=g.useRef(null),n=g.useRef(!1),a=Array.isArray(t)?Array.isArray(r)?void 0:r:t,o=Ri(s)?s.join(a?.delimiter):s,c=Array.isArray(t)?t:Array.isArray(r)?r:void 0,u=g.useCallback(e,c??[]),d=g.useRef(u);c?d.current=u:d.current=e;const h=bh(a),{activeScopes:v}=yh(),f=mh();return xh(()=>{if(h?.enabled===!1||!fh(v,h?.scopes))return;let p=[],_;const y=(P,M=!1)=>{if(!(hh(P)&&!$o(P,h?.enableOnFormTags))){if(i.current!==null){const O=i.current.getRootNode();if((O instanceof Document||O instanceof ShadowRoot)&&O.activeElement!==i.current&&!i.current.contains(O.activeElement)){Wn(P);return}}P.target?.isContentEditable&&!h?.enableOnContentEditable||Cs(o,h?.delimiter).forEach(O=>{if(O.includes(h?.splitKey??"+")&&O.includes(h?.sequenceSplitKey??">")){console.warn(`Hotkey ${O} contains both ${h?.splitKey??"+"} and ${h?.sequenceSplitKey??">"} which is not supported.`);return}const A=Ps(O,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description);if(A.isSequence){_=setTimeout(()=>{p=[]},h?.sequenceTimeoutMs??1e3);const T=A.useKey?P.key:Je(P.code);if(jo(T.toLowerCase()))return;p.push(T);const le=A.keys?.[p.length-1];if(T!==le){p=[],_&&clearTimeout(_);return}p.length===A.keys?.length&&(d.current(P,A),_&&clearTimeout(_),p=[])}else if(gh(P,A,h?.ignoreModifiers)||A.keys?.includes("*")){if(h?.ignoreEventWhen?.(P)||M&&n.current)return;if(ch(P,A,h?.preventDefault),!uh(P,A,h?.enabled)){Wn(P);return}d.current(P,A),M||(n.current=!0)}})}},w=P=>{P.code!==void 0&&(Co(Je(P.code)),(h?.keydown===void 0&&h?.keyup!==!0||h?.keydown)&&y(P))},j=P=>{P.code!==void 0&&(Po(Je(P.code)),n.current=!1,h?.keyup&&y(P,!0))},x=i.current||a?.document||document;return x.addEventListener("keyup",j,a?.eventListenerOptions),x.addEventListener("keydown",w,a?.eventListenerOptions),f&&Cs(o,h?.delimiter).forEach(P=>f.addHotkey(Ps(P,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description))),()=>{x.removeEventListener("keyup",j,a?.eventListenerOptions),x.removeEventListener("keydown",w,a?.eventListenerOptions),f&&Cs(o,h?.delimiter).forEach(P=>f.removeHotkey(Ps(P,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description))),p=[],_&&clearTimeout(_)}},[o,h,v]),i}function wh(){const s=W(c=>c.setSearchOpen),e=W(c=>c.setCommandPaletteOpen),t=W(c=>c.setSettingsOpen),r=Se(c=>c.enabled),i=Se(c=>c.setEnabled),n=hi(),a=V(c=>c.panicKey),o=W(c=>c.setPanicModeActivated);return ht("mod+k",()=>s(!0),{preventDefault:!0}),ht("mod+p",()=>e(!0),{preventDefault:!0}),ht("mod+comma",()=>t(!0),{preventDefault:!0}),ht("mod+shift+h",()=>n("/"),{preventDefault:!0}),ht("mod+shift+g",()=>{r&&n("/g")},{preventDefault:!0}),ht(a.key,()=>{a.enabled&&a.url&&r&&(a.disableExperimentalOnTrigger&&i(!1),o(!0),window.location.href=a.url)},{preventDefault:!0,enabled:a.enabled&&!!a.url&&r}),null}var Vn=1,Eh=.9,kh=.8,Sh=.17,$s=.1,Rs=.999,jh=.9999,Ch=.99,Ph=/[\\\/_+.#"@\[\(\{&]/,$h=/[\\\/_+.#"@\[\(\{&]/g,Rh=/[\s-]/,No=/[\s-]/g;function ci(s,e,t,r,i,n,a){if(n===e.length)return i===s.length?Vn:Ch;var o=`${i},${n}`;if(a[o]!==void 0)return a[o];for(var c=r.charAt(n),u=t.indexOf(c,i),d=0,h,v,f,p;u>=0;)h=ci(s,e,t,r,u+1,n+1,a),h>d&&(u===i?h*=Vn:Ph.test(s.charAt(u-1))?(h*=kh,f=s.slice(i,u-1).match($h),f&&i>0&&(h*=Math.pow(Rs,f.length))):Rh.test(s.charAt(u-1))?(h*=Eh,p=s.slice(i,u-1).match(No),p&&i>0&&(h*=Math.pow(Rs,p.length))):(h*=Sh,i>0&&(h*=Math.pow(Rs,u-i))),s.charAt(u)!==e.charAt(n)&&(h*=jh)),(h<$s&&t.charAt(u-1)===r.charAt(n+1)||r.charAt(n+1)===r.charAt(n)&&t.charAt(u-1)!==r.charAt(n))&&(v=ci(s,e,t,r,u+1,n+2,a),v*$s>h&&(h=v*$s)),h>d&&(d=h),u=t.indexOf(c,u+1);return a[o]=d,d}function Kn(s){return s.toLowerCase().replace(No," ")}function Nh(s,e,t){return s=t&&t.length>0?`${s+" "+t.join(" ")}`:s,ci(s,e,Kn(s),Kn(e),0,0,{})}var zt='[cmdk-group=""]',Ns='[cmdk-group-items=""]',Ih='[cmdk-group-heading=""]',Io='[cmdk-item=""]',Yn=`${Io}:not([aria-disabled="true"])`,ui="cmdk-item-select",vt="data-value",Oh=(s,e,t)=>Nh(s,e,t),Oo=g.createContext(void 0),pr=()=>g.useContext(Oo),To=g.createContext(void 0),Ni=()=>g.useContext(To),Ao=g.createContext(void 0),Fo=g.forwardRef((s,e)=>{let t=mt(()=>{var b,R;return{search:"",value:(R=(b=s.value)!=null?b:s.defaultValue)!=null?R:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=mt(()=>new Set),i=mt(()=>new Map),n=mt(()=>new Map),a=mt(()=>new Set),o=Mo(s),{label:c,children:u,value:d,onValueChange:h,filter:v,shouldFilter:f,loop:p,disablePointerSelection:_=!1,vimBindings:y=!0,...w}=s,j=nt(),x=nt(),P=nt(),M=g.useRef(null),O=zh();ct(()=>{if(d!==void 0){let b=d.trim();t.current.value=b,A.emit()}},[d]),ct(()=>{O(6,ye)},[]);let A=g.useMemo(()=>({subscribe:b=>(a.current.add(b),()=>a.current.delete(b)),snapshot:()=>t.current,setState:(b,R,I)=>{var $,L,q,ue;if(!Object.is(t.current[b],R)){if(t.current[b]=R,b==="search")ne(),ee(),O(1,ce);else if(b==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let re=document.getElementById(P);re?re.focus():($=document.getElementById(j))==null||$.focus()}if(O(7,()=>{var re;t.current.selectedItemId=(re=te())==null?void 0:re.id,A.emit()}),I||O(5,ye),((L=o.current)==null?void 0:L.value)!==void 0){let re=R??"";(ue=(q=o.current).onValueChange)==null||ue.call(q,re);return}}A.emit()}},emit:()=>{a.current.forEach(b=>b())}}),[]),T=g.useMemo(()=>({value:(b,R,I)=>{var $;R!==(($=n.current.get(b))==null?void 0:$.value)&&(n.current.set(b,{value:R,keywords:I}),t.current.filtered.items.set(b,le(R,I)),O(2,()=>{ee(),A.emit()}))},item:(b,R)=>(r.current.add(b),R&&(i.current.has(R)?i.current.get(R).add(b):i.current.set(R,new Set([b]))),O(3,()=>{ne(),ee(),t.current.value||ce(),A.emit()}),()=>{n.current.delete(b),r.current.delete(b),t.current.filtered.items.delete(b);let I=te();O(4,()=>{ne(),I?.getAttribute("id")===b&&ce(),A.emit()})}),group:b=>(i.current.has(b)||i.current.set(b,new Set),()=>{n.current.delete(b),i.current.delete(b)}),filter:()=>o.current.shouldFilter,label:c||s["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:j,inputId:P,labelId:x,listInnerRef:M}),[]);function le(b,R){var I,$;let L=($=(I=o.current)==null?void 0:I.filter)!=null?$:Oh;return b?L(b,t.current.search,R):0}function ee(){if(!t.current.search||o.current.shouldFilter===!1)return;let b=t.current.filtered.items,R=[];t.current.filtered.groups.forEach($=>{let L=i.current.get($),q=0;L.forEach(ue=>{let re=b.get(ue);q=Math.max(re,q)}),R.push([$,q])});let I=M.current;ae().sort(($,L)=>{var q,ue;let re=$.getAttribute("id"),ve=L.getAttribute("id");return((q=b.get(ve))!=null?q:0)-((ue=b.get(re))!=null?ue:0)}).forEach($=>{let L=$.closest(Ns);L?L.appendChild($.parentElement===L?$:$.closest(`${Ns} > *`)):I.appendChild($.parentElement===I?$:$.closest(`${Ns} > *`))}),R.sort(($,L)=>L[1]-$[1]).forEach($=>{var L;let q=(L=M.current)==null?void 0:L.querySelector(`${zt}[${vt}="${encodeURIComponent($[0])}"]`);q?.parentElement.appendChild(q)})}function ce(){let b=ae().find(I=>I.getAttribute("aria-disabled")!=="true"),R=b?.getAttribute(vt);A.setState("value",R||void 0)}function ne(){var b,R,I,$;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let L=0;for(let q of r.current){let ue=(R=(b=n.current.get(q))==null?void 0:b.value)!=null?R:"",re=($=(I=n.current.get(q))==null?void 0:I.keywords)!=null?$:[],ve=le(ue,re);t.current.filtered.items.set(q,ve),ve>0&&L++}for(let[q,ue]of i.current)for(let re of ue)if(t.current.filtered.items.get(re)>0){t.current.filtered.groups.add(q);break}t.current.filtered.count=L}function ye(){var b,R,I;let $=te();$&&(((b=$.parentElement)==null?void 0:b.firstChild)===$&&((I=(R=$.closest(zt))==null?void 0:R.querySelector(Ih))==null||I.scrollIntoView({block:"nearest"})),$.scrollIntoView({block:"nearest"}))}function te(){var b;return(b=M.current)==null?void 0:b.querySelector(`${Io}[aria-selected="true"]`)}function ae(){var b;return Array.from(((b=M.current)==null?void 0:b.querySelectorAll(Yn))||[])}function Ce(b){let R=ae()[b];R&&A.setState("value",R.getAttribute(vt))}function be(b){var R;let I=te(),$=ae(),L=$.findIndex(ue=>ue===I),q=$[L+b];(R=o.current)!=null&&R.loop&&(q=L+b<0?$[$.length-1]:L+b===$.length?$[0]:$[L+b]),q&&A.setState("value",q.getAttribute(vt))}function Pe(b){let R=te(),I=R?.closest(zt),$;for(;I&&!$;)I=b>0?Uh(I,zt):qh(I,zt),$=I?.querySelector(Yn);$?A.setState("value",$.getAttribute(vt)):be(b)}let ge=()=>Ce(ae().length-1),Ee=b=>{b.preventDefault(),b.metaKey?ge():b.altKey?Pe(1):be(1)},Ie=b=>{b.preventDefault(),b.metaKey?Ce(0):b.altKey?Pe(-1):be(-1)};return g.createElement(Ze.div,{ref:e,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:b=>{var R;(R=w.onKeyDown)==null||R.call(w,b);let I=b.nativeEvent.isComposing||b.keyCode===229;if(!(b.defaultPrevented||I))switch(b.key){case"n":case"j":{y&&b.ctrlKey&&Ee(b);break}case"ArrowDown":{Ee(b);break}case"p":case"k":{y&&b.ctrlKey&&Ie(b);break}case"ArrowUp":{Ie(b);break}case"Home":{b.preventDefault(),Ce(0);break}case"End":{b.preventDefault(),ge();break}case"Enter":{b.preventDefault();let $=te();if($){let L=new Event(ui);$.dispatchEvent(L)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:Wh},c),es(s,b=>g.createElement(To.Provider,{value:A},g.createElement(Oo.Provider,{value:T},b))))}),Th=g.forwardRef((s,e)=>{var t,r;let i=nt(),n=g.useRef(null),a=g.useContext(Ao),o=pr(),c=Mo(s),u=(r=(t=c.current)==null?void 0:t.forceMount)!=null?r:a?.forceMount;ct(()=>{if(!u)return o.item(i,a?.id)},[u]);let d=Lo(i,n,[s.value,s.children,n],s.keywords),h=Ni(),v=qe(O=>O.value&&O.value===d.current),f=qe(O=>u||o.filter()===!1?!0:O.search?O.filtered.items.get(i)>0:!0);g.useEffect(()=>{let O=n.current;if(!(!O||s.disabled))return O.addEventListener(ui,p),()=>O.removeEventListener(ui,p)},[f,s.onSelect,s.disabled]);function p(){var O,A;_(),(A=(O=c.current).onSelect)==null||A.call(O,d.current)}function _(){h.setState("value",d.current,!0)}if(!f)return null;let{disabled:y,value:w,onSelect:j,forceMount:x,keywords:P,...M}=s;return g.createElement(Ze.div,{ref:at(n,e),...M,id:i,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!v,"data-disabled":!!y,"data-selected":!!v,onPointerMove:y||o.getDisablePointerSelection()?void 0:_,onClick:y?void 0:p},s.children)}),Ah=g.forwardRef((s,e)=>{let{heading:t,children:r,forceMount:i,...n}=s,a=nt(),o=g.useRef(null),c=g.useRef(null),u=nt(),d=pr(),h=qe(f=>i||d.filter()===!1?!0:f.search?f.filtered.groups.has(a):!0);ct(()=>d.group(a),[]),Lo(a,o,[s.value,s.heading,c]);let v=g.useMemo(()=>({id:a,forceMount:i}),[i]);return g.createElement(Ze.div,{ref:at(o,e),...n,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),es(s,f=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},g.createElement(Ao.Provider,{value:v},f))))}),Fh=g.forwardRef((s,e)=>{let{alwaysRender:t,...r}=s,i=g.useRef(null),n=qe(a=>!a.search);return!t&&!n?null:g.createElement(Ze.div,{ref:at(i,e),...r,"cmdk-separator":"",role:"separator"})}),Mh=g.forwardRef((s,e)=>{let{onValueChange:t,...r}=s,i=s.value!=null,n=Ni(),a=qe(u=>u.search),o=qe(u=>u.selectedItemId),c=pr();return g.useEffect(()=>{s.value!=null&&n.setState("search",s.value)},[s.value]),g.createElement(Ze.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:i?s.value:a,onChange:u=>{i||n.setState("search",u.target.value),t?.(u.target.value)}})}),Lh=g.forwardRef((s,e)=>{let{children:t,label:r="Suggestions",...i}=s,n=g.useRef(null),a=g.useRef(null),o=qe(u=>u.selectedItemId),c=pr();return g.useEffect(()=>{if(a.current&&n.current){let u=a.current,d=n.current,h,v=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=u.offsetHeight;d.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return v.observe(u),()=>{cancelAnimationFrame(h),v.unobserve(u)}}},[]),g.createElement(Ze.div,{ref:at(n,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:c.listId},es(s,u=>g.createElement("div",{ref:at(a,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Dh=g.forwardRef((s,e)=>{let{open:t,onOpenChange:r,overlayClassName:i,contentClassName:n,container:a,...o}=s;return g.createElement(ec,{open:t,onOpenChange:r},g.createElement(tc,{container:a},g.createElement(rc,{"cmdk-overlay":"",className:i}),g.createElement(sc,{"aria-label":s.label,"cmdk-dialog":"",className:n},g.createElement(Fo,{ref:e,...o}))))}),Bh=g.forwardRef((s,e)=>qe(t=>t.filtered.count===0)?g.createElement(Ze.div,{ref:e,...s,"cmdk-empty":"",role:"presentation"}):null),Hh=g.forwardRef((s,e)=>{let{progress:t,children:r,label:i="Loading...",...n}=s;return g.createElement(Ze.div,{ref:e,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},es(s,a=>g.createElement("div",{"aria-hidden":!0},a)))}),Ct=Object.assign(Fo,{List:Lh,Item:Th,Input:Mh,Group:Ah,Separator:Fh,Dialog:Dh,Empty:Bh,Loading:Hh});function Uh(s,e){let t=s.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function qh(s,e){let t=s.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function Mo(s){let e=g.useRef(s);return ct(()=>{e.current=s}),e}var ct=typeof window>"u"?g.useEffect:g.useLayoutEffect;function mt(s){let e=g.useRef();return e.current===void 0&&(e.current=s()),e}function qe(s){let e=Ni(),t=()=>s(e.snapshot());return g.useSyncExternalStore(e.subscribe,t,t)}function Lo(s,e,t,r=[]){let i=g.useRef(),n=pr();return ct(()=>{var a;let o=(()=>{var u;for(let d of t){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=r.map(u=>u.trim());n.value(s,o,c),(a=e.current)==null||a.setAttribute(vt,o),i.current=o}),i}var zh=()=>{let[s,e]=g.useState(),t=mt(()=>new Map);return ct(()=>{t.current.forEach(r=>r()),t.current=new Map},[s]),(r,i)=>{t.current.set(r,i),e({})}};function Gh(s){let e=s.type;return typeof e=="function"?e(s.props):"render"in e?e.render(s.props):s}function es({asChild:s,children:e},t){return s&&g.isValidElement(e)?g.cloneElement(Gh(e),{ref:e.ref},t(e.props.children)):t(e)}var Wh={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Do({className:s,...e}){return l.jsx(Ct,{"data-slot":"command",className:Z("text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",s),...e})}function Bo({title:s="Command Palette",description:e="Search for a command to run...",children:t,className:r,showCloseButton:i=!0,...n}){return l.jsxs(Ts,{...n,children:[l.jsxs(As,{className:"sr-only",children:[l.jsx(Fs,{children:s}),l.jsx(nc,{children:e})]}),l.jsx(Ms,{className:Z("overflow-hidden p-0",r),showCloseButton:i,children:l.jsx(Do,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})]})}function Ii({className:s,...e}){return l.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[l.jsx(pi,{className:"size-4 shrink-0 opacity-50"}),l.jsx(Ct.Input,{"data-slot":"command-input",className:Z("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",s),...e})]})}function Oi({className:s,...e}){return l.jsx(Ct.List,{"data-slot":"command-list",className:Z("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",s),...e})}function Ti({...s}){return l.jsx(Ct.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...s})}function sr({className:s,...e}){return l.jsx(Ct.Group,{"data-slot":"command-group",className:Z("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",s),...e})}function cr({className:s,...e}){const t=V(r=>r.disableAllBlur);return l.jsx(Ct.Item,{"data-slot":"command-item",className:Z("data-[selected=true]:bg-accent/50 data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",!t&&"data-[selected=true]:backdrop-blur-md",s),...e})}function di({className:s,...e}){return l.jsx("span",{"data-slot":"command-shortcut",className:Z("text-muted-foreground ml-auto text-xs tracking-widest",s),...e})}function Vh(){const s=W(u=>u.searchOpen),e=W(u=>u.setSearchOpen),t=Se(u=>u.enabled),r=hi(),[i,n]=g.useState("Search..."),o=na(sa.auth.getCurrentUser)?.role==="admin",c=ko.filter(u=>!(u.experimental&&!t)&&!(u.requiresAdmin&&!o));return g.useEffect(()=>{s==!0&&(Math.random()<.05?n("The search begins, I'm back, so enjoy the trip, huh"):n("Search..."))},[s]),l.jsxs(Bo,{open:s,onOpenChange:e,children:[l.jsx(Ii,{placeholder:i}),l.jsxs(Oi,{children:[l.jsx(Ti,{children:"No results found."}),l.jsx(sr,{children:c.filter(u=>u.href&&!u.newTab).map(u=>l.jsxs(cr,{value:u.href,onSelect:()=>{r({pathname:u.href}),e(!1)},children:[u.icon?l.jsx(u.icon,{}):l.jsx(Is,{}),u.label,u.kbd&&l.jsx(di,{children:u.kbd})]},u.href))}),c.filter(u=>u.children).map(u=>l.jsx(sr,{heading:u.label,children:u.children&&u.children.filter(d=>d.href&&!d.newTab).map(d=>l.jsxs(cr,{value:d.href,onSelect:()=>{r({pathname:d.href}),e(!1)},children:[d.icon?l.jsx(d.icon,{}):l.jsx(Is,{}),d.label,d.kbd&&l.jsx(di,{children:d.kbd})]},d.href))},u.label)),l.jsx(sr,{children:l.jsx(Kh,{})})]})]})}function Kh(){const s=qe(i=>i.search),e=Se(i=>i.enabled),t=Se(i=>i.toggle),r=W(i=>i.setSearchOpen);return l.jsxs(cr,{onSelect:()=>{t(),r(!1)},className:s.toLowerCase().includes("exp")||e?"":"hidden",children:[e?l.jsx(Zn,{}):l.jsx(kl,{}),e?"Disable":"Enable"," Experimental Features"]})}const Yh=Object.entries(Kr).map(([s,e])=>({value:s,label:e.name}));function Xh({className:s}){const[e,t]=g.useState(!1),r=V(n=>n.theme),i=V(n=>n.setTheme);return l.jsxs(Do,{children:[l.jsx(Ii,{placeholder:"Search theme...",className:"h-9"}),l.jsxs(Oi,{children:[l.jsx(Ti,{children:"No theme found."}),l.jsx(sr,{children:Yh.map(n=>l.jsxs(cr,{value:n.value,onSelect:a=>{i({theme:a}),t(!1)},children:[n.label,l.jsx(Sl,{className:Z("ml-auto",r.theme===n.value?"opacity-100":"opacity-0")})]},n.value))})]})]})}function Jh({className:s}){const e=V(i=>i.theme),t=V(i=>i.setTheme),r=Kr[e.theme];return!r||!r.dark||!r.light?null:l.jsxs(ac,{children:[l.jsx(oc,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"icon",className:s,children:[l.jsx(jl,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),l.jsx(Cl,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),l.jsx("span",{className:"sr-only",children:"Toggle theme mode"})]})}),l.jsx(lc,{align:"end",children:l.jsxs(cc,{value:e.mode,onValueChange:i=>t({mode:i}),children:[l.jsx(Hi,{value:"light",children:"Light"}),l.jsx(Hi,{value:"dark",children:"Dark"})]})})]})}function Zh(s,e=[]){let t=[];function r(n,a){const o=g.createContext(a),c=t.length;t=[...t,a];const u=h=>{const{scope:v,children:f,...p}=h,_=v?.[s]?.[c]||o,y=g.useMemo(()=>p,Object.values(p));return l.jsx(_.Provider,{value:y,children:f})};u.displayName=n+"Provider";function d(h,v){const f=v?.[s]?.[c]||o,p=g.useContext(f);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${n}\``)}return[u,d]}const i=()=>{const n=t.map(a=>g.createContext(a));return function(o){const c=o?.[s]||n;return g.useMemo(()=>({[`__scope${s}`]:{...o,[s]:c}}),[o,c])}};return i.scopeName=s,[r,Qh(i,...e)]}function Qh(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(n){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const h=c(n)[`__scope${u}`];return{...o,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function ep(s){const e=tp(s),t=g.forwardRef((r,i)=>{const{children:n,...a}=r,o=g.Children.toArray(n),c=o.find(sp);if(c){const u=c.props.children,d=o.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...a,ref:i,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...a,ref:i,children:n})});return t.displayName=`${s}.Slot`,t}function tp(s){const e=g.forwardRef((t,r)=>{const{children:i,...n}=t;if(g.isValidElement(i)){const a=np(i),o=ip(n,i.props);return i.type!==g.Fragment&&(o.ref=r?at(r,a):a),g.cloneElement(i,o)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var rp=Symbol("radix.slottable");function sp(s){return g.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===rp}function ip(s,e){const t={...e};for(const r in e){const i=s[r],n=e[r];/^on[A-Z]/.test(r)?i&&n?t[r]=(...o)=>{const c=n(...o);return i(...o),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...n}:r==="className"&&(t[r]=[i,n].filter(Boolean).join(" "))}return{...s,...t}}function np(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var ap=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ho=ap.reduce((s,e)=>{const t=ep(`Primitive.${e}`),r=g.forwardRef((i,n)=>{const{asChild:a,...o}=i,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${e}`,{...s,[e]:r}},{}),ts="Switch",[op]=Zh(ts),[lp,cp]=op(ts),Uo=g.forwardRef((s,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:n,required:a,disabled:o,value:c="on",onCheckedChange:u,form:d,...h}=s,[v,f]=g.useState(null),p=fi(e,x=>f(x)),_=g.useRef(!1),y=v?d||!!v.closest("form"):!0,[w,j]=ta({prop:i,defaultProp:n??!1,onChange:u,caller:ts});return l.jsxs(lp,{scope:t,checked:w,disabled:o,children:[l.jsx(Ho.button,{type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":Wo(w),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:p,onClick:ra(s.onClick,x=>{j(P=>!P),y&&(_.current=x.isPropagationStopped(),_.current||x.stopPropagation())})}),y&&l.jsx(Go,{control:v,bubbles:!_.current,name:r,value:c,checked:w,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Uo.displayName=ts;var qo="SwitchThumb",zo=g.forwardRef((s,e)=>{const{__scopeSwitch:t,...r}=s,i=cp(qo,t);return l.jsx(Ho.span,{"data-state":Wo(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});zo.displayName=qo;var up="SwitchBubbleInput",Go=g.forwardRef(({__scopeSwitch:s,control:e,checked:t,bubbles:r=!0,...i},n)=>{const a=g.useRef(null),o=fi(a,n),c=dc(t),u=hc(e);return g.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==t&&f){const p=new Event("click",{bubbles:r});f.call(d,t),d.dispatchEvent(p)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:o,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Go.displayName=up;function Wo(s){return s?"checked":"unchecked"}var dp=Uo,hp=zo;function Gt({className:s,...e}){return l.jsx(dp,{"data-slot":"switch",className:Z("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:l.jsx(hp,{"data-slot":"switch-thumb",className:Z("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function pp(){const s=W(x=>x.settingsOpen),e=W(x=>x.setSettingsOpen),t=V(x=>x.panicKey),r=V(x=>x.setPanicKey),i=V(x=>x.cloak),n=V(x=>x.setCloak),a=Se(x=>x.enabled),o=Di(x=>x.historyCollectionEnabled),c=Di(x=>x.setHistoryCollectionEnabled),u=Wl(x=>x.history),d=V(x=>x.disableBlurBehind),h=V(x=>x.setDisableBlurBehind),v=V(x=>x.disableAllBlur),f=V(x=>x.setDisableAllBlur),p=V(x=>x.disableAnimations),_=V(x=>x.setDisableAnimations),y=W(x=>x.setLoadingOverlayOpen),w=W(x=>x.setLoadingOverlayMessage),j=He.useSession();return l.jsx(Ts,{open:s,onOpenChange:e,children:l.jsxs(Ms,{className:"max-h-[85vh] overflow-y-auto max-w-7xl! w-[90vw]",children:[l.jsx(As,{children:l.jsx(Fs,{children:"Settings"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[j.data?.user&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4",children:[l.jsx(gc,{}),l.jsx(vc,{})]}),l.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[l.jsx(mc,{className:"grow"}),l.jsxs(Ts,{children:[l.jsx(ic,{asChild:!0,children:l.jsxs(me,{variant:"ghost",size:"lg",className:"border rounded-xl",children:[l.jsx(Pl,{}),"Sessions"]})}),l.jsxs(Ms,{className:"p-0",children:[l.jsx(As,{className:"sr-only",children:l.jsx(Fs,{children:"Sessions"})}),l.jsx(_c,{className:"border-0"})]})]})]})]}),l.jsxs(Rt,{className:"gap-0 pb-0 overflow-hidden relative",children:[l.jsx(Nt,{children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx($l,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Theme"})]})}),l.jsxs(Ot,{className:"flex flex-col gap-4 p-0 h-full",children:[l.jsx(Jh,{className:"absolute right-4 top-4"}),l.jsx(Xh,{})]})]}),l.jsxs(Rt,{children:[l.jsx(Nt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Is,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Panic Key"})]}),l.jsx(Gt,{checked:t.enabled,onCheckedChange:x=>r({enabled:x})})]})}),l.jsx(Ot,{className:"flex flex-col gap-4",children:l.jsxs("div",{className:Z("flex flex-col gap-4",!t.enabled&&"opacity-50"),children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Rl,{className:"h-3.5 w-3.5 text-muted-foreground"}),l.jsx("label",{htmlFor:"panic-key-url",className:"text-sm font-medium leading-none",children:"Redirect URL"})]}),l.jsx(fr,{id:"panic-key-url",type:"url",placeholder:"https://classroom.google.com",value:t.url,onChange:x=>r({url:x.target.value}),disabled:!t.enabled}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"The URL to redirect to when the panic key is pressed"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Nl,{className:"h-3.5 w-3.5 text-muted-foreground"}),l.jsx("label",{htmlFor:"panic-key-combination",className:"text-sm font-medium leading-none",children:"Key Combination"})]}),l.jsx(fr,{id:"panic-key-combination",type:"text",placeholder:"mod+shift+p",value:t.key,onChange:x=>r({key:x.target.value}),disabled:!t.enabled}),l.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[l.jsx(Qn,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),l.jsx("p",{children:'Use format like "mod+shift+p" or "escape". "mod" is Cmd on Mac, Ctrl on Windows/Linux.'})]})]}),l.jsxs("div",{className:"flex items-start gap-3 pt-2",children:[l.jsx(uc,{id:"panic-key-disable-experimental",checked:t.disableExperimentalOnTrigger,onCheckedChange:x=>r({disableExperimentalOnTrigger:x===!0}),className:"mt-1",disabled:!t.enabled}),l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("label",{htmlFor:"panic-key-disable-experimental",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Experimental Features on Trigger"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically disable experimental features when panic key is activated"})]})]})]})})]}),a&&l.jsxs(Rt,{children:[l.jsxs(Nt,{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Il,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Cloak"})]}),l.jsx(Ui,{children:"Change the title and icon of the browser tab"})]}),l.jsxs(Ot,{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(pc,{value:i.mode,onValueChange:x=>n({mode:x}),children:l.jsxs(fc,{className:"w-full",children:[l.jsx(ls,{value:"off",children:"Off"}),l.jsx(ls,{value:"when-not-focused",children:"Unfocused"}),l.jsx(ls,{value:"on",children:"Always"})]})})}),l.jsxs("div",{className:Z("flex flex-col gap-4",i.mode==="off"&&"opacity-50"),children:[l.jsx(Qe,{}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{htmlFor:"cloak-title",className:"text-sm font-medium leading-none",children:"Tab Title"}),l.jsx(fr,{id:"cloak-title",type:"text",value:i.title,onChange:x=>n({title:x.target.value}),disabled:i.mode==="off"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"The title that will appear in the browser tab"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{htmlFor:"cloak-favicon",className:"text-sm font-medium leading-none",children:"Favicon URL"}),l.jsx(fr,{id:"cloak-favicon",type:"url",value:i.favicon,onChange:x=>n({favicon:x.target.value}),disabled:i.mode==="off"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"URL to the image that will appear in the browser tab"})]})]})]})]})]}),l.jsxs(Rt,{children:[l.jsx(Nt,{children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ol,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Performance"})]})}),l.jsxs(Ot,{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-all-blur",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable All Blur Effects"})}),l.jsx(Gt,{id:"disable-all-blur",checked:v,onCheckedChange:f})]}),l.jsx(Qe,{}),l.jsxs("div",{className:Z("flex items-center justify-between",v&&"opacity-50"),children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-blur-behind",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Blur Behind Effects"})}),l.jsx(Gt,{id:"disable-blur-behind",checked:d,onCheckedChange:h,disabled:v})]}),l.jsx(Qe,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-animations",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Animations"})}),l.jsx(Gt,{id:"disable-animations",checked:p,onCheckedChange:_})]})]})]}),l.jsxs(Rt,{children:[l.jsxs(Nt,{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Privacy"})]}),l.jsx(Ui,{children:"Manage your privacy settings and data"})]}),l.jsxs(Ot,{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{htmlFor:"history-collection",className:"text-sm font-medium leading-none cursor-pointer",children:"History Collection"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Track your browsing history for quick access"})]}),l.jsx(Gt,{id:"history-collection",checked:o,onCheckedChange:c})]}),l.jsx(Qe,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Clear History"}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Remove all items from your browsing history",u.length>0&&` (${u.length} items)`]})]}),l.jsxs(gr,{children:[l.jsx(vr,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"sm",disabled:u.length===0,children:[l.jsx(Tl,{className:"h-4 w-4"}),"Clear"]})}),l.jsxs(mr,{children:[l.jsxs(_r,{children:[l.jsx(yr,{children:"Clear History"}),l.jsx(br,{children:"Are you sure you want to clear all browsing history? This action cannot be undone."})]}),l.jsxs(xr,{children:[l.jsx(wr,{children:"Cancel"}),l.jsx(Er,{onClick:Vl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear History"})]})]})]})]})}),l.jsx(Qe,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Reset Settings"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset all settings to their default values"})]}),l.jsxs(gr,{children:[l.jsx(vr,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"sm",children:[l.jsx(Al,{className:"h-4 w-4"}),"Reset"]})}),l.jsxs(mr,{children:[l.jsxs(_r,{children:[l.jsx(yr,{children:"Reset Settings"}),l.jsx(br,{children:"Are you sure you want to reset all settings to their default values? This action cannot be undone."})]}),l.jsxs(xr,{children:[l.jsx(wr,{children:"Cancel"}),l.jsx(Er,{onClick:Kl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Reset Settings"})]})]})]})]})}),l.jsx(Qe,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Clear Everything"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all local storage, cookies, and data. This will reload the page."})]}),l.jsxs(gr,{children:[l.jsx(vr,{asChild:!0,children:l.jsxs(me,{variant:"destructive",size:"sm",children:[l.jsx(Wt,{className:"h-4 w-4"}),"Clear All"]})}),l.jsxs(mr,{children:[l.jsxs(_r,{children:[l.jsxs(yr,{className:"flex items-center gap-2",children:[l.jsx(Wt,{className:"h-5 w-5 text-destructive"}),"Clear Everything"]}),l.jsxs(br,{children:["This will permanently delete all your data including:",l.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[l.jsx("li",{children:"All settings and preferences"}),l.jsx("li",{children:"Browsing history"}),l.jsx("li",{children:"Saved games"}),l.jsx("li",{children:"Local storage data"}),l.jsx("li",{children:"Cookies"}),l.jsx("li",{children:"Session storage"})]}),l.jsx("p",{className:"mt-2 font-medium",children:"This action cannot be undone and will reload the page."})]})]}),l.jsxs(xr,{children:[l.jsx(wr,{children:"Cancel"}),l.jsx(Er,{onClick:Yl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear Everything"})]})]})]})]})}),j.data?.user&&l.jsxs(l.Fragment,{children:[l.jsx(Qe,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Delete Account"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete your account and all associated data. This action cannot be undone."})]}),l.jsxs(gr,{children:[l.jsx(vr,{asChild:!0,children:l.jsxs(me,{variant:"destructive",size:"sm",children:[l.jsx(Wt,{className:"h-4 w-4"}),"Delete Account"]})}),l.jsxs(mr,{children:[l.jsxs(_r,{children:[l.jsxs(yr,{className:"flex items-center gap-2",children:[l.jsx(Wt,{className:"h-5 w-5 text-destructive"}),"Delete Account"]}),l.jsxs(br,{className:"grid gap-2",children:["This will permanently delete your account and all associated data. This action cannot be undone.",l.jsx("div",{className:"p-2 border rounded-xl flex flex-row gap-2 items-center",children:l.jsx(aa,{variant:"ghost",className:"w-full pointer-events-none [&>svg]:hidden justify-start"})})]})]}),l.jsxs(xr,{children:[l.jsx(wr,{children:"Cancel"}),l.jsx(Er,{onClick:async()=>{y(!0),w("Deleting account..."),await He.deleteUser(),y(!1)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Account"})]})]})]})]})})]})]})]})]})]})})}var fp=(s,e,t,r,i,n,a,o)=>{let c=document.documentElement,u=["light","dark"];function d(f){(Array.isArray(s)?s:[s]).forEach(p=>{let _=p==="class",y=_&&n?i.map(w=>n[w]||w):i;_?(c.classList.remove(...y),c.classList.add(n&&n[f]?n[f]:f)):c.setAttribute(p,f)}),h(f)}function h(f){o&&u.includes(f)&&(c.style.colorScheme=f)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let f=localStorage.getItem(e)||t,p=a&&f==="system"?v():f;d(p)}catch{}},gp=g.createContext(void 0),vp={setTheme:s=>{},themes:[]},mp=()=>{var s;return(s=g.useContext(gp))!=null?s:vp};g.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:n,value:a,themes:o,nonce:c,scriptProps:u})=>{let d=JSON.stringify([t,e,n,s,o,a,r,i]).slice(1,-1);return g.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${fp.toString()})(${d})`}})});const _p=({...s})=>{const{theme:e="system"}=mp();return l.jsx(bc,{theme:e,className:"toaster group",icons:{success:l.jsx(Zn,{className:"size-4"}),info:l.jsx(Qn,{className:"size-4"}),warning:l.jsx(Wt,{className:"size-4"}),error:l.jsx(Ml,{className:"size-4"}),loading:l.jsx(Fl,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...s})};function yp({children:s,client:e,authClient:t}){const r=bp(t);return g.useEffect(()=>{(async()=>{const i=new URL(window.location?.href),n=i.searchParams.get("ott");if(n){const a=t;i.searchParams.delete("ott");const c=(await a.crossDomain.oneTimeToken.verify({token:n})).data?.session;c&&(await t.getSession({fetchOptions:{headers:{Authorization:`Bearer ${c.token}`}}}),a.updateSession()),window.history.replaceState({},"",i)}})()},[t]),l.jsx(Zl,{client:e,useAuth:r,children:s})}function bp(s){return g.useMemo(()=>function(){const{data:t,isPending:r}=s.useSession(),i=t?.session?.id,n=g.useCallback(async()=>{try{const{data:a}=await s.convex.token();return a?.token||null}catch{return null}},[i]);return g.useMemo(()=>({isLoading:r,isAuthenticated:t!==null,fetchAccessToken:n}),[r,i,n])},[s])}function xp(){const s=Xn(),e=W(n=>n.setSearchOpen),t=W(n=>n.setSettingsOpen),r=Se(n=>n.enabled),i=He.useSession();return l.jsx("div",{className:"flex flex-row gap-1 items-center sticky top-0 z-40 from-sidebar to-transparent bg-linear-to-b py-2",children:l.jsxs(ia,{mode:"popLayout",children:[(!r||!s.open||s.isMobile)&&l.jsxs(Ir.div,{initial:{opacity:0,filter:"blur(5px)",x:-50},animate:{opacity:1,filter:"blur(0)",x:0},exit:{opacity:0,filter:"blur(5px)",x:-50},transition:{duration:.2},className:"flex flex-row gap-2",children:[l.jsx(me,{variant:"ghost",size:"icon",asChild:!0,children:l.jsx(it,{to:"/",children:l.jsx("img",{src:"/edutools-black.svg",className:"dark:invert size-6",alt:""})})}),l.jsxs(ns,{children:[l.jsx(as,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>e(!0),children:l.jsx(pi,{})})}),l.jsx(os,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Search",l.jsxs(rr,{children:[l.jsx(Me,{className:"text-nowrap",children:""}),l.jsx(Me,{className:"text-nowrap",children:"K"})]})]})})]})]},"header-sidebar-collapsed-buttons"),r&&l.jsx(Ir.div,{layout:!0,transition:{duration:.2},children:l.jsxs(ns,{children:[l.jsx(as,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>s.toggleSidebar(),children:l.jsx(Ll,{})})}),l.jsx(os,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Toggle Sidebar",l.jsxs(rr,{children:[l.jsx(Me,{className:"text-nowrap",children:""}),l.jsx(Me,{className:"text-nowrap",children:"B"})]})]})})]})},"header-sidebar"),l.jsx("div",{className:"grow"}),l.jsx("div",{className:"flex flex-row gap-1",children:r&&l.jsxs(l.Fragment,{children:[!i.isPending&&l.jsx(l.Fragment,{children:i.data?.user?l.jsx(me,{variant:"ghost",asChild:!0,children:l.jsx(aa,{disableDefaultLinks:!0,size:"sm",variant:"ghost"})}):l.jsxs(l.Fragment,{children:[l.jsx(me,{variant:"ghost",asChild:!0,children:l.jsx(it,{to:"/auth/sign-in",children:"Sign in"})}),l.jsx(me,{variant:"outline",asChild:!0,children:l.jsx(it,{to:"/auth/sign-up",children:"Sign up"})})]})}),l.jsxs(ns,{children:[l.jsx(as,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>t(!0),children:l.jsx(ea,{})})}),l.jsx(os,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Settings",l.jsxs(rr,{children:[l.jsx(Me,{className:"text-nowrap",children:""}),l.jsx(Me,{className:"text-nowrap",children:","})]})]})})]})]})},"header-right")]})})}function wp(){const s=V(n=>n.cloak),e=Se(n=>n.enabled),t=g.useRef(null),r=g.useRef(null),i=g.useRef(null);g.useEffect(()=>{if(t.current===null&&(t.current=document.title),!i.current){let n=document.querySelector('link[rel="icon"]');if(n||(n=document.createElement("link"),n.rel="icon",document.head.appendChild(n)),i.current=n,r.current===null){const a=n.href||n.getAttribute("href")||"";if(a)try{r.current=new URL(a,window.location.href).href}catch{r.current=a}else r.current=new URL("/favicon.ico",window.location.href).href}}},[]),g.useEffect(()=>{if(!(!e||s.mode!=="on"))return s.title&&(document.title=s.title),s.favicon&&i.current&&(i.current.href=s.favicon),()=>{t.current&&(document.title=t.current),r.current&&i.current&&(i.current.href=r.current)}},[e,s.mode,s.title,s.favicon]),g.useEffect(()=>{if(!e||s.mode!=="when-not-focused")return;const n=()=>{i.current&&(document.hidden?(s.title&&(document.title=s.title),s.favicon&&(i.current.href=s.favicon)):(t.current&&(document.title=t.current),r.current&&(i.current.href=r.current)))};return n(),document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n),t.current&&(document.title=t.current),r.current&&i.current&&(i.current.href=r.current)}},[e,s.mode,s.title,s.favicon]),g.useEffect(()=>{e&&s.mode!=="off"||(t.current&&(document.title=t.current),r.current&&i.current&&(i.current.href=r.current))},[e,s.mode])}function Ep(){const{loadingOverlayOpen:s,loadingOverlayMessage:e}=W();return l.jsxs("div",{className:Z("fixed inset-0 z-10000000 flex items-center justify-center bg-black/50 pointer-events-none opacity-0 transition-opacity duration-200 backdrop-blur-2xl gap-2",s&&"opacity-100 pointer-events-auto"),children:[l.jsx(wc,{}),l.jsx("p",{className:"text-sm text-white",children:e})]})}function kp(){const s=W(o=>o.commandPaletteOpen),e=W(o=>o.setCommandPaletteOpen),t=W(o=>o.setSettingsOpen),r=W(o=>o.setLoadingOverlayOpen),i=W(o=>o.setLoadingOverlayMessage),n=He.useSession(),a=[{label:"Settings",icon:ea,onSelect:()=>{t(!0)},kbd:" ,"},...n.data?.user?[{label:"Sign out",icon:Dl,onSelect:async()=>{r(!0),i("Signing out..."),await He.signOut(),r(!1)}}]:[{label:"Github",id:"github"},{label:"Google",id:"google"},{label:"Discord",id:"discord"}].map(o=>({label:"Continue with "+o.label,icon:Bl,onSelect:async()=>{const c=new URL("https://majestic-oriole-711.convex.site"),u=new URL("/auth",c);u.searchParams.set("redirect",window.location.href),r(!0),i("Signing in..."),await He.signIn.social({provider:o.id,callbackURL:u.toString()})}}))];return l.jsxs(Bo,{open:s,onOpenChange:e,children:[l.jsx(Ii,{placeholder:"Search commands"}),l.jsxs(Oi,{children:[l.jsx(Ti,{children:"No results found."}),l.jsx(sr,{children:a.map(o=>l.jsxs(cr,{value:o.label,onSelect:()=>{o.onSelect(),e(!1)},children:[o.icon&&l.jsx(o.icon,{}),o.label,o.kbd&&l.jsx(di,{children:o.kbd})]},o.label))})]})]})}function of({}){return[{title:"EduTools"}]}const lf=()=>[{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap"}],Sp=new Ql("https://majestic-oriole-711.convex.cloud");function cf({children:s}){const e=hi(),[t,r]=g.useState("");g.useEffect(()=>{r(location.protocol+"//"+location.host)},[]);const i=V(p=>p.theme),n=V(p=>p.disableBlurBehind),a=V(p=>p.disableAllBlur),o=V(p=>p.disableAnimations),c=Se(p=>p.enabled),u=Se(p=>p.setEnabled),d=W(p=>p.panicModeActivated);wp(),g.useEffect(()=>{const p=window.document.documentElement;Object.keys(Kr).forEach(_=>{p.classList.remove("theme-"+_)}),p.classList.remove("dark"),Kr[i.theme][i.mode]?i.mode=="dark"&&p.classList.add("dark"):i.mode!="dark"&&p.classList.add("dark"),p.classList.add("theme-"+i.theme)},[i]),g.useEffect(()=>{const p=window.document.documentElement;n||a?p.classList.add("disable-blur-behind"):p.classList.remove("disable-blur-behind")},[n,a]),g.useEffect(()=>{const p=window.document.documentElement;a?p.classList.add("disable-all-blur"):p.classList.remove("disable-all-blur")},[a]),g.useEffect(()=>{const p=window.document.documentElement;o?p.classList.add("disable-animations"):p.classList.remove("disable-animations")},[o]);const h=({href:p,..._})=>l.jsx(it,{to:p,..._}),v=W(p=>p.setLoadingOverlayOpen),f=W(p=>p.setLoadingOverlayMessage);return g.useEffect(()=>{JSON.parse(localStorage.getItem("preferences")||"{}").experimentalFeatures&&(u(!0),localStorage.removeItem("preferences"),setTimeout(()=>{xc.success("Migrated to new EduTools")},500))},[]),l.jsxs("html",{className:"theme-default dark",lang:"en",children:[l.jsxs("head",{children:[l.jsx("meta",{charSet:"utf-8"}),l.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),l.jsx(Jo,{}),l.jsx(Zo,{})]}),l.jsx("body",{children:l.jsx(Md,{apiKey:"phc_jg4gOdigfHQD4MSgrSaO883dp2LjNJbJO7azv61UtI0",options:{api_host:"https://2094835769823485010.ingo.au",defaults:"2025-05-24",capture_exceptions:!0,debug:!1,person_profiles:"always"},children:l.jsx(yp,{client:Sp,authClient:He,children:l.jsx(nh,{reducedMotion:o?"always":"user",transition:{ease:Os},children:l.jsxs(yc,{authClient:He,navigate:e,Link:h,credentials:!1,social:{providers:["github","google","discord"],signIn:p=>{const _=new URL("https://majestic-oriole-711.convex.site"),y=new URL("/auth",_);return y.searchParams.set("redirect",p.callbackURL||""),v(!0),f("Signing in..."),He.signIn.social({...p,callbackURL:y.toString()})}},deleteUser:!0,optimistic:!0,avatar:!0,changeEmail:!1,baseURL:t,children:[!d&&l.jsxs(hl,{className:Z(!c&&"md:pl-2"),children:[l.jsx(ah,{}),l.jsxs("div",{className:Z("flex flex-col w-full p-2 pt-0 md:pl-0 md:peer-data-[variant=inset]:peer-data-[state=collapsed]:pl-2 duration-200"),children:[l.jsx(xp,{}),l.jsx(pl,{className:"w-full rounded-md! overflow-hidden",children:l.jsx("main",{className:"w-full h-full relative",children:s})})]})]}),l.jsx(Qo,{}),l.jsx(el,{}),l.jsx(wh,{}),l.jsx(Vh,{}),l.jsx(kp,{}),l.jsx(pp,{}),l.jsx(_p,{}),l.jsx(Ep,{})]})})})})})]})}const uf=Yo(function(){return l.jsx(l.Fragment,{children:l.jsx(tl,{})})}),df=Xo(function({error:e}){let t="Something went wrong",r="An unexpected error occurred.",i;return rl(e)&&(t=e.status===404?"404":"Error",r=e.status===404?"The requested page could not be found.":e.statusText||r),l.jsx("main",{className:"w-full h-full max-w-screen flex flex-col gap-2 items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-4xl flex flex-col gap-4 items-center justify-center",children:[l.jsx("h1",{className:"text-4xl text-center",children:t}),l.jsx("p",{className:"text-center",children:r}),i]})})});export{df as ErrorBoundary,cf as Layout,uf as default,lf as links,of as meta};
