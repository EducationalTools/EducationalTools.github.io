import{w as l,B as h,t as d,a as r,p as c}from"./chunk-UIGDSWPH-BVQp00Zd.js";import{S as x}from"./spinner-Btmgatsu.js";import{a as w}from"./auth-client-CkxdHvhw.js";import{t as L}from"./index-DveFINiG.js";import{b as S}from"./ConvexAuthState-DQPI8SxW.js";import"./utils-DL16pZsE.js";import"./bundle-mjs-BJeS7sC5.js";import"./loader-circle-BtNSEyxM.js";import"./createLucideIcon-Bmk5bfkH.js";import"./index-DdRqjIto.js";const b=l(function(){const[a]=h(),m=a.get("token"),t=a.get("redirect"),n=S(),e=d(),[g,i]=r.useState(!0),[u,s]=r.useState("Loading");async function f(){s("Logging in");try{const o=await w.signIn.ott({token:m||""});if(o.error)s(o.error.message||""),i(!1);else if(L.success("Logged in"),t&&t.trim()!=="")try{const p=new URL(t);e(p.pathname)}catch{e(t)}else e("/")}catch{s("Something went wrong"),i(!1)}}return r.useEffect(()=>{n.isLoading||f()},[n.isLoading]),c.jsxs("div",{className:"w-full h-full flex flex-row gap-2 justify-center items-center p-4",children:[g&&c.jsx(x,{}),u]})});export{b as default};
