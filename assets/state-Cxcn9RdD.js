import{R as k}from"./chunk-UIGDSWPH-BVQp00Zd.js";const H=t=>{let s;const e=new Set,n=(i,v)=>{const g=typeof i=="function"?i(s):i;if(!Object.is(g,s)){const h=s;s=v??(typeof g!="object"||g===null)?g:Object.assign({},s,g),e.forEach(m=>m(s,h))}},a=()=>s,c={setState:n,getState:a,getInitialState:()=>d,subscribe:i=>(e.add(i),()=>e.delete(i))},d=s=t(n,a,c);return c},P=(t=>t?H(t):H),T=t=>t;function w(t,s=T){const e=k.useSyncExternalStore(t.subscribe,k.useCallback(()=>s(t.getState()),[t,s]),k.useCallback(()=>s(t.getInitialState()),[t,s]));return k.useDebugValue(e),e}const I=t=>{const s=P(t),e=n=>w(s,n);return Object.assign(e,s),e},p=(t=>t?I(t):I);function S(t,s){let e;try{e=t()}catch{return}return{getItem:a=>{var r;const f=d=>d===null?null:JSON.parse(d,void 0),c=(r=e.getItem(a))!=null?r:null;return c instanceof Promise?c.then(f):f(c)},setItem:(a,r)=>e.setItem(a,JSON.stringify(r,void 0)),removeItem:a=>e.removeItem(a)}}const E=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(n){return E(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return E(n)(e)}}}},C=(t,s)=>(e,n,a)=>{let r={storage:S(()=>localStorage),partialize:o=>o,version:0,merge:(o,y)=>({...y,...o}),...s},f=!1;const c=new Set,d=new Set;let i=r.storage;if(!i)return t((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...o)},n,a);const v=()=>{const o=r.partialize({...n()});return i.setItem(r.name,{state:o,version:r.version})},g=a.setState;a.setState=(o,y)=>(g(o,y),v());const h=t((...o)=>(e(...o),v()),n,a);a.getInitialState=()=>h;let m;const A=()=>{var o,y;if(!i)return;f=!1,c.forEach(l=>{var u;return l((u=n())!=null?u:h)});const O=((y=r.onRehydrateStorage)==null?void 0:y.call(r,(o=n())!=null?o:h))||void 0;return E(i.getItem.bind(i))(r.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==r.version){if(r.migrate){const u=r.migrate(l.state,l.version);return u instanceof Promise?u.then(B=>[!0,B]):[!0,u]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var u;const[B,x]=l;if(m=r.merge(x,(u=n())!=null?u:h),e(m,!0),B)return v()}).then(()=>{O?.(m,void 0),m=n(),f=!0,d.forEach(l=>l(m))}).catch(l=>{O?.(void 0,l)})};return a.persist={setOptions:o=>{r={...r,...o},o.storage&&(i=o.storage)},clearStorage:()=>{i?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>A(),hasHydrated:()=>f,onHydrate:o=>(c.add(o),()=>{c.delete(o)}),onFinishHydration:o=>(d.add(o),()=>{d.delete(o)})},r.skipHydration||A(),m||h},b=C,K=p()(b(t=>({enabled:!1,toggle:()=>t(s=>({enabled:!s.enabled})),setEnabled:s=>t({enabled:s})}),{name:"edutools-experimental-features",storage:S(()=>localStorage)})),R=p(t=>({searchOpen:!1,setSearchOpen:s=>t({searchOpen:s}),settingsOpen:!1,setSettingsOpen:s=>t({settingsOpen:s}),commandPaletteOpen:!1,setCommandPaletteOpen:s=>t({commandPaletteOpen:s}),panicModeActivated:!1,setPanicModeActivated:s=>t({panicModeActivated:s}),loadingOverlayOpen:!1,setLoadingOverlayOpen:s=>t({loadingOverlayOpen:s}),loadingOverlayMessage:"",setLoadingOverlayMessage:s=>t({loadingOverlayMessage:s})})),M=p()(b((t,s)=>({theme:{mode:"dark",theme:"default"},setTheme:e=>t({theme:{...s().theme,...e}}),panicKey:{enabled:!1,url:"https://classroom.google.com",key:"shift+escape",disableExperimentalOnTrigger:!0},setPanicKey:e=>t({panicKey:{...s().panicKey,...e}}),cloak:{mode:"off",title:"Home",favicon:"https://ssl.gstatic.com/classroom/favicon.png"},setCloak:e=>t({cloak:{...s().cloak,...e}}),disableBlurBehind:!1,setDisableBlurBehind:e=>{s().disableAllBlur&&!e||t({disableBlurBehind:e})},disableAllBlur:!1,setDisableAllBlur:e=>{t(e?{disableAllBlur:!0,disableBlurBehind:!0}:{disableAllBlur:!1})},disableAnimations:!1,setDisableAnimations:e=>t({disableAnimations:e})}),{name:"edutools-settings",storage:S(()=>localStorage)})),F=p()(b((t,s)=>({saved:[],isSaved:e=>s().saved.includes(e),toggleSaved:e=>t(n=>({saved:n.saved.includes(e)?n.saved.filter(a=>a!==e):[...n.saved,e]}))}),{name:"edutools-saved-gmaes",storage:S(()=>localStorage)})),j=p()(b((t,s)=>({history:[],addToHistory:e=>t(n=>n.history.includes(e)?{history:[...n.history.filter(a=>a!==e),e]}:{history:[...n.history,e]}),removeFromHistory:e=>t(n=>({history:n.history.filter(a=>a!==e)})),clearHistory:()=>t({history:[]})}),{name:"edutools-gmae-history",storage:S(()=>localStorage)})),J=p()(b(t=>({historyCollectionEnabled:!0,setHistoryCollectionEnabled:s=>t({historyCollectionEnabled:s})}),{name:"edutools-privacy",storage:S(()=>localStorage)})),D=()=>{j.getState().clearHistory()},G=()=>{const t={theme:{mode:"dark",theme:"default"},panicKey:{enabled:!1,url:"https://classroom.google.com",key:"shift+escape",disableExperimentalOnTrigger:!0},cloak:{mode:"off",title:"",favicon:""},disableBlurBehind:!1,disableAllBlur:!1,disableAnimations:!1};M.setState(t)},L=()=>{const t=[];Object.keys(localStorage).forEach(s=>{t.includes(s)||localStorage.removeItem(s)}),Object.keys(sessionStorage).forEach(s=>{sessionStorage.removeItem(s)}),document.cookie.split(";").forEach(s=>{const e=s.trim();if(e){const n=e.indexOf("="),a=n>-1?e.substring(0,n):e;a&&(document.cookie=`${a}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${a}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`)}}),window.location.reload()};export{K as a,M as b,J as c,j as d,D as e,L as f,F as g,G as r,R as u};
