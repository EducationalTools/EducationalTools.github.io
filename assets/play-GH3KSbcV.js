import{p as e,w as N,z as m,a as x}from"./chunk-JMJ3UQ3L-DLa4wvEN.js";import{g as y}from"./gmaes-DvkgVeb-.js";import{B as a}from"./button-D7tyPeF-.js";import{u as k,Z as P,ab as S,ac as z,k as F,ad as E,ae as O,H as T,af as G,ag as B}from"./index-Dr94eIYd.js";import{a as R}from"./index-CPvIzByb.js";import{c as A}from"./utils-BB8OEnXs.js";import{u as H,T as o,l,m as d}from"./sidebar-dtmpQVvL.js";import{t as c}from"./index-Bqq4DHLr.js";import{d as M,g,c as _}from"./state-DJ_Xbwdm.js";import{i as q}from"./experimental-check-BwBX2eWT.js";import"./bundle-mjs-BNe0Xlio.js";import"./index-DUVdAX2J.js";import"./index-BoNYA7lJ.js";import"./index-CeJ37sa3.js";import"./index-RdSmrbPg.js";import"./index-vAMRNKaC.js";import"./index-DhSUr4ds.js";import"./index-CFCRIzy5.js";const L=R("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function w({className:t,orientation:i,...n}){return e.jsx("div",{role:"group","data-slot":"button-group","data-orientation":i,className:A(L({orientation:i}),t),...n})}async function oe({params:t}){if(!t.id)throw m(null,{status:404});if(!y(t.id))throw m(null,{status:404});if(!q())throw m(null,{status:404})}const le=N(function(i){return e.jsx(e.Fragment,{children:e.jsx(U,{...i},i.params.id)})});function U({params:t}){const i=y(t.id),n=x.useRef(null),u=H(),[v,p]=x.useState(!1),f=M(s=>s.addToHistory),b=g(s=>s.saved),C=g(s=>s.toggleSaved),j=_(s=>s.historyCollectionEnabled),h=i?.id?b.includes(i.id):!1;return x.useEffect(()=>{i?.id&&j&&f(i.id)},[i?.id,j,f]),e.jsxs("div",{className:"w-full h-full flex flex-col gap-2 bg-sidebar",children:[e.jsx("iframe",{src:i?.url,ref:n,className:"w-full h-full rounded-md fullscreen:rounded-none"}),v?e.jsxs("div",{className:"p-2 md:py-0 flex flex-row",children:[e.jsx("h1",{className:"text-xl",children:i?.name}),e.jsx("div",{className:"grow"}),e.jsx(a,{size:"icon",variant:"ghost",onClick:()=>{u.isMobile||u.setOpen(!0),p(!1)},children:e.jsx(B,{})})]}):e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 bg-card md:p-0 p-2",children:[e.jsxs("div",{className:"flex flex-col p-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:i?.category}),e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:i?.name}),e.jsx("p",{className:"leading-7",children:i?.description})]}),e.jsx("div",{className:"grow"}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsxs(w,{children:[e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",variant:"outline",onClick:()=>{n.current?.focus(),c.success("Focused gmae")},children:[e.jsx(k,{}),e.jsx("span",{className:"sr-only",children:"Fix keyboard input"})]})}),e.jsx(d,{children:"Fix keyboard input"})]}),e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",variant:"outline",onClick:()=>{n.current?.contentWindow?.location.reload()},children:[e.jsx(P,{}),e.jsx("span",{className:"sr-only",children:"Reload"})]})}),e.jsx(d,{children:"Reload"})]}),e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",variant:"outline",onClick:()=>{const s=window.open("","","width=500px,height=500px");let r=document.createElement("iframe");r.src=i?.url||"",r.style.width="100%",r.style.height="100%",r.style.border="none",s?.document.body.appendChild(r),s&&(s.document.body.style.margin="0",s.document.title="Google")},children:[e.jsx(S,{}),e.jsx("span",{className:"sr-only",children:"Open in new window"})]})}),e.jsx(d,{children:"Open in new window"})]}),e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",variant:"outline",onClick:()=>{const s=window.open("");let r=document.createElement("iframe");r.src=i?.url||"",r.style.width="100%",r.style.height="100%",r.style.border="none",s?.document.body.appendChild(r),s&&(s.document.body.style.margin="0",s.document.title="Google")},children:[e.jsx(z,{}),e.jsx("span",{className:"sr-only",children:"Open in new tab"})]})}),e.jsx(d,{children:"Open in new tab"})]}),e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",onClick:()=>{u.setOpen(!1),p(!0)},variant:"outline",children:[e.jsx(F,{}),e.jsx("span",{className:"sr-only",children:"Maximize"})]})}),e.jsx(d,{children:"Maximize"})]}),e.jsxs(o,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(a,{size:"icon",onClick:()=>{n.current?.requestFullscreen(),n.current?.focus()},children:[e.jsx(E,{}),e.jsx("span",{className:"sr-only",children:"Fullscreen"})]})}),e.jsx(d,{children:"Fullscreen"})]})]}),e.jsxs(w,{children:[e.jsxs(a,{variant:h?"default":"outline",onClick:()=>{i?.id&&C(i.id)},children:[h?e.jsx(O,{}):e.jsx(T,{}),h?"Saved":"Save"]}),e.jsxs(a,{variant:"outline",onClick:async()=>{const s=new URL(window.location.href);if(s.searchParams.set("utm_medium","share"),s.searchParams.set("utm_source","edutools"),s.searchParams.set("utm_campaign","play-page-share"),!navigator.canShare||!navigator.share){if(!navigator.clipboard){c.error("Failed to share");return}navigator.clipboard.writeText(s.toString()).then(()=>{c.success("Copied to clipboard")})}else navigator.share({url:s.toString()}).catch(r=>{r!="AbortError: Share canceled"&&c.error("Failed to share")})},children:[e.jsx(G,{}),"Share"]})]})]})]})]})}export{oe as clientLoader,le as default};
