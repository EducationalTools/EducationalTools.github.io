import{a as g,R as ft,p as l,q as zo,L as at,t as fs,w as Go,v as Vo,M as Wo,x as Ko,S as Yo,y as Jo,O as Xo,i as Zo}from"./chunk-UIGDSWPH-BVQp00Zd.js";import{u as Kn,S as Qo,a as el,b as ni,c as Nt,d as Rt,e as tl,f as rl,g as il,h as sl,i as nl,j as al,k as ol,K as ll,T as ai,l as oi,m as li,n as cl,o as ul}from"./sidebar-B5ax6VRq.js";import{c as X}from"./utils-DL16pZsE.js";import{u as Yn,c as Jn,a as Xn,P as dl,b as hl}from"./index-jf6C1AH_.js";import{c as lt,u as gs}from"./index-DstcrvaX.js";import"./index-DdRqjIto.js";import{u as ot}from"./index-DdfkXwL2.js";import{c as pl}from"./bundle-mjs-BJeS7sC5.js";import{p as fl}from"./gmaes-DBIuQo-c.js";import{T as gl,W as vl,C as ml,a as _l,P as yl}from"./tools-BHn0jSrN.js";import{c as ke}from"./createLucideIcon-Bmk5bfkH.js";import{A as bl,M as Bs,u as xl,l as wl,a as kl,b as Zn,m as Ar,N as Fi}from"./constants-hDAxwCjT.js";import{F as El}from"./file-text-BihSaJgy.js";import{u as V,a as je,b as W,c as Us,d as Sl,e as jl,r as Cl,f as Pl}from"./state-Cxcn9RdD.js";import{u as $l,C as Nl,a as Rl}from"./ConvexAuthState-DQPI8SxW.js";import{C as Fl}from"./index-DvOHeDw5.js";import{R as Ol,P as Il,O as Al,C as Tl,D as Ml}from"./index-PsY7313p.js";import{P as Qe}from"./index-D-DhaM8u.js";import{D as Oi,a as Ii,b as Ai,c as Ll,d as Ti,C as Dl,e as Hl,f as Bl,g as Ul,h as ql,i as qs,S as et}from"./dropdown-menu-CQacSgTo.js";import{A as Mi}from"./arrow-right-DcOxzzrK.js";import{C as Qn}from"./circle-check-D9-6EsNL.js";import{C as zl}from"./check-BfwWstbD.js";import{B as me}from"./button-BtmAzGuo.js";import{C as Gl}from"./checkbox-CKiAacA2.js";import{u as Vl}from"./index-FgTQCufy.js";import{u as Wl}from"./index-C0gfdQtO.js";import{I as gr}from"./input-CFSxLv1b.js";import{C as Ft,a as Ot,b as It,c as At,d as zs}from"./card-BDP7RXBL.js";import{T as Kl,a as Yl,b as ci}from"./tabs-2qRyPRaw.js";import{A as vr,a as mr,b as _r,c as yr,d as br,e as xr,f as wr,g as kr,h as Er}from"./alert-dialog-Dxd0_0Kt.js";import{U as Jl,a as Xl,P as Zl,L as Ql,S as ec,b as ea,c as ta,d as tc,e as rc,A as ic}from"./index-BdLJXP3A.js";import{a as Be}from"./auth-client-CkxdHvhw.js";import{G as sc}from"./globe-LoMsnZmB.js";import{E as nc}from"./eye-x30xJHNa.js";import{T as ac}from"./trash-2-KIGAz7Ns.js";import{R as oc}from"./rotate-ccw-DxS3hacg.js";import{T as Wt}from"./triangle-alert-B-5WMad9.js";import{T as lc,t as cc}from"./index-DveFINiG.js";import{L as uc}from"./loader-circle-BtNSEyxM.js";import{S as dc}from"./spinner-Btmgatsu.js";import"./index-zl-w0dW4.js";import"./type-Bln6nMqS.js";import"./dices-CKREKVWG.js";import"./binary-XS86APPg.js";import"./qr-code-Dkc8KY82.js";import"./fingerprint-D99N_kWV.js";import"./file-braces-BL49RWl9.js";import"./lock-D1jwnNL-.js";import"./link-pIrtIXWn.js";import"./index-BicwhqL7.js";import"./x-BOpA-gKp.js";import"./sha2-3zd_KfSO.js";import"./copy-BPHNvrM9.js";var m=typeof window<"u"?window:void 0,se=typeof globalThis<"u"?globalThis:m;typeof self>"u"&&(se.self=se),typeof File>"u"&&(se.File=function(){});var ra=Array.prototype,Gs=ra.forEach,Vs=ra.indexOf,_e=se?.navigator,k=se?.document,pe=se?.location,Li=se?.fetch,Di=se!=null&&se.XMLHttpRequest&&"withCredentials"in new se.XMLHttpRequest?se.XMLHttpRequest:void 0,Ws=se?.AbortController,he=_e?.userAgent,R=m??{},Ae={DEBUG:!1,LIB_VERSION:"1.299.0"};function Ks(i,e,t,r,s,n,a){try{var o=i[n](a),c=o.value}catch(u){return void t(u)}o.done?e(c):Promise.resolve(c).then(r,s)}function Ys(i){return function(){var e=this,t=arguments;return new Promise((function(r,s){var n=i.apply(e,t);function a(c){Ks(n,r,s,a,o,"next",c)}function o(c){Ks(n,r,s,a,o,"throw",c)}a(void 0)}))}}function j(){return j=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},j.apply(null,arguments)}function ia(i,e){if(i==null)return{};var t={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.indexOf(r)!==-1)continue;t[r]=i[r]}return t}var hc=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Js=function(i,e){if(e===void 0&&(e=[]),!i)return!1;var t=i.toLowerCase();return hc.concat(e).some((r=>{var s=r.toLowerCase();return t.indexOf(s)!==-1}))},pc=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function T(i,e){return i.indexOf(e)!==-1}var Jr=function(i){return i.trim()},Hi=function(i){return i.replace(/^\$/,"")},fc=Array.isArray,sa=Object.prototype,na=sa.hasOwnProperty,Xr=sa.toString,H=fc||function(i){return Xr.call(i)==="[object Array]"},Ke=i=>typeof i=="function",ie=i=>i===Object(i)&&!H(i),yt=i=>{if(ie(i)){for(var e in i)if(na.call(i,e))return!1;return!0}return!1},w=i=>i===void 0,J=i=>Xr.call(i)=="[object String]",Bi=i=>J(i)&&i.trim().length===0,qe=i=>i===null,B=i=>w(i)||qe(i),Fe=i=>Xr.call(i)=="[object Number]",Ye=i=>Xr.call(i)==="[object Boolean]",gc=i=>i instanceof FormData,vc=i=>T(pc,i);function Ui(i){return i===null||typeof i!="object"}function Tr(i,e){return Object.prototype.toString.call(i)==="[object "+e+"]"}function aa(i){return!w(Event)&&(function(e,t){try{return e instanceof t}catch{return!1}})(i,Event)}var mc=[!0,"true",1,"1","yes"],ui=i=>T(mc,i),_c=[!1,"false",0,"0","no"];function $e(i,e,t,r,s){return e>t&&(r.warn("min cannot be greater than max."),e=t),Fe(i)?i>t?(r.warn(" cannot be  greater than max: "+t+". Using max value instead."),t):i<e?(r.warn(" cannot be less than min: "+e+". Using min value instead."),e):i:(r.warn(" must be a number. using max or fallback. max: "+t+", fallback: "+s),$e(s||t,e,t,r))}let yc=class{constructor(e){this.t={},this.i=e.i,this.o=$e(e.bucketSize,0,100,e.h),this.m=$e(e.refillRate,0,this.o,e.h),this.S=$e(e.refillInterval,0,864e5,e.h)}$(e,t){var r=t-e.lastAccess,s=Math.floor(r/this.S);if(s>0){var n=s*this.m;e.tokens=Math.min(e.tokens+n,this.o),e.lastAccess=e.lastAccess+s*this.S}}consumeRateLimit(e){var t,r=Date.now(),s=String(e),n=this.t[s];return n?this.$(n,r):(n={tokens:this.o,lastAccess:r},this.t[s]=n),n.tokens===0||(n.tokens--,n.tokens===0&&((t=this.i)==null||t.call(this,e)),n.tokens===0)}stop(){this.t={}}};var Sr,Xs,di,bc=i=>i instanceof Error;function xc(i){var e=globalThis._posthogChunkIds;if(e){var t=Object.keys(e);return di&&t.length===Xs||(Xs=t.length,di=t.reduce(((r,s)=>{Sr||(Sr={});var n=Sr[s];if(n)r[n[0]]=n[1];else for(var a=i(s),o=a.length-1;o>=0;o--){var c=a[o],u=c?.filename,d=e[s];if(u&&d){r[u]=d,Sr[s]=[u,d];break}}return r}),{})),di}}class wc{constructor(e,t,r){r===void 0&&(r=[]),this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t){t===void 0&&(t={});var r=t&&t.mechanism||{handled:!0,type:"generic"},s=this.buildCoercingContext(r,t,0).apply(e),n=this.buildParsingContext(),a=this.parseStacktrace(s,n);return{$exception_list:this.convertToExceptionList(a,r),$exception_level:"error"}}modifyFrames(e){var t=this;return Ys((function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&H(r.stacktrace.frames)&&(r.stacktrace.frames=yield t.applyModifiers(r.stacktrace.frames));return e}))()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:(t=e.syntheticException)==null?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var r,s;return e.cause!=null&&(r=this.parseStacktrace(e.cause,t)),e.stack!=""&&e.stack!=null&&(s=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),j({},e,{cause:r,stack:s})}applyChunkIds(e,t){return e.map((r=>(r.filename&&t&&(r.chunk_id=t[r.filename]),r)))}applyCoercers(e,t){for(var r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return Ys((function*(){var r=e;for(var s of t.modifiers)r=yield s(r);return r}))()}convertToExceptionList(e,t){var r,s,n,a={type:e.type,value:e.value,mechanism:{type:(r=t.type)!==null&&r!==void 0?r:"generic",handled:(s=t.handled)===null||s===void 0||s,synthetic:(n=e.synthetic)!==null&&n!==void 0&&n}};e.stack&&(a.stacktrace={type:"raw",frames:e.stack});var o=[a];return e.cause!=null&&o.push(...this.convertToExceptionList(e.cause,j({},t,{handled:!0}))),o}buildParsingContext(){return{chunkIdMap:xc(this.stackParser)}}buildCoercingContext(e,t,r){r===void 0&&(r=0);var s=(n,a)=>{if(a<=4){var o=this.buildCoercingContext(e,t,a);return this.applyCoercers(n,o)}};return j({},t,{syntheticException:r==0?t.syntheticException:void 0,mechanism:e,apply:n=>s(n,r),next:n=>s(n,r+1)})}}var kt="?";function qi(i,e,t,r,s){var n={platform:i,filename:e,function:t==="<anonymous>"?kt:t,in_app:!0};return w(r)||(n.lineno=r),w(s)||(n.colno=s),n}var oa=(i,e)=>{var t=i.indexOf("safari-extension")!==-1,r=i.indexOf("safari-web-extension")!==-1;return t||r?[i.indexOf("@")!==-1?i.split("@")[0]:kt,t?"safari-extension:"+e:"safari-web-extension:"+e]:[i,e]},kc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ec=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Sc=/\((\S*)(?::(\d+))(?::(\d+))\)/,jc=(i,e)=>{var t=kc.exec(i);if(t){var[,r,s,n]=t;return qi(e,r,kt,+s,+n)}var a=Ec.exec(i);if(a){if(a[2]&&a[2].indexOf("eval")===0){var o=Sc.exec(a[2]);o&&(a[2]=o[1],a[3]=o[2],a[4]=o[3])}var[c,u]=oa(a[1]||kt,a[2]);return qi(e,u,c,a[3]?+a[3]:void 0,a[4]?+a[4]:void 0)}},Cc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,$c=(i,e)=>{var t=Cc.exec(i);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var r=Pc.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}var s=t[3],n=t[1]||kt;return[n,s]=oa(n,s),qi(e,s,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Zs=/\(error: (.*)\)/,Qs=50;function Nc(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return function(s,n){n===void 0&&(n=0);for(var a=[],o=s.split(`
`),c=n;c<o.length;c++){var u=o[c];if(!(u.length>1024)){var d=Zs.test(u)?u.replace(Zs,"$1"):u;if(!d.match(/\S*Error: /)){for(var h of t){var v=h(d,i);if(v){a.push(v);break}}if(a.length>=Qs)break}}}return(function(p){if(!p.length)return[];var f=Array.from(p);return f.reverse(),f.slice(0,Qs).map((_=>{return j({},_,{filename:_.filename||(y=f,y[y.length-1]||{}).filename,function:_.function||kt});var y}))})(a)}}class Rc{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var r=J(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return Tr(e,"DOMException")}isDOMError(e){return Tr(e,"DOMError")}}class Fc{match(e){return(t=>t instanceof Error)(e)}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var r=e.message;return r.error&&typeof r.error.message=="string"?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class Oc{constructor(){}match(e){return Tr(e,"ErrorEvent")&&e.error!=null}coerce(e,t){var r,s=t.apply(e.error);return s||{type:"ErrorEvent",value:e.message,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}var Ic=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class Ac{match(e){return typeof e=="string"}coerce(e,t){var r,[s,n]=this.getInfos(e);return{type:s??"Error",value:n??e,stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}getInfos(e){var t="Error",r=e,s=e.match(Ic);return s&&(t=s[1],r=s[2]),[t,r]}}var Tc=["fatal","error","warning","log","info","debug"];function la(i,e){e===void 0&&(e=40);var t=Object.keys(i);if(t.sort(),!t.length)return"[object has no keys]";for(var r=t.length;r>0;r--){var s=t.slice(0,r).join(", ");if(!(s.length>e))return r===t.length||s.length<=e?s:s.slice(0,e)+"..."}return""}class Mc{match(e){return typeof e=="object"&&e!==null}coerce(e,t){var r,s=this.getErrorPropertyFromObject(e);return s?t.apply(s):{type:this.getType(e),value:this.getValue(e),stack:(r=t.syntheticException)==null?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return aa(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&typeof e.name=="string"){var t="'"+e.name+"' captured as exception";return"message"in e&&typeof e.message=="string"&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&typeof e.message=="string")return e.message;var r=this.getObjectClassName(e);return(r&&r!=="Object"?"'"+r+"'":"Object")+" captured as exception with keys: "+la(e)}isSeverityLevel(e){return J(e)&&!Bi(e)&&Tc.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(bc(r))return r}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{return}}}class Lc{match(e){return aa(e)}coerce(e,t){var r,s=e.constructor.name;return{type:s,value:s+" captured as exception with keys: "+la(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class Dc{match(e){return Ui(e)}coerce(e,t){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class Hc{match(e){return Tr(e,"PromiseRejectionEvent")}coerce(e,t){var r,s=this.getUnhandledRejectionReason(e);return Ui(s)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(s),stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}:t.apply(s)}getUnhandledRejectionReason(e){if(Ui(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}var ca=function(i,e){var{debugEnabled:t}=e===void 0?{}:e,r={k:function(s){if(m&&(Ae.DEBUG||R.POSTHOG_DEBUG||t)&&!w(m.console)&&m.console){for(var n=("__rrweb_original__"in m.console[s])?m.console[s].__rrweb_original__:m.console[s],a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];n(i,...o)}},info:function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];r.k("log",...n)},warn:function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];r.k("warn",...n)},error:function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];r.k("error",...n)},critical:function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];console.error(i,...n)},uninitializedWarning:s=>{r.error("You must initialize PostHog before calling "+s)},createLogger:(s,n)=>ca(i+" "+s,n)};return r},E=ca("[PostHog.js]"),Z=E.createLogger,Bc=Z("[ExternalScriptsLoader]"),en=(i,e,t)=>{if(i.config.disable_external_dependency_loading)return Bc.warn(e+" was requested but loading of external scripts is disabled."),t("Loading of external scripts is disabled");var r=k?.querySelectorAll("script");if(r){for(var s,n=function(){if(r[a].src===e){var c=r[a];return c.__posthog_loading_callback_fired?{v:t()}:(c.addEventListener("load",(u=>{c.__posthog_loading_callback_fired=!0,t(void 0,u)})),c.onerror=u=>t(u),{v:void 0})}},a=0;a<r.length;a++)if(s=n())return s.v}var o=()=>{if(!k)return t("document not found");var c=k.createElement("script");if(c.type="text/javascript",c.crossOrigin="anonymous",c.src=e,c.onload=h=>{c.__posthog_loading_callback_fired=!0,t(void 0,h)},c.onerror=h=>t(h),i.config.prepare_external_dependency_script&&(c=i.config.prepare_external_dependency_script(c)),!c)return t("prepare_external_dependency_script returned null");var u,d=k.querySelectorAll("body > script");d.length>0?(u=d[0].parentNode)==null||u.insertBefore(c,d[0]):k.body.appendChild(c)};k!=null&&k.body?o():k?.addEventListener("DOMContentLoaded",o)};R.__PosthogExtensions__=R.__PosthogExtensions__||{},R.__PosthogExtensions__.loadExternalDependency=(i,e,t)=>{var r="/static/"+e+".js?v="+i.version;if(e==="remote-config"&&(r="/array/"+i.config.token+"/config.js"),e==="toolbar"){var s=3e5;r=r+"&t="+Math.floor(Date.now()/s)*s}var n=i.requestRouter.endpointFor("assets",r);en(i,n,t)},R.__PosthogExtensions__.loadSiteApp=(i,e,t)=>{var r=i.requestRouter.endpointFor("api",e);en(i,r,t)};var Mr={};function Je(i,e,t){if(H(i)){if(Gs&&i.forEach===Gs)i.forEach(e,t);else if("length"in i&&i.length===+i.length){for(var r=0,s=i.length;r<s;r++)if(r in i&&e.call(t,i[r],r)===Mr)return}}}function U(i,e,t){if(!B(i)){if(H(i))return Je(i,e,t);if(gc(i)){for(var r of i.entries())if(e.call(t,r[1],r[0])===Mr)return}else for(var s in i)if(na.call(i,s)&&e.call(t,i[s],s)===Mr)return}}var K=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Je(t,(function(s){for(var n in s)s[n]!==void 0&&(i[n]=s[n])})),i},Ct=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Je(t,(function(s){Je(s,(function(n){i.push(n)}))})),i};function Fr(i){for(var e=Object.keys(i),t=e.length,r=new Array(t);t--;)r[t]=[e[t],i[e[t]]];return r}var tn=function(i){try{return i()}catch{return}},Uc=function(i){return function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.apply(this,t)}catch(s){E.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),E.critical(s)}}},vs=function(i){var e={};return U(i,(function(t,r){(J(t)&&t.length>0||Fe(t))&&(e[r]=t)})),e};function qc(i,e){return t=i,r=n=>J(n)&&!qe(e)?n.slice(0,e):n,s=new Set,(function n(a,o){return a!==Object(a)?r?r(a,o):a:s.has(a)?void 0:(s.add(a),H(a)?(c=[],Je(a,(u=>{c.push(n(u))}))):(c={},U(a,((u,d)=>{s.has(u)||(c[d]=n(u,d))}))),c);var c})(t);var t,r,s}var zc=["herokuapp.com","vercel.app","netlify.app"];function Gc(i){var e=i?.hostname;if(!J(e))return!1;var t=e.split(".").slice(-2).join(".");for(var r of zc)if(t===r)return!1;return!0}function ua(i,e){for(var t=0;t<i.length;t++)if(e(i[t]))return i[t]}function Y(i,e,t,r){var{capture:s=!1,passive:n=!0}=r??{};i?.addEventListener(e,t,{capture:s,passive:n})}var da="$people_distinct_id",Kt="__alias",Yt="__timers",rn="$autocapture_disabled_server_side",zi="$heatmaps_enabled_server_side",sn="$exception_capture_enabled_server_side",Gi="$error_tracking_suppression_rules",nn="$error_tracking_capture_extension_exceptions",an="$web_vitals_enabled_server_side",ha="$dead_clicks_enabled_server_side",on="$web_vitals_allowed_metrics",hi="$session_recording_remote_config",Lr="$sesid",pa="$session_is_sampled",bt="$enabled_feature_flags",Jt="$early_access_features",Vi="$feature_flag_details",Xt="$stored_person_properties",st="$stored_group_properties",Wi="$surveys",jr="$surveys_activated",Dr="$flag_call_reported",Te="$user_state",Ki="$client_session_props",Yi="$capture_rate_limit",Ji="$initial_campaign_params",Xi="$initial_referrer_info",Hr="$initial_person_info",Br="$epp",fa="__POSTHOG_TOOLBAR__",Tt="$posthog_cookieless",Vc=[da,Kt,"__cmpns",Yt,"$session_recording_enabled_server_side",zi,Lr,bt,Gi,Te,Jt,Vi,st,Xt,Wi,Dr,Ki,Yi,Ji,Xi,Br,Hr];function ln(i){return i instanceof Element&&(i.id===fa||!(i.closest==null||!i.closest(".toolbar-global-fade-container")))}function Zr(i){return!!i&&i.nodeType===1}function Xe(i,e){return!!i&&!!i.tagName&&i.tagName.toLowerCase()===e.toLowerCase()}function ga(i){return!!i&&i.nodeType===3}function va(i){return!!i&&i.nodeType===11}function ms(i){return i?Jr(i).split(/\s+/):[]}function cn(i){var e=m?.location.href;return!!(e&&i&&i.some((t=>e.match(t))))}function Ur(i){var e="";switch(typeof i.className){case"string":e=i.className;break;case"object":e=(i.className&&"baseVal"in i.className?i.className.baseVal:null)||i.getAttribute("class")||"";break;default:e=""}return ms(e)}function ma(i){return B(i)?null:Jr(i).split(/(\s+)/).filter((e=>nr(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function dr(i){var e="";return Zi(i)&&!wa(i)&&i.childNodes&&i.childNodes.length&&U(i.childNodes,(function(t){var r;ga(t)&&t.textContent&&(e+=(r=ma(t.textContent))!==null&&r!==void 0?r:"")})),Jr(e)}function _a(i){return w(i.target)?i.srcElement||null:(e=i.target)!=null&&e.shadowRoot?i.composedPath()[0]||null:i.target||null;var e}var _s=["a","button","form","input","select","textarea","label"];function ya(i,e){if(w(e))return!0;var t,r=function(n){if(e.some((a=>n.matches(a))))return{v:!0}};for(var s of i)if(t=r(s))return t.v;return!1}function ba(i){var e=i.parentNode;return!(!e||!Zr(e))&&e}var Wc=["next","previous","prev",">","<"],un=10,dn=[".ph-no-rageclick",".ph-no-capture"];function Kc(i,e){if(!m||ys(i))return!1;var t,r,s;if(Ye(e)?(t=!!e&&dn,r=void 0):(t=(s=e?.css_selector_ignorelist)!==null&&s!==void 0?s:dn,r=e?.content_ignorelist),t===!1)return!1;var{targetElementList:n}=xa(i,!1);return!(function(a,o){if(a===!1||w(a))return!1;var c;if(a===!0)c=Wc;else{if(!H(a))return!1;if(a.length>un)return E.error("[PostHog] content_ignorelist array cannot exceed "+un+" items. Use css_selector_ignorelist for more complex matching."),!1;c=a.map((u=>u.toLowerCase()))}return o.some((u=>{var{safeText:d,ariaLabel:h}=u;return c.some((v=>d.includes(v)||h.includes(v)))}))})(r,n.map((a=>{var o;return{safeText:dr(a).toLowerCase(),ariaLabel:((o=a.getAttribute("aria-label"))==null?void 0:o.toLowerCase().trim())||""}})))&&!ya(n,t)}var ys=i=>!i||Xe(i,"html")||!Zr(i),xa=(i,e)=>{if(!m||ys(i))return{parentIsUsefulElement:!1,targetElementList:[]};for(var t=!1,r=[i],s=i;s.parentNode&&!Xe(s,"body");)if(va(s.parentNode))r.push(s.parentNode.host),s=s.parentNode.host;else{var n=ba(s);if(!n)break;if(e||_s.indexOf(n.tagName.toLowerCase())>-1)t=!0;else{var a=m.getComputedStyle(n);a&&a.getPropertyValue("cursor")==="pointer"&&(t=!0)}r.push(n),s=n}return{parentIsUsefulElement:t,targetElementList:r}};function Yc(i,e,t,r,s){var n,a,o,c;if(t===void 0&&(t=void 0),!m||ys(i)||(n=t)!=null&&n.url_allowlist&&!cn(t.url_allowlist)||(a=t)!=null&&a.url_ignorelist&&cn(t.url_ignorelist))return!1;if((o=t)!=null&&o.dom_event_allowlist){var u=t.dom_event_allowlist;if(u&&!u.some((f=>e.type===f)))return!1}var{parentIsUsefulElement:d,targetElementList:h}=xa(i,r);if(!(function(f,_){var y=_?.element_allowlist;if(w(y))return!0;var S,C=function(P){if(y.some((L=>P.tagName.toLowerCase()===L)))return{v:!0}};for(var x of f)if(S=C(x))return S.v;return!1})(h,t)||!ya(h,(c=t)==null?void 0:c.css_selector_allowlist))return!1;var v=m.getComputedStyle(i);if(v&&v.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var p=i.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(s||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(e.type)>=0;default:return d?(s||["click"]).indexOf(e.type)>=0:(s||["click"]).indexOf(e.type)>=0&&(_s.indexOf(p)>-1||i.getAttribute("contenteditable")==="true")}}function Zi(i){for(var e=i;e.parentNode&&!Xe(e,"body");e=e.parentNode){var t=Ur(e);if(T(t,"ph-sensitive")||T(t,"ph-no-capture"))return!1}if(T(Ur(i),"ph-include"))return!0;var r=i.type||"";if(J(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var s=i.name||i.id||"";return!(J(s)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(s.replace(/[^a-zA-Z0-9]/g,"")))}function wa(i){return!!(Xe(i,"input")&&!["button","checkbox","submit","reset"].includes(i.type)||Xe(i,"select")||Xe(i,"textarea")||i.getAttribute("contenteditable")==="true")}var ka="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Jc=new RegExp("^(?:"+ka+")$"),Xc=new RegExp(ka),Ea="\\d{3}-?\\d{2}-?\\d{4}",Zc=new RegExp("^("+Ea+")$"),Qc=new RegExp("("+Ea+")");function nr(i,e){return e===void 0&&(e=!0),!(B(i)||J(i)&&(i=Jr(i),(e?Jc:Xc).test((i||"").replace(/[- ]/g,""))||(e?Zc:Qc).test(i)))}function Sa(i){var e=dr(i);return nr(e=(e+" "+ja(i)).trim())?e:""}function ja(i){var e="";return i&&i.childNodes&&i.childNodes.length&&U(i.childNodes,(function(t){var r;if(t&&((r=t.tagName)==null?void 0:r.toLowerCase())==="span")try{var s=dr(t);e=(e+" "+s).trim(),t.childNodes&&t.childNodes.length&&(e=(e+" "+ja(t)).trim())}catch(n){E.error("[AutoCapture]",n)}})),e}function eu(i){return(function(e){var t=e.map((r=>{var s,n,a="";if(r.tag_name&&(a+=r.tag_name),r.attr_class)for(var o of(r.attr_class.sort(),r.attr_class))a+="."+o.replace(/"/g,"");var c=j({},r.text?{text:r.text}:{},{"nth-child":(s=r.nth_child)!==null&&s!==void 0?s:0,"nth-of-type":(n=r.nth_of_type)!==null&&n!==void 0?n:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Fr(c).sort(((d,h)=>{var[v]=d,[p]=h;return v.localeCompare(p)})).forEach((d=>{var[h,v]=d;return u[hn(h.toString())]=hn(v.toString())})),a+=":",a+=Fr(u).map((d=>{var[h,v]=d;return h+'="'+v+'"'})).join("")}));return t.join(";")})((function(e){return e.map((t=>{var r,s,n={text:(r=t.$el_text)==null?void 0:r.slice(0,400),tag_name:t.tag_name,href:(s=t.attr__href)==null?void 0:s.slice(0,2048),attr_class:tu(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return Fr(t).filter((a=>{var[o]=a;return o.indexOf("attr__")===0})).forEach((a=>{var[o,c]=a;return n.attributes[o]=c})),n}))})(i))}function hn(i){return i.replace(/"|\\"/g,'\\"')}function tu(i){var e=i.attr__class;return e?H(e)?e:ms(e):void 0}let Ca=class{constructor(e){this.disabled=e===!1;var t=ie(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,r){if(this.disabled)return!1;var s=this.clicks[this.clicks.length-1];if(s&&Math.abs(e-s.x)+Math.abs(t-s.y)<this.thresholdPx&&r-s.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:r}];return!1}};var pi="$copy_autocapture",De=(function(i){return i.GZipJS="gzip-js",i.Base64="base64",i})({}),qr=i=>{var e=k?.createElement("a");return w(e)?null:(e.href=i,e)},ru=function(i,e){var t,r;e===void 0&&(e="&");var s=[];return U(i,(function(n,a){w(n)||w(a)||a==="undefined"||(t=encodeURIComponent((o=>o instanceof File)(n)?n.name:n.toString()),r=encodeURIComponent(a),s[s.length]=r+"="+t)})),s.join(e)},zr=function(i,e){for(var t,r=((i.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var n=r[s].split("=");if(n[0]===e){t=n;break}}if(!H(t)||t.length<2)return"";var a=t[1];try{a=decodeURIComponent(a)}catch{E.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},hr=function(i,e,t){if(!i||!e||!e.length)return i;for(var r=i.split("#"),s=r[0]||"",n=r[1],a=s.split("?"),o=a[1],c=a[0],u=(o||"").split("&"),d=[],h=0;h<u.length;h++){var v=u[h].split("=");H(v)&&(e.includes(v[0])?d.push(v[0]+"="+t):d.push(u[h]))}var p=c;return o!=null&&(p+="?"+d.join("&")),n!=null&&(p+="#"+n),p},Gr=function(i,e){var t=i.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},pn=Z("[AutoCapture]");function fi(i,e){return e.length>i?e.slice(0,i)+"...":e}function iu(i){if(i.previousElementSibling)return i.previousElementSibling;var e=i;do e=e.previousSibling;while(e&&!Zr(e));return e}function su(i,e,t,r){var s=i.tagName.toLowerCase(),n={tag_name:s};_s.indexOf(s)>-1&&!t&&(s.toLowerCase()==="a"||s.toLowerCase()==="button"?n.$el_text=fi(1024,Sa(i)):n.$el_text=fi(1024,dr(i)));var a=Ur(i);a.length>0&&(n.classes=a.filter((function(d){return d!==""}))),U(i.attributes,(function(d){var h;if((!wa(i)||["name","id","class","aria-label"].indexOf(d.name)!==-1)&&(r==null||!r.includes(d.name))&&!e&&nr(d.value)&&(h=d.name,!J(h)||h.substring(0,10)!=="_ngcontent"&&h.substring(0,7)!=="_nghost")){var v=d.value;d.name==="class"&&(v=ms(v).join(" ")),n["attr__"+d.name]=fi(1024,v)}}));for(var o=1,c=1,u=i;u=iu(u);)o++,u.tagName===i.tagName&&c++;return n.nth_child=o,n.nth_of_type=c,n}function nu(i,e){for(var t,r,{e:s,maskAllElementAttributes:n,maskAllText:a,elementAttributeIgnoreList:o,elementsChainAsString:c}=e,u=[i],d=i;d.parentNode&&!Xe(d,"body");)va(d.parentNode)?(u.push(d.parentNode.host),d=d.parentNode.host):(u.push(d.parentNode),d=d.parentNode);var h,v=[],p={},f=!1,_=!1;if(U(u,(P=>{var L=Zi(P);P.tagName.toLowerCase()==="a"&&(f=P.getAttribute("href"),f=L&&f&&nr(f)&&f),T(Ur(P),"ph-no-capture")&&(_=!0),v.push(su(P,n,a,o));var O=(function(A){if(!Zi(A))return{};var I={};return U(A.attributes,(function(le){if(le.name&&le.name.indexOf("data-ph-capture-attribute")===0){var Q=le.name.replace("data-ph-capture-attribute-",""),ce=le.value;Q&&ce&&nr(ce)&&(I[Q]=ce)}})),I})(P);K(p,O)})),_)return{props:{},explicitNoCapture:_};if(a||(i.tagName.toLowerCase()==="a"||i.tagName.toLowerCase()==="button"?v[0].$el_text=Sa(i):v[0].$el_text=dr(i)),f){var y,S;v[0].attr__href=f;var C=(y=qr(f))==null?void 0:y.host,x=m==null||(S=m.location)==null?void 0:S.host;C&&x&&C!==x&&(h=f)}return{props:K({$event_type:s.type,$ce_version:1},c?{}:{$elements:v},{$elements_chain:eu(v)},(t=v[0])!=null&&t.$el_text?{$el_text:(r=v[0])==null?void 0:r.$el_text}:{},h&&s.type==="click"?{$external_click_url:h}:{},p)}}let au=class{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new Ca(e.config.rageclick),this.R=null}get F(){var e,t,r=ie(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map((s=>new RegExp(s))),r.url_ignorelist=(t=r.url_ignorelist)==null?void 0:t.map((s=>new RegExp(s))),r}C(){if(this.isBrowserSupported()){if(m&&k){var e=r=>{r=r||m?.event;try{this.M(r)}catch(s){pn.error("Failed to capture event",s)}};if(Y(k,"submit",e,{capture:!0}),Y(k,"change",e,{capture:!0}),Y(k,"click",e,{capture:!0}),this.F.capture_copied_text){var t=r=>{r=r||m?.event,this.M(r,pi)};Y(k,"copy",t,{capture:!0}),Y(k,"cut",t,{capture:!0})}}}else pn.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.C(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[rn]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.R=e}getElementSelectors(e){var t,r=[];return(t=this.R)==null||t.forEach((s=>{var n=k?.querySelectorAll(s);n?.forEach((a=>{e===a&&r.push(s)}))})),r}get isEnabled(){var e,t,r=(e=this.instance.persistence)==null?void 0:e.props[rn],s=this.T;if(qe(s)&&!Ye(r)&&!this.instance.O())return!1;var n=(t=this.T)!==null&&t!==void 0?t:!!r;return!!this.instance.config.autocapture&&!n}M(e,t){if(t===void 0&&(t="$autocapture"),this.isEnabled){var r,s=_a(e);ga(s)&&(s=s.parentNode||null),t==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||new Date().getTime())&&Kc(s,this.instance.config.rageclick)&&this.M(e,"$rageclick");var n=t===pi;if(s&&Yc(s,e,this.F,n,n?["copy","cut"]:void 0)){var{props:a,explicitNoCapture:o}=nu(s,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.F.element_attribute_ignorelist,elementsChainAsString:this.I});if(o)return!1;var c=this.getElementSelectors(s);if(c&&c.length>0&&(a.$element_selectors=c),t===pi){var u,d=ma(m==null||(u=m.getSelection())==null?void 0:u.toString()),h=e.type||"clipboard";if(!d)return!1;a.$selected_content=d,a.$copy_type=h}return this.instance.capture(t,a),!0}}}isBrowserSupported(){return Ke(k?.querySelectorAll)}};Math.trunc||(Math.trunc=function(i){return i<0?Math.ceil(i):Math.floor(i)}),Number.isInteger||(Number.isInteger=function(i){return Fe(i)&&isFinite(i)&&Math.floor(i)===i});var fn="0123456789abcdef";let ou=class Qi{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,s){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(s)||e<0||t<0||r<0||s<0||e>0xffffffffffff||t>4095||r>1073741823||s>4294967295)throw new RangeError("invalid field value");var n=new Uint8Array(16);return n[0]=e/Math.pow(2,40),n[1]=e/Math.pow(2,32),n[2]=e/Math.pow(2,24),n[3]=e/Math.pow(2,16),n[4]=e/Math.pow(2,8),n[5]=e,n[6]=112|t>>>8,n[7]=t,n[8]=128|r>>>24,n[9]=r>>>16,n[10]=r>>>8,n[11]=r,n[12]=s>>>24,n[13]=s>>>16,n[14]=s>>>8,n[15]=s,new Qi(n)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+fn.charAt(this.bytes[t]>>>4)+fn.charAt(15&this.bytes[t]),t!==3&&t!==5&&t!==7&&t!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Qi(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var t=0;t<16;t++){var r=this.bytes[t]-e.bytes[t];if(r!==0)return Math.sign(r)}return 0}},lu=class{constructor(){this.A=0,this.D=0,this.j=new cu}generate(){var e=this.generateOrAbort();if(w(e)){this.A=0;var t=this.generateOrAbort();if(w(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return ou.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}};var gn,Pa=i=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<i.length;e++)i[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return i};m&&!w(m.crypto)&&crypto.getRandomValues&&(Pa=i=>crypto.getRandomValues(i));let cu=class{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(Pa(this.N),this.U=0),this.N[this.U++]}};var We=()=>uu().toString(),uu=()=>(gn||(gn=new lu)).generate(),Mt="",du=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function hu(i,e){if(e){var t=(function(s,n){if(n===void 0&&(n=k),Mt)return Mt;if(!n||["localhost","127.0.0.1"].includes(s))return"";for(var a=s.split("."),o=Math.min(a.length,8),c="dmn_chk_"+We();!Mt&&o--;){var u=a.slice(o).join("."),d=c+"=1;domain=."+u+";path=/";n.cookie=d+";max-age=3",n.cookie.includes(c)&&(n.cookie=d+";max-age=0",Mt=u)}return Mt})(i);if(!t){var r=(s=>{var n=s.match(du);return n?n[0]:""})(i);r!==t&&E.info("Warning: cookie subdomain discovery mismatch",r,t),t=r}return t?"; domain=."+t:""}return""}var Re={H:()=>!!k,B:function(i){E.error("cookieStore error: "+i)},q:function(i){if(k){try{for(var e=i+"=",t=k.cookie.split(";").filter((n=>n.length)),r=0;r<t.length;r++){for(var s=t[r];s.charAt(0)==" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return decodeURIComponent(s.substring(e.length,s.length))}}catch{}return null}},W:function(i){var e;try{e=JSON.parse(Re.q(i))||{}}catch{}return e},G:function(i,e,t,r,s){if(k)try{var n="",a="",o=hu(k.location.hostname,r);if(t){var c=new Date;c.setTime(c.getTime()+24*t*60*60*1e3),n="; expires="+c.toUTCString()}s&&(a="; secure");var u=i+"="+encodeURIComponent(JSON.stringify(e))+n+"; SameSite=Lax; path=/"+o+a;return u.length>3686.4&&E.warn("cookieStore warning: large cookie, len="+u.length),k.cookie=u,u}catch{return}},V:function(i,e){if(k!=null&&k.cookie)try{Re.G(i,"",-1,e)}catch{return}}},gi=null,G={H:function(){if(!qe(gi))return gi;var i=!0;if(w(m))i=!1;else try{var e="__mplssupport__";G.G(e,"xyz"),G.q(e)!=='"xyz"'&&(i=!1),G.V(e)}catch{i=!1}return i||E.error("localStorage unsupported; falling back to cookie store"),gi=i,i},B:function(i){E.error("localStorage error: "+i)},q:function(i){try{return m?.localStorage.getItem(i)}catch(e){G.B(e)}return null},W:function(i){try{return JSON.parse(G.q(i))||{}}catch{}return null},G:function(i,e){try{m?.localStorage.setItem(i,JSON.stringify(e))}catch(t){G.B(t)}},V:function(i){try{m?.localStorage.removeItem(i)}catch(e){G.B(e)}}},pu=["distinct_id",Lr,pa,Br,Hr],Cr=j({},G,{W:function(i){try{var e={};try{e=Re.W(i)||{}}catch{}var t=K(e,JSON.parse(G.q(i)||"{}"));return G.G(i,t),t}catch{}return null},G:function(i,e,t,r,s,n){try{G.G(i,e,void 0,void 0,n);var a={};pu.forEach((o=>{e[o]&&(a[o]=e[o])})),Object.keys(a).length&&Re.G(i,a,t,r,s,n)}catch(o){G.B(o)}},V:function(i,e){try{m?.localStorage.removeItem(i),Re.V(i,e)}catch(t){G.B(t)}}}),Pr={},fu={H:function(){return!0},B:function(i){E.error("memoryStorage error: "+i)},q:function(i){return Pr[i]||null},W:function(i){return Pr[i]||null},G:function(i,e){Pr[i]=e},V:function(i){delete Pr[i]}},tt=null,re={H:function(){if(!qe(tt))return tt;if(tt=!0,w(m))tt=!1;else try{var i="__support__";re.G(i,"xyz"),re.q(i)!=='"xyz"'&&(tt=!1),re.V(i)}catch{tt=!1}return tt},B:function(i){E.error("sessionStorage error: ",i)},q:function(i){try{return m?.sessionStorage.getItem(i)}catch(e){re.B(e)}return null},W:function(i){try{return JSON.parse(re.q(i))||null}catch{}return null},G:function(i,e){try{m?.sessionStorage.setItem(i,JSON.stringify(e))}catch(t){re.B(t)}},V:function(i){try{m?.sessionStorage.removeItem(i)}catch(e){re.B(e)}}},Me=(function(i){return i[i.PENDING=-1]="PENDING",i[i.DENIED=0]="DENIED",i[i.GRANTED=1]="GRANTED",i})({});class gu{constructor(e){this._instance=e}get F(){return this._instance.config}get consent(){return this.J()?Me.DENIED:this.K}isOptedOut(){return this.F.cookieless_mode==="always"||this.consent===Me.DENIED||this.consent===Me.PENDING&&(this.F.opt_out_capturing_by_default||this.F.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Me.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.F.cookie_expiration,this.F.cross_subdomain_cookie,this.F.secure_cookie)}reset(){this.Y.V(this.X,this.F.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:r}=this._instance.config;return r||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return ui(e)?Me.GRANTED:T(_c,e)?Me.DENIED:Me.PENDING}get Y(){if(!this.Z){var e=this.F.opt_out_capturing_persistence_type;this.Z=e==="localStorage"?G:Re;var t=e==="localStorage"?Re:G;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(ui(t.q(this.X))),t.V(this.X,this.F.cross_subdomain_cookie))}return this.Z}J(){return!!this.F.respect_dnt&&!!ua([_e?.doNotTrack,_e?.msDoNotTrack,R.doNotTrack],(e=>ui(e)))}}var $r=Z("[Dead Clicks]"),vu=()=>!0,mu=i=>{var e,t=!((e=i.instance.persistence)==null||!e.get_property(ha)),r=i.instance.config.capture_dead_clicks;return Ye(r)?r:t};class $a{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,r){this.instance=e,this.isEnabled=t,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[ha]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it((()=>{this.et()}))}it(e){var t,r;(t=R.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture&&e(),(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",(s=>{s?$r.error("failed to load script",s):e()}))}et(){var e;if(k){if(!this.tt&&(e=R.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var t=ie(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=R.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(k),$r.info("starting...")}}else $r.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,$r.info("stopping..."))}}var Lt=Z("[ExceptionAutocapture]");class _u{constructor(e){var t,r,s;this.rt=()=>{var n;if(m&&this.isEnabled&&(n=R.__PosthogExtensions__)!=null&&n.errorWrappingFunctions){var a=R.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=R.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,c=R.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.F.capture_unhandled_errors&&(this.st=a(this.captureException.bind(this))),!this.nt&&this.F.capture_unhandled_rejections&&(this.nt=o(this.captureException.bind(this))),!this.ot&&this.F.capture_console_errors&&(this.ot=c(this.captureException.bind(this)))}catch(u){Lt.error("failed to start",u),this.lt()}}},this._instance=e,this.ut=!((t=this._instance.persistence)==null||!t.props[sn]),this.F=this.ht(),this.dt=new yc({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(s=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&s!==void 0?s:10,refillInterval:1e4,h:Lt}),this.startIfEnabled()}ht(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return ie(e)?t=j({},t,e):(w(e)?this.ut:e)&&(t=j({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.F.capture_console_errors||this.F.capture_unhandled_errors||this.F.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Lt.info("enabled"),this.it(this.rt))}it(e){var t,r;(t=R.__PosthogExtensions__)!=null&&t.errorWrappingFunctions&&e(),(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",(s=>{if(s)return Lt.error("failed to load script",s);e()}))}lt(){var e,t,r;(e=this.st)==null||e.call(this),this.st=void 0,(t=this.nt)==null||t.call(this),this.nt=void 0,(r=this.ot)==null||r.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ut=!!t||!1,this.F=this.ht(),this._instance.persistence&&this._instance.persistence.register({[sn]:this.ut}),this.startIfEnabled()}captureException(e){var t,r,s=(t=e==null||(r=e.$exception_list)==null||(r=r[0])==null?void 0:r.type)!==null&&t!==void 0?t:"Exception";this.dt.consumeRateLimit(s)?Lt.info("Skipping exception capture because of client rate limiting.",{exception:s}):this._instance.exceptions.sendExceptionEvent(e)}}function vn(i,e,t){try{if(!(e in i))return()=>{};var r=i[e],s=t(r);return Ke(s)&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__posthog_wrapped__:{enumerable:!1,value:!0}})),i[e]=s,()=>{i[e]=r}}catch{return()=>{}}}class yu{constructor(e){var t;this._instance=e,this.vt=(m==null||(t=m.location)==null?void 0:t.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(E.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,E.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(m&&m.history){var r=this;(e=m.history.pushState)!=null&&e.__posthog_wrapped__||vn(m.history,"pushState",(s=>function(n,a,o){s.call(this,n,a,o),r.ft("pushState")})),(t=m.history.replaceState)!=null&&t.__posthog_wrapped__||vn(m.history,"replaceState",(s=>function(n,a,o){s.call(this,n,a,o),r.ft("replaceState")})),this.gt()}}ft(e){try{var t,r=m==null||(t=m.location)==null?void 0:t.pathname;if(!r)return;r!==this.vt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.vt=r}catch(s){E.error("Error capturing "+e+" pageview",s)}}gt(){if(!this.ct){var e=()=>{this.ft("popstate")};Y(m,"popstate",e),this.ct=()=>{m&&m.removeEventListener("popstate",e)}}}}var vi=Z("[SegmentIntegration]");function bu(i,e){var t=i.config.segment;if(!t)return e();(function(r,s){var n=r.config.segment;if(!n)return s();var a=c=>{var u=()=>c.anonymousId()||We();r.config.get_device_id=u,c.id()&&(r.register({distinct_id:c.id(),$device_id:u()}),r.persistence.set_property(Te,"identified")),s()},o=n.user();"then"in o&&Ke(o.then)?o.then((c=>a(c))):a(o)})(i,(()=>{t.register((r=>{Promise&&Promise.resolve||vi.warn("This browser does not have Promise support, and can not use the segment integration");var s=(n,a)=>{if(!a)return n;n.event.userId||n.event.anonymousId===r.get_distinct_id()||(vi.info("No userId set, resetting PostHog"),r.reset()),n.event.userId&&n.event.userId!==r.get_distinct_id()&&(vi.info("UserId set, identifying with PostHog"),r.identify(n.event.userId));var o=r.calculateEventProperties(a,n.event.properties);return n.event.properties=Object.assign({},o,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:n=>s(n,n.event.event),page:n=>s(n,"$pageview"),identify:n=>s(n,"$identify"),screen:n=>s(n,"$screen")}})(i)).then((()=>{e()}))}))}var Na="posthog-js";function Ra(i,e){var{organization:t,projectId:r,prefix:s,severityAllowList:n=["error"],sendExceptionsToPostHog:a=!0}=e===void 0?{}:e;return o=>{var c,u,d,h,v;if(!(n==="*"||n.includes(o.level))||!i.__loaded)return o;o.tags||(o.tags={});var p=i.requestRouter.endpointFor("ui","/project/"+i.config.token+"/person/"+i.get_distinct_id());o.tags["PostHog Person URL"]=p,i.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=i.get_session_replay_url({withTimestamp:!0}));var f=((c=o.exception)==null?void 0:c.values)||[],_=f.map((S=>j({},S,{stacktrace:S.stacktrace?j({},S.stacktrace,{type:"raw",frames:(S.stacktrace.frames||[]).map((C=>j({},C,{platform:"web:javascript"})))}):void 0}))),y={$exception_message:((u=f[0])==null?void 0:u.value)||o.message,$exception_type:(d=f[0])==null?void 0:d.type,$exception_level:o.level,$exception_list:_,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((h=f[0])==null?void 0:h.value)||o.message,$sentry_exception_type:(v=f[0])==null?void 0:v.type,$sentry_tags:o.tags};return t&&r&&(y.$sentry_url=(s||"https://sentry.io/organizations/")+t+"/issues/?project="+r+"&query="+o.event_id),a&&i.exceptions.sendExceptionEvent(y),o}}class xu{constructor(e,t,r,s,n,a){this.name=Na,this.setupOnce=function(o){o(Ra(e,{organization:t,projectId:r,prefix:s,severityAllowList:n,sendExceptionsToPostHog:a==null||a}))}}}var wu=m!=null&&m.location?Gr(m.location.hash,"__posthog")||Gr(location.hash,"state"):null,mn="_postHogToolbarParams",_n=Z("[Toolbar]"),Ve=(function(i){return i[i.UNINITIALIZED=0]="UNINITIALIZED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED",i})(Ve||{});class ku{constructor(e){this.instance=e}_t(e){R.ph_toolbar_state=e}yt(){var e;return(e=R.ph_toolbar_state)!==null&&e!==void 0?e:Ve.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),!m||!k)return!1;e=e??m.location,r=r??m.history;try{if(!t){try{m.localStorage.setItem("test","test"),m.localStorage.removeItem("test")}catch{return!1}t=m?.localStorage}var s,n=wu||Gr(e.hash,"__posthog")||Gr(e.hash,"state"),a=n?tn((()=>JSON.parse(atob(decodeURIComponent(n)))))||tn((()=>JSON.parse(decodeURIComponent(n)))):null;return a&&a.action==="ph_authorize"?((s=a).source="url",s&&Object.keys(s).length>0&&(a.desiredHash?e.hash=a.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((s=JSON.parse(t.getItem(mn)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch{return!1}}bt(e){var t=R.ph_load_toolbar||R.ph_load_editor;!B(t)&&Ke(t)?t(e,this.instance):_n.warn("No toolbar load function found")}loadToolbar(e){var t=!(k==null||!k.getElementById(fa));if(!m||t)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,s=j({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(m.localStorage.setItem(mn,JSON.stringify(j({},s,{source:void 0}))),this.yt()===Ve.LOADED)this.bt(s);else if(this.yt()===Ve.UNINITIALIZED){var n;this._t(Ve.LOADING),(n=R.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this.instance,"toolbar",(a=>{if(a)return _n.error("[Toolbar] Failed to load",a),void this._t(Ve.UNINITIALIZED);this._t(Ve.LOADED),this.bt(s)})),Y(m,"turbolinks:load",(()=>{this._t(Ve.UNINITIALIZED),this.loadToolbar(s)}))}return!0}wt(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,r){return e===void 0&&(e=void 0),t===void 0&&(t=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,t,r)}}var Eu=Z("[TracingHeaders]");class Su{constructor(e){this.xt=void 0,this.St=void 0,this.rt=()=>{var t,r;w(this.xt)&&((t=R.__PosthogExtensions__)==null||(t=t.tracingHeadersPatchFns)==null||t._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),w(this.St)&&((r=R.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,r;(t=R.__PosthogExtensions__)!=null&&t.tracingHeadersPatchFns&&e(),(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",(s=>{if(s)return Eu.error("failed to load script",s);e()}))}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):((e=this.xt)==null||e.call(this),(t=this.St)==null||t.call(this),this.xt=void 0,this.St=void 0)}}var xe="Mobile",Vr="iOS",Ne="Android",ar="Tablet",Fa=Ne+" "+ar,Oa="iPad",Ia="Apple",Aa=Ia+" Watch",or="Safari",Et="BlackBerry",Ta="Samsung",Ma=Ta+"Browser",La=Ta+" Internet",ct="Chrome",ju=ct+" OS",Da=ct+" "+Vr,bs="Internet Explorer",Ha=bs+" "+xe,xs="Opera",Cu=xs+" Mini",ws="Edge",Ba="Microsoft "+ws,xt="Firefox",Ua=xt+" "+Vr,lr="Nintendo",cr="PlayStation",wt="Xbox",qa=Ne+" "+xe,za=xe+" "+or,Zt="Windows",es=Zt+" Phone",yn="Nokia",ts="Ouya",Ga="Generic",Pu=Ga+" "+xe.toLowerCase(),Va=Ga+" "+ar.toLowerCase(),rs="Konqueror",de="(\\d+(\\.\\d+)?)",mi=new RegExp("Version/"+de),$u=new RegExp(wt,"i"),Nu=new RegExp(cr+" \\w+","i"),Ru=new RegExp(lr+" \\w+","i"),ks=new RegExp(Et+"|PlayBook|BB10","i"),Fu={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Ou=(i,e)=>e&&T(e,Ia)||(function(t){return T(t,or)&&!T(t,ct)&&!T(t,Ne)})(i),Wa=function(i,e){return e=e||"",T(i," OPR/")&&T(i,"Mini")?Cu:T(i," OPR/")?xs:ks.test(i)?Et:T(i,"IE"+xe)||T(i,"WPDesktop")?Ha:T(i,Ma)?La:T(i,ws)||T(i,"Edg/")?Ba:T(i,"FBIOS")?"Facebook "+xe:T(i,"UCWEB")||T(i,"UCBrowser")?"UC Browser":T(i,"CriOS")?Da:T(i,"CrMo")||T(i,ct)?ct:T(i,Ne)&&T(i,or)?qa:T(i,"FxiOS")?Ua:T(i.toLowerCase(),rs.toLowerCase())?rs:Ou(i,e)?T(i,xe)?za:or:T(i,xt)?xt:T(i,"MSIE")||T(i,"Trident/")?bs:T(i,"Gecko")?xt:""},Iu={[Ha]:[new RegExp("rv:"+de)],[Ba]:[new RegExp(ws+"?\\/"+de)],[ct]:[new RegExp("("+ct+"|CrMo)\\/"+de)],[Da]:[new RegExp("CriOS\\/"+de)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+de)],[or]:[mi],[za]:[mi],[xs]:[new RegExp("(Opera|OPR)\\/"+de)],[xt]:[new RegExp(xt+"\\/"+de)],[Ua]:[new RegExp("FxiOS\\/"+de)],[rs]:[new RegExp("Konqueror[:/]?"+de,"i")],[Et]:[new RegExp(Et+" "+de),mi],[qa]:[new RegExp("android\\s"+de,"i")],[La]:[new RegExp(Ma+"\\/"+de)],[bs]:[new RegExp("(rv:|MSIE )"+de)],Mozilla:[new RegExp("rv:"+de)]},Au=function(i,e){var t=Wa(i,e),r=Iu[t];if(w(r))return null;for(var s=0;s<r.length;s++){var n=r[s],a=i.match(n);if(a)return parseFloat(a[a.length-2])}return null},bn=[[new RegExp(wt+"; "+wt+" (.*?)[);]","i"),i=>[wt,i&&i[1]||""]],[new RegExp(lr,"i"),[lr,""]],[new RegExp(cr,"i"),[cr,""]],[ks,[Et,""]],[new RegExp(Zt,"i"),(i,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[es,""];if(new RegExp(xe).test(e)&&!/IEMobile\b/.test(e))return[Zt+" "+xe,""];var t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){var r=t[1],s=Fu[r]||"";return/arm/i.test(e)&&(s="RT"),[Zt,s]}return[Zt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,i=>{if(i&&i[3]){var e=[i[3],i[4],i[5]||"0"];return[Vr,e.join(".")]}return[Vr,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,i=>{var e="";return i&&i.length>=3&&(e=w(i[2])?i[3]:i[2]),["watchOS",e]}],[new RegExp("("+Ne+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Ne+")","i"),i=>{if(i&&i[2]){var e=[i[2],i[3],i[4]||"0"];return[Ne,e.join(".")]}return[Ne,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,i=>{var e=["Mac OS X",""];if(i&&i[1]){var t=[i[1],i[2],i[3]||"0"];e[1]=t.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ju,""]],[/Linux|debian/i,["Linux",""]]],xn=function(i){return Ru.test(i)?lr:Nu.test(i)?cr:$u.test(i)?wt:new RegExp(ts,"i").test(i)?ts:new RegExp("("+es+"|WPDesktop)","i").test(i)?es:/iPad/.test(i)?Oa:/iPod/.test(i)?"iPod Touch":/iPhone/.test(i)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(i)?Aa:ks.test(i)?Et:/(kobo)\s(ereader|touch)/i.test(i)?"Kobo":new RegExp(yn,"i").test(i)?yn:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(i)||/(kf[a-z]+)( bui|\)).+silk\//i.test(i)?"Kindle Fire":/(Android|ZTE)/i.test(i)?!new RegExp(xe).test(i)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(i)?/pixel[\daxl ]{1,6}/i.test(i)&&!/pixel c/i.test(i)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(i)||/lmy47v/i.test(i)&&!/QTAQZ3/i.test(i)?Ne:Fa:Ne:new RegExp("(pda|"+xe+")","i").test(i)?Pu:new RegExp(ar,"i").test(i)&&!new RegExp(ar+" pc","i").test(i)?Va:""},Nr="https?://(.*)",Pt=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Tu=Ct(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Pt),pr="<masked>",Mu=["li_fat_id"];function Ka(i,e,t){if(!k)return{};var r,s=e?Ct([],Pt,t||[]):[],n=Ya(hr(k.URL,s,pr),i),a=(r={},U(Mu,(function(o){var c=Re.q(o);r[o]=c||null})),r);return K(a,n)}function Ya(i,e){var t=Tu.concat(e||[]),r={};return U(t,(function(s){var n=zr(i,s);r[s]=n||null})),r}function Ja(i){var e=(function(n){return n?n.search(Nr+"google.([^/?]*)")===0?"google":n.search(Nr+"bing.com")===0?"bing":n.search(Nr+"yahoo.com")===0?"yahoo":n.search(Nr+"duckduckgo.com")===0?"duckduckgo":null:null})(i),t=e!="yahoo"?"q":"p",r={};if(!qe(e)){r.$search_engine=e;var s=k?zr(k.referrer,t):"";s.length&&(r.ph_keyword=s)}return r}function wn(){return navigator.language||navigator.userLanguage}function Xa(){return k?.referrer||"$direct"}function Za(i,e){var t=i?Ct([],Pt,e||[]):[],r=pe?.href.substring(0,1e3);return{r:Xa().substring(0,1e3),u:r?hr(r,t,pr):void 0}}function Qa(i){var e,{r:t,u:r}=i,s={$referrer:t,$referring_domain:t==null?void 0:t=="$direct"?"$direct":(e=qr(t))==null?void 0:e.host};if(r){s.$current_url=r;var n=qr(r);s.$host=n?.host,s.$pathname=n?.pathname;var a=Ya(r);K(s,a)}if(t){var o=Ja(t);K(s,o)}return s}function eo(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Lu(){try{return new Date().getTimezoneOffset()}catch{return}}function Du(i,e){if(!he)return{};var t,r,s,n=i?Ct([],Pt,e||[]):[],[a,o]=(function(c){for(var u=0;u<bn.length;u++){var[d,h]=bn[u],v=d.exec(c),p=v&&(Ke(h)?h(v,c):h);if(p)return p}return["",""]})(he);return K(vs({$os:a,$os_version:o,$browser:Wa(he,navigator.vendor),$device:xn(he),$device_type:(r=he,s=xn(r),s===Oa||s===Fa||s==="Kobo"||s==="Kindle Fire"||s===Va?ar:s===lr||s===wt||s===cr||s===ts?"Console":s===Aa?"Wearable":s?xe:"Desktop"),$timezone:eo(),$timezone_offset:Lu()}),{$current_url:hr(pe?.href,n,pr),$host:pe?.host,$pathname:pe?.pathname,$raw_user_agent:he.length>1e3?he.substring(0,997)+"...":he,$browser_version:Au(he,navigator.vendor),$browser_language:wn(),$browser_language_prefix:(t=wn(),typeof t=="string"?t.split("-")[0]:void 0),$screen_height:m?.screen.height,$screen_width:m?.screen.width,$viewport_height:m?.innerHeight,$viewport_width:m?.innerWidth,$lib:"web",$lib_version:Ae.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ze=Z("[Web Vitals]"),kn=9e5;class Hu{constructor(e){var t;this.Et=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.$t=()=>{clearTimeout(this.kt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce(((r,s)=>j({},r,{["$web_vitals_"+s.name+"_event"]:j({},s),["$web_vitals_"+s.name+"_value"]:s.value})),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=r=>{var s,n=(s=this._instance.sessionManager)==null?void 0:s.checkAndGetSessionAndWindowId(!0);if(w(n))ze.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var a=this.Tt();w(a)||(B(r?.name)||B(r?.value)?ze.error("Invalid metric received",r):this.It&&r.value>=this.It?ze.error("Ignoring metric with value >= "+this.It,r):(this.N.url!==a&&(this.$t(),this.kt=setTimeout(this.$t,this.flushToCaptureTimeoutMs)),w(this.N.url)&&(this.N.url=a),this.N.firstMetricTimestamp=w(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.N.metrics.push(j({},r,{$current_url:a,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.$t()))}},this.rt=()=>{var r,s,n,a,o=R.__PosthogExtensions__;w(o)||w(o.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:s,onFCP:n,onINP:a}=o.postHogWebVitalsCallbacks),r&&s&&n&&a?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&s(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&a(this.Pt.bind(this)),this.P=!0):ze.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Et=!((t=this._instance.persistence)==null||!t.props[an]),this.startIfEnabled()}get allowedMetrics(){var e,t,r=ie(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return w(r)?((t=this._instance.persistence)==null?void 0:t.props[on])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(ie(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get It(){var e=ie(this._instance.config.capture_performance)&&Fe(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:kn;return 0<e&&e<=6e4?kn:e}get isEnabled(){var e=pe?.protocol;if(e!=="http:"&&e!=="https:")return ze.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=ie(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ye(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ye(t)?t:this.Et}startIfEnabled(){this.isEnabled&&!this.P&&(ze.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=ie(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=ie(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[an]:t}),this._instance.persistence.register({[on]:r})),this.Et=t,this.startIfEnabled()}it(e){var t,r;(t=R.__PosthogExtensions__)!=null&&t.postHogWebVitalsCallbacks&&e(),(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",(s=>{s?ze.error("failed to load script",s):e()}))}Tt(){var e=m?m.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,s=t?Ct([],Pt,r||[]):[];return hr(e,s,pr)}ze.error("Could not determine current URL")}}var Bu=Z("[Heatmaps]");function En(i){return ie(i)&&"clientX"in i&&"clientY"in i&&Fe(i.clientX)&&Fe(i.clientY)}class Uu{constructor(e){var t;this.Et=!1,this.P=!1,this.Rt=null,this.instance=e,this.Et=!((t=this.instance.persistence)==null||!t.props[zi]),this.rageclicks=new Ca(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return ie(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return w(this.instance.config.capture_heatmaps)?w(this.instance.config.enable_heatmaps)?this.Et:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;Bu.info("starting..."),this.Ft(),this.Ct()}else{var e;clearInterval((e=this.Rt)!==null&&e!==void 0?e:void 0),this.Mt(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[zi]:t}),this.Et=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Ot(e){this.At(e.originalEvent,"deadclick")}Ct(){this.Rt&&clearInterval(this.Rt),this.Rt=(function(e){return e?.visibilityState==="visible"})(k)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}Ft(){m&&k&&(this.jt=this.Dt.bind(this),Y(m,"beforeunload",this.jt),this.Lt=e=>this.At(e||m?.event),Y(k,"click",this.Lt,{capture:!0}),this.Nt=e=>this.Ut(e||m?.event),Y(k,"mousemove",this.Nt,{capture:!0}),this.zt=new $a(this.instance,vu,this.Ot.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ct.bind(this),Y(k,"visibilitychange",this.Ht),this.P=!0)}Mt(){var e;m&&k&&(this.jt&&m.removeEventListener("beforeunload",this.jt),this.Lt&&k.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&k.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&k.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),(e=this.zt)==null||e.stop(),this.P=!1)}qt(e,t){var r=this.instance.scrollManager.scrollY(),s=this.instance.scrollManager.scrollX(),n=this.instance.scrollManager.scrollElement(),a=(function(o,c,u){for(var d=o;d&&Zr(d)&&!Xe(d,"body");){if(d===u)return!1;if(T(c,m?.getComputedStyle(d).position))return!0;d=ba(d)}return!1})(_a(e),["fixed","sticky"],n);return{x:e.clientX+(a?0:s),y:e.clientY+(a?0:r),target_fixed:a,type:t}}At(e,t){var r;if(t===void 0&&(t="click"),!ln(e.target)&&En(e)){var s=this.qt(e,t);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.Wt(j({},s,{type:"rageclick"})),this.Wt(s)}}Ut(e){!ln(e.target)&&En(e)&&(clearTimeout(this.Bt),this.Bt=setTimeout((()=>{this.Wt(this.qt(e,"mousemove"))}),500))}Wt(e){if(m){var t=m.location.href,r=this.instance.config.mask_personal_data_properties,s=this.instance.config.custom_personal_data_properties,n=r?Ct([],Pt,s||[]):[],a=hr(t,n,pr);this.N=this.N||{},this.N[a]||(this.N[a]=[]),this.N[a].push(e)}}Dt(){this.N&&!yt(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class qu{constructor(e){this._instance=e}doPageView(e,t){var r,s=this.Gt(e,t);return this.Vt={pathname:(r=m?.location.pathname)!==null&&r!==void 0?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),s}doPageLeave(e){var t;return this.Gt(e,(t=this.Vt)==null?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.Vt)==null?void 0:e.pageViewId}}Gt(e,t){var r=this.Vt;if(!r)return{$pageview_id:t};var s={$pageview_id:t,$prev_pageview_id:r.pageViewId},n=this._instance.scrollManager.getContext();if(n&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:a,lastScrollY:o,maxScrollY:c,maxContentHeight:u,lastContentY:d,maxContentY:h}=n;if(!(w(a)||w(o)||w(c)||w(u)||w(d)||w(h))){a=Math.ceil(a),o=Math.ceil(o),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d),h=Math.ceil(h);var v=a<=1?1:$e(o/a,0,1,E),p=a<=1?1:$e(c/a,0,1,E),f=u<=1?1:$e(d/u,0,1,E),_=u<=1?1:$e(h/u,0,1,E);s=K(s,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:v,$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:d,$prev_pageview_last_content_percentage:f,$prev_pageview_max_content:h,$prev_pageview_max_content_percentage:_})}}return r.pathname&&(s.$prev_pageview_pathname=r.pathname),r.timestamp&&(s.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),s}}var we=Uint8Array,fe=Uint16Array,St=Uint32Array,Es=new we([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ss=new we([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sn=new we([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),to=function(i,e){for(var t=new fe(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];var s=new St(t[30]);for(r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)s[n]=n-t[r]<<5|r;return[t,s]},ro=to(Es,2),zu=ro[0],is=ro[1];zu[28]=258,is[258]=28;for(var jn=to(Ss,0)[1],io=new fe(32768),z=0;z<32768;++z){var rt=(43690&z)>>>1|(21845&z)<<1;rt=(61680&(rt=(52428&rt)>>>2|(13107&rt)<<2))>>>4|(3855&rt)<<4,io[z]=((65280&rt)>>>8|(255&rt)<<8)>>>1}var tr=function(i,e,t){for(var r=i.length,s=0,n=new fe(e);s<r;++s)++n[i[s]-1];var a,o=new fe(e);for(s=0;s<e;++s)o[s]=o[s-1]+n[s-1]<<1;for(a=new fe(r),s=0;s<r;++s)a[s]=io[o[i[s]-1]++]>>>15-i[s];return a},ut=new we(288);for(z=0;z<144;++z)ut[z]=8;for(z=144;z<256;++z)ut[z]=9;for(z=256;z<280;++z)ut[z]=7;for(z=280;z<288;++z)ut[z]=8;var Wr=new we(32);for(z=0;z<32;++z)Wr[z]=5;var Gu=tr(ut,9),Vu=tr(Wr,5),so=function(i){return(i/8>>0)+(7&i&&1)},no=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var r=new(i instanceof fe?fe:i instanceof St?St:we)(t-e);return r.set(i.subarray(e,t)),r},Ie=function(i,e,t){t<<=7&e;var r=e/8>>0;i[r]|=t,i[r+1]|=t>>>8},Dt=function(i,e,t){t<<=7&e;var r=e/8>>0;i[r]|=t,i[r+1]|=t>>>8,i[r+2]|=t>>>16},_i=function(i,e){for(var t=[],r=0;r<i.length;++r)i[r]&&t.push({s:r,f:i[r]});var s=t.length,n=t.slice();if(!s)return[new we(0),0];if(s==1){var a=new we(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort((function(L,O){return L.f-O.f})),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,d=1,h=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=s-1;)o=t[t[u].f<t[h].f?u++:h++],c=t[u!=d&&t[u].f<t[h].f?u++:h++],t[d++]={s:-1,f:o.f+c.f,l:o,r:c};var v=n[0].s;for(r=1;r<s;++r)n[r].s>v&&(v=n[r].s);var p=new fe(v+1),f=ss(t[d-1],p,0);if(f>e){r=0;var _=0,y=f-e,S=1<<y;for(n.sort((function(L,O){return p[O.s]-p[L.s]||L.f-O.f}));r<s;++r){var C=n[r].s;if(!(p[C]>e))break;_+=S-(1<<f-p[C]),p[C]=e}for(_>>>=y;_>0;){var x=n[r].s;p[x]<e?_-=1<<e-p[x]++-1:++r}for(;r>=0&&_;--r){var P=n[r].s;p[P]==e&&(--p[P],++_)}f=e}return[new we(p),f]},ss=function(i,e,t){return i.s==-1?Math.max(ss(i.l,e,t+1),ss(i.r,e,t+1)):e[i.s]=t},Cn=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new fe(++e),r=0,s=i[0],n=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(i[o]==s&&o!=e)++n;else{if(!s&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(s),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(s);n=1,s=i[o]}return[t.subarray(0,r),e]},Ht=function(i,e){for(var t=0,r=0;r<e.length;++r)t+=i[r]*e[r];return t},ns=function(i,e,t){var r=t.length,s=so(e+2);i[s]=255&r,i[s+1]=r>>>8,i[s+2]=255^i[s],i[s+3]=255^i[s+1];for(var n=0;n<r;++n)i[s+n+4]=t[n];return 8*(s+4+r)},Pn=function(i,e,t,r,s,n,a,o,c,u,d){Ie(e,d++,t),++s[256];for(var h=_i(s,15),v=h[0],p=h[1],f=_i(n,15),_=f[0],y=f[1],S=Cn(v),C=S[0],x=S[1],P=Cn(_),L=P[0],O=P[1],A=new fe(19),I=0;I<C.length;++I)A[31&C[I]]++;for(I=0;I<L.length;++I)A[31&L[I]]++;for(var le=_i(A,7),Q=le[0],ce=le[1],ne=19;ne>4&&!Q[Sn[ne-1]];--ne);var ye,ee,ae,Ce,be=u+5<<3,Pe=Ht(s,ut)+Ht(n,Wr)+a,ge=Ht(s,v)+Ht(n,_)+a+14+3*ne+Ht(A,Q)+(2*A[16]+3*A[17]+7*A[18]);if(be<=Pe&&be<=ge)return ns(e,d,i.subarray(c,c+u));if(Ie(e,d,1+(ge<Pe)),d+=2,ge<Pe){ye=tr(v,p),ee=v,ae=tr(_,y),Ce=_;var Ee=tr(Q,ce);for(Ie(e,d,x-257),Ie(e,d+5,O-1),Ie(e,d+10,ne-4),d+=14,I=0;I<ne;++I)Ie(e,d+3*I,Q[Sn[I]]);d+=3*ne;for(var Oe=[C,L],b=0;b<2;++b){var N=Oe[b];for(I=0;I<N.length;++I){var F=31&N[I];Ie(e,d,Ee[F]),d+=Q[F],F>15&&(Ie(e,d,N[I]>>>5&127),d+=N[I]>>>12)}}}else ye=Gu,ee=ut,ae=Vu,Ce=Wr;for(I=0;I<o;++I)if(r[I]>255){F=r[I]>>>18&31,Dt(e,d,ye[F+257]),d+=ee[F+257],F>7&&(Ie(e,d,r[I]>>>23&31),d+=Es[F]);var $=31&r[I];Dt(e,d,ae[$]),d+=Ce[$],$>3&&(Dt(e,d,r[I]>>>5&8191),d+=Ss[$])}else Dt(e,d,ye[r[I]]),d+=ee[r[I]];return Dt(e,d,ye[256]),d+ee[256]},Wu=new St([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ku=(function(){for(var i=new St(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(1&t&&3988292384)^t>>>1;i[e]=t}return i})(),Yu=function(i,e,t,r,s){return(function(n,a,o,c,u,d){var h=n.length,v=new we(c+h+5*(1+Math.floor(h/7e3))+u),p=v.subarray(c,v.length-u),f=0;if(!a||h<8)for(var _=0;_<=h;_+=65535){var y=_+65535;y<h?f=ns(p,f,n.subarray(_,y)):(p[_]=d,f=ns(p,f,n.subarray(_,h)))}else{for(var S=Wu[a-1],C=S>>>13,x=8191&S,P=(1<<o)-1,L=new fe(32768),O=new fe(P+1),A=Math.ceil(o/3),I=2*A,le=function(si){return(n[si]^n[si+1]<<A^n[si+2]<<I)&P},Q=new St(25e3),ce=new fe(288),ne=new fe(32),ye=0,ee=0,ae=(_=0,0),Ce=0,be=0;_<h;++_){var Pe=le(_),ge=32767&_,Ee=O[Pe];if(L[ge]=Ee,O[Pe]=ge,Ce<=_){var Oe=h-_;if((ye>7e3||ae>24576)&&Oe>423){f=Pn(n,p,0,Q,ce,ne,ee,ae,be,_-be,f),ae=ye=ee=0,be=_;for(var b=0;b<286;++b)ce[b]=0;for(b=0;b<30;++b)ne[b]=0}var N=2,F=0,$=x,M=ge-Ee&32767;if(Oe>2&&Pe==le(_-M))for(var q=Math.min(C,Oe)-1,ue=Math.min(32767,_),te=Math.min(258,Oe);M<=ue&&--$&&ge!=Ee;){if(n[_+N]==n[_+N-M]){for(var ve=0;ve<te&&n[_+ve]==n[_+ve-M];++ve);if(ve>N){if(N=ve,F=M,ve>q)break;var qo=Math.min(M,ve-2),Ms=0;for(b=0;b<qo;++b){var ii=_-M+b+32768&32767,Ls=ii-L[ii]+32768&32767;Ls>Ms&&(Ms=Ls,Ee=ii)}}}M+=(ge=Ee)-(Ee=L[ge])+32768&32767}if(F){Q[ae++]=268435456|is[N]<<18|jn[F];var Ds=31&is[N],Hs=31&jn[F];ee+=Es[Ds]+Ss[Hs],++ce[257+Ds],++ne[Hs],Ce=_+N,++ye}else Q[ae++]=n[_],++ce[n[_]]}}f=Pn(n,p,d,Q,ce,ne,ee,ae,be,_-be,f)}return no(v,0,c+so(f)+u)})(i,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+e.mem,t,r,!0)},yi=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8};function Ju(i,e){e===void 0&&(e={});var t=(function(){var o=4294967295;return{p:function(c){for(var u=o,d=0;d<c.length;++d)u=Ku[255&u^c[d]]^u>>>8;o=u},d:function(){return 4294967295^o}}})(),r=i.length;t.p(i);var s,n=Yu(i,e,10+((s=e).filename&&s.filename.length+1||0),8),a=n.length;return(function(o,c){var u=c.filename;if(o[0]=31,o[1]=139,o[2]=8,o[8]=c.level<2?4:c.level==9?2:0,o[9]=3,c.mtime!=0&&yi(o,4,Math.floor(new Date(c.mtime||Date.now())/1e3)),u){o[3]=8;for(var d=0;d<=u.length;++d)o[d+10]=u.charCodeAt(d)}})(n,e),yi(n,a-8,t.d()),yi(n,a-4,r),n}var Xu=function(i){var e,t,r,s,n="";for(e=t=0,r=(i=(i+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,s=0;s<r;s++){var a=i.charCodeAt(s),o=null;a<128?t++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),qe(o)||(t>e&&(n+=i.substring(e,t)),n+=o,e=t=s+1)}return t>e&&(n+=i.substring(e,i.length)),n},Zu=!!Di||!!Li,$n="text/plain",Kr=function(i,e,t){var r;t===void 0&&(t=!0);var[s,n]=i.split("?"),a=j({},e),o=(r=n?.split("&").map((u=>{var d,[h,v]=u.split("="),p=t&&(d=a[h])!==null&&d!==void 0?d:v;return delete a[h],h+"="+p})))!==null&&r!==void 0?r:[],c=ru(a);return c&&o.push(c),s+"?"+o.join("&")},Qt=(i,e)=>JSON.stringify(i,((t,r)=>typeof r=="bigint"?r.toString():r),e),bi=i=>{var{data:e,compression:t}=i;if(e){if(t===De.GZipJS){var r=Ju((function(c,u){var d=c.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(c);for(var h=new we(c.length+(c.length>>>1)),v=0,p=function(S){h[v++]=S},f=0;f<d;++f){if(v+5>h.length){var _=new we(v+8+(d-f<<1));_.set(h),h=_}var y=c.charCodeAt(f);y<128||u?p(y):y<2048?(p(192|y>>>6),p(128|63&y)):y>55295&&y<57344?(p(240|(y=65536+(1047552&y)|1023&c.charCodeAt(++f))>>>18),p(128|y>>>12&63),p(128|y>>>6&63),p(128|63&y)):(p(224|y>>>12),p(128|y>>>6&63),p(128|63&y))}return no(h,0,v)})(Qt(e)),{mtime:0}),s=new Blob([r],{type:$n});return{contentType:$n,body:s,estimatedSize:s.size}}if(t===De.Base64){var n=(function(c){var u,d,h,v,p,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=0,y=0,S="",C=[];if(!c)return c;c=Xu(c);do u=(p=c.charCodeAt(_++)<<16|c.charCodeAt(_++)<<8|c.charCodeAt(_++))>>18&63,d=p>>12&63,h=p>>6&63,v=63&p,C[y++]=f.charAt(u)+f.charAt(d)+f.charAt(h)+f.charAt(v);while(_<c.length);switch(S=C.join(""),c.length%3){case 1:S=S.slice(0,-2)+"==";break;case 2:S=S.slice(0,-1)+"="}return S})(Qt(e)),a=(c=>"data="+encodeURIComponent(typeof c=="string"?c:Qt(c)))(n);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var o=Qt(e);return{contentType:"application/json",body:o,estimatedSize:new Blob([o]).size}}},Or=[];Li&&Or.push({transport:"fetch",method:i=>{var e,t,{contentType:r,body:s,estimatedSize:n}=(e=bi(i))!==null&&e!==void 0?e:{},a=new Headers;U(i.headers,(function(d,h){a.append(h,d)})),r&&a.append("Content-Type",r);var o=i.url,c=null;if(Ws){var u=new Ws;c={signal:u.signal,timeout:setTimeout((()=>u.abort()),i.timeout)}}Li(o,j({method:i?.method||"GET",headers:a,keepalive:i.method==="POST"&&(n||0)<52428.8,body:s,signal:(t=c)==null?void 0:t.signal},i.fetchOptions)).then((d=>d.text().then((h=>{var v={statusCode:d.status,text:h};if(d.status===200)try{v.json=JSON.parse(h)}catch(p){E.error(p)}i.callback==null||i.callback(v)})))).catch((d=>{E.error(d),i.callback==null||i.callback({statusCode:0,text:d})})).finally((()=>c?clearTimeout(c.timeout):null))}}),Di&&Or.push({transport:"XHR",method:i=>{var e,t=new Di;t.open(i.method||"GET",i.url,!0);var{contentType:r,body:s}=(e=bi(i))!==null&&e!==void 0?e:{};U(i.headers,(function(n,a){t.setRequestHeader(a,n)})),r&&t.setRequestHeader("Content-Type",r),i.timeout&&(t.timeout=i.timeout),i.disableXHRCredentials||(t.withCredentials=!0),t.onreadystatechange=()=>{if(t.readyState===4){var n={statusCode:t.status,text:t.responseText};if(t.status===200)try{n.json=JSON.parse(t.responseText)}catch{}i.callback==null||i.callback(n)}},t.send(s)}}),_e!=null&&_e.sendBeacon&&Or.push({transport:"sendBeacon",method:i=>{var e=Kr(i.url,{beacon:"1"});try{var t,{contentType:r,body:s}=(t=bi(i))!==null&&t!==void 0?t:{},n=typeof s=="string"?new Blob([s],{type:r}):s;_e.sendBeacon(e,n)}catch{}}});var jt=function(i,e){if(!(function(t){try{new RegExp(t)}catch{return!1}return!0})(e))return!1;try{return new RegExp(e).test(i)}catch{return!1}};function Nn(i,e,t){return Qt({distinct_id:i,userPropertiesToSet:e,userPropertiesToSetOnce:t})}var ao={exact:(i,e)=>e.some((t=>i.some((r=>t===r)))),is_not:(i,e)=>e.every((t=>i.every((r=>t!==r)))),regex:(i,e)=>e.some((t=>i.some((r=>jt(t,r))))),not_regex:(i,e)=>e.every((t=>i.every((r=>!jt(t,r))))),icontains:(i,e)=>e.map(Rr).some((t=>i.map(Rr).some((r=>t.includes(r))))),not_icontains:(i,e)=>e.map(Rr).every((t=>i.map(Rr).every((r=>!t.includes(r)))))},Rr=i=>i.toLowerCase();function oo(i,e){return!i||Object.entries(i).every((t=>{var[r,s]=t,n=e?.[r];if(w(n)||qe(n))return!1;var a=[String(n)],o=ao[s.operator];return!!o&&o(s.values,a)}))}var xi=Z("[Error tracking]");class Qu{constructor(e){var t,r;this.Jt=[],this.Kt=new wc([new Rc,new Hc,new Oc,new Fc,new Lc,new Mc,new Ac,new Dc],Nc("web:javascript",jc,$c)),this._instance=e,this.Jt=(t=(r=this._instance.persistence)==null?void 0:r.get_property(Gi))!==null&&t!==void 0?t:[]}onRemoteConfig(e){var t,r,s,n=(t=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&t!==void 0?t:[],a=(s=e.errorTracking)==null?void 0:s.captureExtensionExceptions;this.Jt=n,this._instance.persistence&&this._instance.persistence.register({[Gi]:this.Jt,[nn]:a})}get Yt(){var e,t=!!this._instance.get_property(nn),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??t)!==null&&e!==void 0&&e}buildProperties(e,t){return this.Kt.buildFromUnknown(e,{syntheticException:t?.syntheticException,mechanism:{handled:t?.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.Xt(t)){if(this.Qt(t))return void xi.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(t))return void xi.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(t))return void xi.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(e){if(e.length===0)return!1;var t=e.reduce(((r,s)=>{var{type:n,value:a}=s;return J(n)&&n.length>0&&r.$exception_types.push(n),J(a)&&a.length>0&&r.$exception_values.push(a),r}),{$exception_types:[],$exception_values:[]});return this.Jt.some((r=>{var s=r.values.map((n=>{var a,o=ao[n.operator],c=H(n.value)?n.value:[n.value],u=(a=t[n.key])!==null&&a!==void 0?a:[];return c.length>0&&o(c,u)}));return r.type==="OR"?s.some(Boolean):s.every(Boolean)}))}Zt(e){return e.flatMap((t=>{var r,s;return(r=(s=t.stacktrace)==null?void 0:s.frames)!==null&&r!==void 0?r:[]})).some((t=>t.filename&&t.filename.startsWith("chrome-extension://")))}ti(e){if(e.length>0){var t,r,s,n,a=(t=(r=e[0].stacktrace)==null?void 0:r.frames)!==null&&t!==void 0?t:[],o=a[a.length-1];return(s=o==null||(n=o.filename)==null?void 0:n.includes("posthog.com/static"))!==null&&s!==void 0&&s}return!1}Xt(e){return!B(e)&&H(e)}}var Se=Z("[FeatureFlags]"),Bt=Z("[FeatureFlags]",{debugEnabled:!0}),wi="$active_feature_flags",ht="$override_feature_flags",Rn="$feature_flag_payloads",Ut="$override_feature_flag_payloads",Fn="$feature_flag_request_id",On=i=>{var e={};for(var[t,r]of Fr(i||{}))r&&(e[t]=r);return e},ed=i=>{var e=i.flags;return e?(i.featureFlags=Object.fromEntries(Object.keys(e).map((t=>{var r;return[t,(r=e[t].variant)!==null&&r!==void 0?r:e[t].enabled]}))),i.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter((t=>e[t].enabled)).filter((t=>{var r;return(r=e[t].metadata)==null?void 0:r.payload})).map((t=>{var r;return[t,(r=e[t].metadata)==null?void 0:r.payload]})))):Se.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),i},td=(function(i){return i.FeatureFlags="feature_flags",i.Recordings="recordings",i})({});class rd{constructor(e){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=e,this.featureFlagEventHandlers=[]}li(){var e=this._instance.config.evaluation_environments;return e!=null&&e.length?e.filter((t=>{var r=t&&typeof t=="string"&&t.trim().length>0;return r||Se.error("Invalid evaluation environment found:",t,"Expected non-empty string"),r})):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var e=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.di({disableFlags:e})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Vi),t=this._instance.get_property(ht),r=this._instance.get_property(Ut);if(!r&&!t)return e||{};var s=K({},e||{}),n=[...new Set([...Object.keys(r||{}),...Object.keys(t||{})])];for(var a of n){var o,c,u=s[a],d=t?.[a],h=w(d)?(o=u?.enabled)!==null&&o!==void 0&&o:!!d,v=w(d)?u.variant:typeof d=="string"?d:void 0,p=r?.[a],f=j({},u,{enabled:h,variant:h?v??u?.variant:void 0});h!==u?.enabled&&(f.original_enabled=u?.enabled),v!==u?.variant&&(f.original_variant=u?.variant),p&&(f.metadata=j({},u?.metadata,{payload:p,original_payload:u==null||(c=u.metadata)==null?void 0:c.payload})),s[a]=f}return this.ii||(Se.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:s}),this.ii=!0),s}getFlagVariants(){var e=this._instance.get_property(bt),t=this._instance.get_property(ht);if(!t)return e||{};for(var r=K({},e),s=Object.keys(t),n=0;n<s.length;n++)r[s[n]]=t[s[n]];return this.ii||(Se.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:r}),this.ii=!0),r}getFlagPayloads(){var e=this._instance.get_property(Rn),t=this._instance.get_property(Ut);if(!t)return e||{};for(var r=K({},e||{}),s=Object.keys(t),n=0;n<s.length;n++)r[s[n]]=t[s[n]];return this.ii||(Se.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:r}),this.ii=!0),r}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout((()=>{this.di()}),5))}vi(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.si=e}di(e){var t;if(this.vi(),!this._instance.O())if(this.ri)this.ni=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:j({},((t=this._instance.persistence)==null?void 0:t.get_initial_props())||{},this._instance.get_property(Xt)||{}),group_properties:this._instance.get_property(st)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this.ui()&&(r.evaluation_environments=this.li());var s=this._instance.config.__preview_remote_config,n=s?"/flags/?v=2":"/flags/?v=2&config=true",a=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",o=this._instance.requestRouter.endpointFor("flags",n+a);s&&(r.timezone=eo()),this.ri=!0,this._instance.ci({method:"POST",url:o,data:r,compression:this._instance.config.disable_compression?void 0:De.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var u,d,h=!0;if(c.statusCode===200&&(this.ni||(this.$anon_distinct_id=void 0),h=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi((d=c.json)!==null&&d!==void 0?d:{})),!r.disable_flags||this.ni)if(this.ai=!h,c.json&&(u=c.json.quotaLimited)!=null&&u.includes(td.FeatureFlags))Se.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var v;r.disable_flags||this.receivedFeatureFlags((v=c.json)!==null&&v!==void 0?v:{},h),this.ni&&(this.ni=!1,this.di())}}})}}getFeatureFlag(e,t){if(t===void 0&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],s=""+r,n=this._instance.get_property(Fn)||void 0,a=this._instance.get_property(Dr)||{};if((t.send_event||!("send_event"in t))&&(!(e in a)||!a[e].includes(s))){var o,c,u,d,h,v,p,f,_;H(a[e])?a[e].push(s):a[e]=[s],(o=this._instance.persistence)==null||o.register({[Dr]:a});var y=this.getFeatureFlagDetails(e),S={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:n,$feature_flag_bootstrapped_response:((c=this._instance.config.bootstrap)==null||(c=c.featureFlags)==null?void 0:c[e])||null,$feature_flag_bootstrapped_payload:((u=this._instance.config.bootstrap)==null||(u=u.featureFlagPayloads)==null?void 0:u[e])||null,$used_bootstrap_value:!this.ai};w(y==null||(d=y.metadata)==null?void 0:d.version)||(S.$feature_flag_version=y.metadata.version);var C,x=(h=y==null||(v=y.reason)==null?void 0:v.description)!==null&&h!==void 0?h:y==null||(p=y.reason)==null?void 0:p.code;x&&(S.$feature_flag_reason=x),y!=null&&(f=y.metadata)!=null&&f.id&&(S.$feature_flag_id=y.metadata.id),w(y?.original_variant)&&w(y?.original_enabled)||(S.$feature_flag_original_response=w(y.original_variant)?y.original_enabled:y.original_variant),y!=null&&(_=y.metadata)!=null&&_.original_payload&&(S.$feature_flag_original_payload=y==null||(C=y.metadata)==null?void 0:C.original_payload),this._instance.capture("$feature_flag_called",S)}return r}Se.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var r=this._instance.config.token,s={distinct_id:this._instance.get_distinct_id(),token:r};this.ui()&&(s.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:s,compression:this._instance.config.disable_compression?void 0:De.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:n=>{var a,o=(a=n.json)==null?void 0:a.featureFlagPayloads;t(o?.[e]||void 0)}})}isFeatureEnabled(e,t){if(t===void 0&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,t);return w(r)?void 0:!!r}Se.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((t=>t!==e))}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ei=!0;var r=this.getFlagVariants(),s=this.getFlagPayloads(),n=this.getFlagsWithDetails();(function(a,o,c,u,d){c===void 0&&(c={}),u===void 0&&(u={}),d===void 0&&(d={});var h=ed(a),v=h.flags,p=h.featureFlags,f=h.featureFlagPayloads;if(p){var _=a.requestId;if(H(p)){Se.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var y={};if(p)for(var S=0;S<p.length;S++)y[p[S]]=!0;o&&o.register({[wi]:p,[bt]:y})}else{var C=p,x=f,P=v;a.errorsWhileComputingFlags&&(C=j({},c,C),x=j({},u,x),P=j({},d,P)),o&&o.register(j({[wi]:Object.keys(On(C)),[bt]:C||{},[Rn]:x||{},[Vi]:P||{}},_?{[Fn]:_}:{}))}}})(e,this._instance.persistence,r,s,n),this.pi(t)}}override(e,t){t===void 0&&(t=!1),Se.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Se.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(ht),this._instance.persistence.unregister(Ut),this.pi(),Bt.info("All overrides cleared");if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var t,r=e;if(this.ii=!!((t=r.suppressWarning)!==null&&t!==void 0&&t),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(ht),Bt.info("Flag overrides cleared");else if(r.flags){if(H(r.flags)){for(var s={},n=0;n<r.flags.length;n++)s[r.flags[n]]=!0;this._instance.persistence.register({[ht]:s})}else this._instance.persistence.register({[ht]:r.flags});Bt.info("Flag overrides set",{flags:r.flags})}}return"payloads"in r&&(r.payloads===!1?(this._instance.persistence.unregister(Ut),Bt.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[Ut]:r.payloads}),Bt.info("Payload overrides set",{payloads:r.payloads}))),void this.pi()}this.pi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ei){var{flags:t,flagVariants:r}=this.gi();e(t,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,r){var s,n=(this._instance.get_property(Jt)||[]).find((u=>u.flagKey===e)),a={["$feature_enrollment/"+e]:t},o={$feature_flag:e,$feature_enrollment:t,$set:a};n&&(o.$early_access_feature_name=n.name),r&&(o.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(a,!1);var c=j({},this.getFlagVariants(),{[e]:t});(s=this._instance.persistence)==null||s.register({[wi]:Object.keys(On(c)),[bt]:c}),this.pi()}getEarlyAccessFeatures(e,t,r){t===void 0&&(t=!1);var s=this._instance.get_property(Jt),n=r?"&"+r.map((a=>"stage="+a)).join("&"):"";if(s&&!t)return e(s);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+n),method:"GET",callback:a=>{var o,c;if(a.json){var u=a.json.earlyAccessFeatures;return(o=this._instance.persistence)==null||o.unregister(Jt),(c=this._instance.persistence)==null||c.register({[Jt]:u}),e(u)}}})}gi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((r=>t[r])),flagVariants:Object.keys(t).filter((r=>t[r])).reduce(((r,s)=>(r[s]=t[s],r)),{})}}pi(e){var{flags:t,flagVariants:r}=this.gi();this.featureFlagEventHandlers.forEach((s=>s(t,r,{errorsLoading:e})))}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(Xt)||{};this._instance.register({[Xt]:j({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Xt)}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0);var r=this._instance.get_property(st)||{};Object.keys(r).length!==0&&Object.keys(r).forEach((s=>{r[s]=j({},r[s],e[s]),delete e[s]})),this._instance.register({[st]:j({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(st)||{};this._instance.register({[st]:j({},t,{[e]:{}})})}else this._instance.unregister(st)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.vi(),this.ii=!1}}var id=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class ki{constructor(e,t){this.F=e,this.props={},this.mi=!1,this.yi=(r=>{var s="";return r.token&&(s=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+s+"_posthog"})(e),this.Y=this.bi(e),this.load(),e.debug&&E.info("Persistence loaded",e.persistence,j({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.wi}bi(e){id.indexOf(e.persistence.toLowerCase())===-1&&(E.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return t==="localstorage"&&G.H()?G:t==="localstorage+cookie"&&Cr.H()?Cr:t==="sessionstorage"&&re.H()?re:t==="memory"?fu:t==="cookie"?Re:Cr.H()?Cr:Re}properties(){var e={};return U(this.props,(function(t,r){if(r===bt&&ie(t))for(var s=Object.keys(t),n=0;n<s.length;n++)e["$feature/"+s[n]]=t[s[n]];else o=r,c=!1,(qe(a=Vc)?c:Vs&&a.indexOf===Vs?a.indexOf(o)!=-1:(U(a,(function(u){if(c||(c=u===o))return Mr})),c))||(e[r]=t);var a,o,c})),e}load(){if(!this.wi){var e=this.Y.W(this.yi);e&&(this.props=K({},e))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.Si,this.Ei,this.F.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(e,t,r){if(ie(e)){w(t)&&(t="None"),this.xi=w(r)?this.$i:r;var s=!1;if(U(e,((n,a)=>{this.props.hasOwnProperty(a)&&this.props[a]!==t||(this.props[a]=n,s=!0)})),s)return this.save(),!0}return!1}register(e,t){if(ie(e)){this.xi=w(t)?this.$i:t;var r=!1;if(U(e,((s,n)=>{e.hasOwnProperty(n)&&this.props[n]!==s&&(this.props[n]=s,r=!0)})),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.mi){var e=Ka(this.F.custom_campaign_params,this.F.mask_personal_data_properties,this.F.custom_personal_data_properties);yt(vs(e))||this.register(e),this.mi=!0}}update_search_keyword(){var e;this.register((e=k?.referrer)?Ja(e):{})}update_referrer_info(){var e;this.register_once({$referrer:Xa(),$referring_domain:k!=null&&k.referrer&&((e=qr(k.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Ji]||this.props[Xi]||this.register_once({[Hr]:Za(this.F.mask_personal_data_properties,this.F.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};U([Xi,Ji],(a=>{var o=this.props[a];o&&U(o,(function(c,u){e["$initial_"+Hi(u)]=c}))}));var t,r,s=this.props[Hr];if(s){var n=(t=Qa(s),r={},U(t,(function(a,o){r["$initial_"+Hi(o)]=a})),r);K(e,n)}return e}safe_merge(e){return U(this.props,(function(t,r){r in e||(e[r]=t)})),e}update_config(e,t,r){if(this.$i=this.xi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var s=this.bi(e),n=this.props;this.clear(),this.Y=s,this.props=n,this.save()}}set_disabled(e){this.wi=e,this.wi?this.remove():this.save()}set_cross_subdomain(e){e!==this.Si&&(this.Si=e,this.remove(),this.save())}set_secure(e){e!==this.Ei&&(this.Ei=e,this.remove(),this.save())}set_event_timer(e,t){var r=this.props[Yt]||{};r[e]=t,this.props[Yt]=r,this.save()}remove_event_timer(e){var t=(this.props[Yt]||{})[e];return w(t)||(delete this.props[Yt][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var qt=(function(i){return i.Activation="events",i.Cancellation="cancelEvents",i})({});(function(i){return i.Button="button",i.Tab="tab",i.Selector="selector",i})({});(function(i){return i.TopLeft="top_left",i.TopRight="top_right",i.TopCenter="top_center",i.MiddleLeft="middle_left",i.MiddleRight="middle_right",i.MiddleCenter="middle_center",i.Left="left",i.Center="center",i.Right="right",i.NextToTrigger="next_to_trigger",i})({});(function(i){return i.Top="top",i.Left="left",i.Right="right",i.Bottom="bottom",i})({});var Ei=(function(i){return i.Popover="popover",i.API="api",i.Widget="widget",i.ExternalSurvey="external_survey",i})({});(function(i){return i.Open="open",i.MultipleChoice="multiple_choice",i.SingleChoice="single_choice",i.Rating="rating",i.Link="link",i})({});(function(i){return i.NextQuestion="next_question",i.End="end",i.ResponseBased="response_based",i.SpecificQuestion="specific_question",i})({});(function(i){return i.Once="once",i.Recurring="recurring",i.Always="always",i})({});var Ir=(function(i){return i.SHOWN="survey shown",i.DISMISSED="survey dismissed",i.SENT="survey sent",i})({}),In=(function(i){return i.SURVEY_ID="$survey_id",i.SURVEY_NAME="$survey_name",i.SURVEY_RESPONSE="$survey_response",i.SURVEY_ITERATION="$survey_iteration",i.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",i.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",i.SURVEY_SUBMISSION_ID="$survey_submission_id",i.SURVEY_QUESTIONS="$survey_questions",i.SURVEY_COMPLETED="$survey_completed",i})({}),lo=(function(i){return i.Popover="popover",i.Inline="inline",i})({});class js{constructor(){this.ki={},this.ki={}}on(e,t){return this.ki[e]||(this.ki[e]=[]),this.ki[e].push(t),()=>{this.ki[e]=this.ki[e].filter((r=>r!==t))}}emit(e,t){for(var r of this.ki[e]||[])r(t);for(var s of this.ki["*"]||[])s(e,t)}}class nt{constructor(e){this.Pi=new js,this.Ti=(t,r)=>this.Ii(t,r)&&this.Ri(t,r)&&this.Fi(t,r)&&this.Ci(t,r),this.Ii=(t,r)=>r==null||!r.event||t?.event===r?.event,this._instance=e,this.Mi=new Set,this.Oi=new Set}init(){var e;if(!w((e=this._instance)==null?void 0:e.Ai)){var t;(t=this._instance)==null||t.Ai(((r,s)=>{this.on(r,s)}))}}register(e){var t,r;if(!w((t=this._instance)==null?void 0:t.Ai)&&(e.forEach((a=>{var o,c;(o=this.Oi)==null||o.add(a),(c=a.steps)==null||c.forEach((u=>{var d;(d=this.Mi)==null||d.add(u?.event||"")}))})),(r=this._instance)!=null&&r.autocapture)){var s,n=new Set;e.forEach((a=>{var o;(o=a.steps)==null||o.forEach((c=>{c!=null&&c.selector&&n.add(c?.selector)}))})),(s=this._instance)==null||s.autocapture.setElementSelectors(n)}}on(e,t){var r;t!=null&&e.length!=0&&(this.Mi.has(e)||this.Mi.has(t?.event))&&this.Oi&&((r=this.Oi)==null?void 0:r.size)>0&&this.Oi.forEach((s=>{this.Di(t,s)&&this.Pi.emit("actionCaptured",s.name)}))}ji(e){this.onAction("actionCaptured",(t=>e(t)))}Di(e,t){if(t?.steps==null)return!1;for(var r of t.steps)if(this.Ti(e,r))return!0;return!1}onAction(e,t){return this.Pi.on(e,t)}Ri(e,t){if(t!=null&&t.url){var r,s=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!s||typeof s!="string"||!nt.Li(s,t?.url,t?.url_matching||"contains"))return!1}return!0}static Li(e,t,r){switch(r){case"regex":return!!m&&jt(e,t);case"exact":return t===e;case"contains":var s=nt.Ni(t).replace(/_/g,".").replace(/%/g,".*");return jt(e,s);default:return!1}}static Ni(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fi(e,t){if((t!=null&&t.href||t!=null&&t.tag_name||t!=null&&t.text)&&!this.Ui(e).some((n=>!(t!=null&&t.href&&!nt.Li(n.href||"",t?.href,t?.href_matching||"exact"))&&(t==null||!t.tag_name||n.tag_name===t?.tag_name)&&!(t!=null&&t.text&&!nt.Li(n.text||"",t?.text,t?.text_matching||"exact")&&!nt.Li(n.$el_text||"",t?.text,t?.text_matching||"exact")))))return!1;if(t!=null&&t.selector){var r,s=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(!s||!s.includes(t?.selector))return!1}return!0}Ui(e){return e?.properties.$elements==null?[]:e?.properties.$elements}Ci(e,t){return t==null||!t.properties||t.properties.length===0||oo(t.properties.reduce(((r,s)=>{var n=H(s.value)?s.value.map(String):s.value!=null?[String(s.value)]:[];return r[s.key]={values:n,operator:s.operator||"exact"},r}),{}),e?.properties)}}var D=Z("[Surveys]"),as="seenSurvey_",sd=(i,e)=>{var t="$survey_"+e+"/"+i.id;return i.current_iteration&&i.current_iteration>0&&(t="$survey_"+e+"/"+i.id+"/"+i.current_iteration),t},An=i=>{var e=""+as+i.id;return i.current_iteration&&i.current_iteration>0&&(e=""+as+i.id+"_"+i.current_iteration),e},nd=[Ei.Popover,Ei.Widget,Ei.API],ad={ignoreConditions:!1,ignoreDelay:!1,displayType:lo.Popover};class od{constructor(e){this._instance=e,this.zi=new Map,this.Hi=new Map,this.Bi=new Map}qi(e,t){return!!e&&oo(e.propertyFilters,t?.properties)}Wi(e,t){var r=new Map;return e.forEach((s=>{var n;(n=s.conditions)==null||(n=n[t])==null||(n=n.values)==null||n.forEach((a=>{if(a!=null&&a.name){var o=r.get(a.name)||[];o.push(s.id),r.set(a.name,o)}}))})),r}Gi(e,t,r){var s,n=(r===qt.Activation?this.zi:this.Hi).get(e),a=[];return(s=this._instance)==null||s.getSurveys((o=>{a=o.filter((c=>n?.includes(c.id)))})),a.filter((o=>{var c,u=(c=o.conditions)==null||(c=c[r])==null||(c=c.values)==null?void 0:c.find((d=>d.name===e));return this.qi(u,t)}))}register(e){var t;w((t=this._instance)==null?void 0:t.Ai)||(this.Vi(e),this.Ji(e))}Ji(e){var t=e.filter((r=>{var s,n;return((s=r.conditions)==null?void 0:s.actions)&&((n=r.conditions)==null||(n=n.actions)==null||(n=n.values)==null?void 0:n.length)>0}));t.length!==0&&(this.Ki==null&&(this.Ki=new nt(this._instance),this.Ki.init(),this.Ki.ji((r=>{this.onAction(r)}))),t.forEach((r=>{var s,n,a,o,c;r.conditions&&(s=r.conditions)!=null&&s.actions&&(n=r.conditions)!=null&&(n=n.actions)!=null&&n.values&&((a=r.conditions)==null||(a=a.actions)==null||(a=a.values)==null?void 0:a.length)>0&&((o=this.Ki)==null||o.register(r.conditions.actions.values),(c=r.conditions)==null||(c=c.actions)==null||(c=c.values)==null||c.forEach((u=>{if(u&&u.name){var d=this.Bi.get(u.name);d&&d.push(r.id),this.Bi.set(u.name,d||[r.id])}})))})))}Vi(e){var t,r=e.filter((n=>{var a,o;return((a=n.conditions)==null?void 0:a.events)&&((o=n.conditions)==null||(o=o.events)==null||(o=o.values)==null?void 0:o.length)>0})),s=e.filter((n=>{var a,o;return((a=n.conditions)==null?void 0:a.cancelEvents)&&((o=n.conditions)==null||(o=o.cancelEvents)==null||(o=o.values)==null?void 0:o.length)>0}));(r.length!==0||s.length!==0)&&((t=this._instance)==null||t.Ai(((n,a)=>{this.onEvent(n,a)})),this.zi=this.Wi(e,qt.Activation),this.Hi=this.Wi(e,qt.Cancellation))}onEvent(e,t){var r,s=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[jr])||[];if(Ir.SHOWN===e&&t&&s.length>0){var n;D.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:s});var a=t==null||(n=t.properties)==null?void 0:n.$survey_id;if(a){var o=s.indexOf(a);o>=0&&(s.splice(o,1),this.Yi(s))}}else{if(this.Hi.has(e)){var c=this.Gi(e,t,qt.Cancellation);c.length>0&&(D.info("cancel event matched, cancelling surveys",{event:e,surveysToCancel:c.map((d=>d.id))}),c.forEach((d=>{var h,v=s.indexOf(d.id);v>=0&&s.splice(v,1),(h=this._instance)==null||h.cancelPendingSurvey(d.id)})),this.Yi(s))}if(this.zi.has(e)){D.info("survey event name matched",{event:e,eventPayload:t,surveys:this.zi.get(e)});var u=this.Gi(e,t,qt.Activation);this.Yi(s.concat(u.map((d=>d.id))||[]))}}}onAction(e){var t,r=((t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[jr])||[];this.Bi.has(e)&&this.Yi(r.concat(this.Bi.get(e)||[]))}Yi(e){var t;D.info("updating activated surveys",{activatedSurveys:e}),(t=this._instance)==null||(t=t.persistence)==null||t.register({[jr]:[...new Set(e)]})}getSurveys(){var e,t=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[jr];return t||[]}getEventToSurveys(){return this.zi}Xi(){return this.Ki}}class ld{constructor(e){this.Qi=void 0,this._surveyManager=null,this.Zi=!1,this.te=!1,this.ie=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(B(t))return D.warn("Flags not loaded yet. Not loading surveys.");var r=H(t);this.Qi=r?t.length>0:t,D.info("flags response received, isSurveysEnabled: "+this.Qi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);(r!=null&&r.startsWith(as)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach((s=>localStorage.removeItem(s)))}loadIfEnabled(){if(!this._surveyManager)if(this.te)D.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)D.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())D.info("Not loading surveys in cookieless mode without consent.");else{var e=R?.__PosthogExtensions__;if(e){if(!w(this.Qi)||this._instance.config.advanced_enable_surveys){var t=this.Qi||this._instance.config.advanced_enable_surveys;this.te=!0;try{var r=e.generateSurveys;if(r)return void this.ee(r,t);var s=e.loadExternalDependency;if(!s)return void this.re("PostHog loadExternalDependency extension not found.");s(this._instance,"surveys",(n=>{n||!e.generateSurveys?this.re("Could not load surveys script",n):this.ee(e.generateSurveys,t)}))}catch(n){throw this.re("Error initializing surveys",n),n}finally{this.te=!1}}}else D.error("PostHog Extensions not found.")}}ee(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new od(this._instance),D.info("Surveys loaded successfully"),this.se({isLoaded:!0})}re(e,t){D.error(e,t),this.se({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.ie.push(e),this._surveyManager&&this.se({isLoaded:!0}),()=>{this.ie=this.ie.filter((t=>t!==e))}}getSurveys(e,t){if(t===void 0&&(t=!1),this._instance.config.disable_surveys)return D.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Wi);if(r&&!t)return e(r,{isLoaded:!0});if(this.Zi)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Zi=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:s=>{var n;this.Zi=!1;var a=s.statusCode;if(a!==200||!s.json){var o="Surveys API could not be loaded, status: "+a;return D.error(o),e([],{isLoaded:!1,error:o})}var c,u=s.json.surveys||[],d=u.filter((h=>(function(v){return!(!v.start_date||v.end_date)})(h)&&((function(v){var p;return!((p=v.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)})(h)||(function(v){var p;return!((p=v.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)})(h))));return d.length>0&&((c=this._surveyEventReceiver)==null||c.register(d)),(n=this._instance.persistence)==null||n.register({[Wi]:u}),e(u,{isLoaded:!0})}})}catch(s){throw this.Zi=!1,s}}se(e){for(var t of this.ie)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(r){D.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,t){if(t===void 0&&(t=!1),!B(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);D.warn("init was not called")}ne(e){var t=null;return this.getSurveys((r=>{var s;t=(s=r.find((n=>n.id===e)))!==null&&s!==void 0?s:null})),t}oe(e){if(B(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t=typeof e=="string"?this.ne(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(B(this._surveyManager))return D.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.oe(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return B(this._surveyManager)?(D.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((r=>{this.getSurveys((s=>{var n,a=(n=s.find((c=>c.id===e)))!==null&&n!==void 0?n:null;if(a){var o=this.oe(a);r({visible:o.eligible,disabledReason:o.reason})}else r({visible:!1,disabledReason:"Survey not found"})}),t)}))}renderSurvey(e,t){var r;if(B(this._surveyManager))D.warn("init was not called");else{var s=typeof e=="string"?this.ne(e):e;if(s!=null&&s.id)if(nd.includes(s.type)){var n=k?.querySelector(t);if(n)return(r=s.appearance)!=null&&r.surveyPopupDelaySeconds?(D.info("Rendering survey "+s.id+" with delay of "+s.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var a,o;D.info("Rendering survey "+s.id+" with delay of "+((a=s.appearance)==null?void 0:a.surveyPopupDelaySeconds)+" seconds"),(o=this._surveyManager)==null||o.renderSurvey(s,n),D.info("Survey "+s.id+" rendered")}),1e3*s.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(s,n);D.warn("Survey element not found")}else D.warn("Surveys of type "+s.type+" cannot be rendered in the app");else D.warn("Survey not found")}}displaySurvey(e,t){var r;if(B(this._surveyManager))D.warn("init was not called");else{var s=this.ne(e);if(s){var n=s;if((r=s.appearance)!=null&&r.surveyPopupDelaySeconds&&t.ignoreDelay&&(n=j({},s,{appearance:j({},s.appearance,{surveyPopupDelaySeconds:0})})),t.ignoreConditions===!1){var a=this.canRenderSurvey(s);if(!a.visible)return void D.warn("Survey is not eligible to be displayed: ",a.disabledReason)}t.displayType!==lo.Inline?this._surveyManager.handlePopoverSurvey(n):this.renderSurvey(n,t.selector)}else D.warn("Survey not found")}}cancelPendingSurvey(e){B(this._surveyManager)?D.warn("init was not called"):this._surveyManager.cancelSurvey(e)}}var Tn=Z("[RateLimiter]");class cd{constructor(e){var t,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=s=>{var n=s.text;if(n&&n.length)try{(JSON.parse(n).quota_limited||[]).forEach((a=>{Tn.info((a||"events")+" is quota limited."),this.serverLimits[a]=new Date().getTime()+6e4}))}catch(a){return void Tn.warn('could not rate limit - continuing. Error: "'+a?.message+'"',{text:n})}},this.instance=e,this.captureEventsPerSecond=((t=e.config.rate_limiting)==null?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,r,s;e===void 0&&(e=!1);var n=new Date().getTime(),a=(t=(r=this.instance.persistence)==null?void 0:r.get_property(Yi))!==null&&t!==void 0?t:{tokens:this.captureEventsBurstLimit,last:n};a.tokens+=(n-a.last)/1e3*this.captureEventsPerSecond,a.last=n,a.tokens>this.captureEventsBurstLimit&&(a.tokens=this.captureEventsBurstLimit);var o=a.tokens<1;return o||e||(a.tokens=Math.max(0,a.tokens-1)),!o||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,(s=this.instance.persistence)==null||s.set_property(Yi,a),{isRateLimited:o,remainingTokens:a.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return t!==!1&&new Date().getTime()<t}}var it=Z("[RemoteConfig]");class ud{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=R._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}ae(e){var t,r;(t=R.__PosthogExtensions__)!=null&&t.loadExternalDependency?(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",(()=>e(this.remoteConfig))):(it.error("PostHog Extensions not found. Cannot load remote config."),e())}le(e){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return it.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.O())return void it.warn("Remote config is disabled. Falling back to local config.");this.ae((e=>{if(!e)return it.info("No config found after loading remote JS config. Falling back to JSON."),void this.le((t=>{this.fi(t)}));this.fi(e)}))}catch(e){it.error("Error loading remote config",e)}}fi(e){e?this._instance.config.__preview_remote_config?(this._instance.fi(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):it.info("__preview_remote_config is disabled. Logging config instead",e):it.error("Failed to fetch remote config from PostHog.")}}var os=3e3;class dd{constructor(e,t){this.ue=!0,this.he=[],this.de=$e(t?.flush_interval_ms||os,250,5e3,E.createLogger("flush interval"),os),this.ve=e}enqueue(e){this.he.push(e),this.ce||this.fe()}unload(){this.pe();var e=this.he.length>0?this.ge():{},t=Object.values(e);[...t.filter((r=>r.url.indexOf("/e")===0)),...t.filter((r=>r.url.indexOf("/e")!==0))].map((r=>{this.ve(j({},r,{transport:"sendBeacon"}))}))}enable(){this.ue=!1,this.fe()}fe(){var e=this;this.ue||(this.ce=setTimeout((()=>{if(this.pe(),this.he.length>0){var t=this.ge(),r=function(){var n=t[s],a=new Date().getTime();n.data&&H(n.data)&&U(n.data,(o=>{o.offset=Math.abs(o.timestamp-a),delete o.timestamp})),e.ve(n)};for(var s in t)r()}}),this.de))}pe(){clearTimeout(this.ce),this.ce=void 0}ge(){var e={};return U(this.he,(t=>{var r,s=t,n=(s?s.batchKey:null)||s.url;w(e[n])&&(e[n]=j({},s,{data:[]})),(r=e[n].data)==null||r.push(s.data)})),this.he=[],e}}var hd=["retriesPerformedSoFar"];class pd{constructor(e){this._e=!1,this.me=3e3,this.he=[],this._instance=e,this.he=[],this.ye=!0,!w(m)&&"onLine"in m.navigator&&(this.ye=m.navigator.onLine,this.be=()=>{this.ye=!0,this.Dt()},this.we=()=>{this.ye=!1},Y(m,"online",this.be),Y(m,"offline",this.we))}get length(){return this.he.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,r=ia(e,hd);Fe(t)&&t>0&&(r.url=Kr(r.url,{retry_count:t})),this._instance.ci(j({},r,{callback:s=>{s.statusCode!==200&&(s.statusCode<400||s.statusCode>=500)&&(t??0)<10?this.xe(j({retriesPerformedSoFar:t},r)):r.callback==null||r.callback(s)}}))}xe(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var r=(function(a){var o=3e3*Math.pow(2,a),c=o/2,u=Math.min(18e5,o),d=(Math.random()-.5)*(u-c);return Math.ceil(u+d)})(t),s=Date.now()+r;this.he.push({retryAt:s,requestOptions:e});var n="Enqueued failed request for retry in "+r;navigator.onLine||(n+=" (Browser is offline)"),E.warn(n),this._e||(this._e=!0,this.Se())}Se(){if(this.Ee&&clearTimeout(this.Ee),this.he.length===0)return this._e=!1,void(this.Ee=void 0);this.Ee=setTimeout((()=>{this.ye&&this.he.length>0&&this.Dt(),this.Se()}),this.me)}Dt(){var e=Date.now(),t=[],r=this.he.filter((n=>n.retryAt<e||(t.push(n),!1)));if(this.he=t,r.length>0)for(var{requestOptions:s}of r)this.retriableRequest(s)}unload(){for(var{requestOptions:e}of(this.Ee&&(clearTimeout(this.Ee),this.Ee=void 0),this._e=!1,w(m)||(this.be&&(m.removeEventListener("online",this.be),this.be=void 0),this.we&&(m.removeEventListener("offline",this.we),this.we=void 0)),this.he))try{this._instance.ci(j({},e,{transport:"sendBeacon"}))}catch(t){E.error(t)}this.he=[]}}class fd{constructor(e){this.$e=()=>{var t,r,s,n;this.ke||(this.ke={});var a=this.scrollElement(),o=this.scrollY(),c=a?Math.max(0,a.scrollHeight-a.clientHeight):0,u=o+(a?.clientHeight||0),d=a?.scrollHeight||0;this.ke.lastScrollY=Math.ceil(o),this.ke.maxScrollY=Math.max(o,(t=this.ke.maxScrollY)!==null&&t!==void 0?t:0),this.ke.maxScrollHeight=Math.max(c,(r=this.ke.maxScrollHeight)!==null&&r!==void 0?r:0),this.ke.lastContentY=u,this.ke.maxContentY=Math.max(u,(s=this.ke.maxContentY)!==null&&s!==void 0?s:0),this.ke.maxContentHeight=Math.max(d,(n=this.ke.maxContentHeight)!==null&&n!==void 0?n:0)},this._instance=e}getContext(){return this.ke}resetContext(){var e=this.ke;return setTimeout(this.$e,0),e}startMeasuringScrollPosition(){Y(m,"scroll",this.$e,{capture:!0}),Y(m,"scrollend",this.$e,{capture:!0}),Y(m,"resize",this.$e)}scrollElement(){if(!this._instance.config.scroll_root_selector)return m?.document.documentElement;var e=H(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var r=m?.document.querySelector(t);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return m&&(m.scrollY||m.pageYOffset||m.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return m&&(m.scrollX||m.pageXOffset||m.document.documentElement.scrollLeft)||0}}var gd=i=>Za(i?.config.mask_personal_data_properties,i?.config.custom_personal_data_properties);class Mn{constructor(e,t,r,s){this.Pe=n=>{var a=this.Te();if(!a||a.sessionId!==n){var o={sessionId:n,props:this.Ie(this._instance)};this.Re.register({[Ki]:o})}},this._instance=e,this.Fe=t,this.Re=r,this.Ie=s||gd,this.Fe.onSessionId(this.Pe)}Te(){return this.Re.props[Ki]}getSetOnceProps(){var e,t=(e=this.Te())==null?void 0:e.props;return t?"r"in t?Qa(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return U(vs(this.getSetOnceProps()),((t,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+Hi(r)]=t})),e}}var Si=Z("[SessionId]");class Ln{on(e,t){return this.Ce.on(e,t)}constructor(e,t,r){var s;if(this.Me=[],this.Oe=void 0,this.Ce=new js,this.Ae=(d,h)=>Math.abs(d-h)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.F=e.config,this.Re=e.persistence,this.De=void 0,this.je=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Le=t||We,this.Ne=r||We;var n=this.F.persistence_name||this.F.token,a=this.F.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*$e(a,60,36e3,Si.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ue(),this.ze="ph_"+n+"_window_id",this.He="ph_"+n+"_primary_window_exists",this.Be()){var o=re.W(this.ze),c=re.W(this.He);o&&!c?this.De=o:re.V(this.ze),re.G(this.He,!0)}if((s=this.F.bootstrap)!=null&&s.sessionID)try{var u=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.F.bootstrap.sessionID);this.qe(this.F.bootstrap.sessionID,new Date().getTime(),u)}catch(d){Si.error("Invalid sessionID in bootstrap",d)}this.We()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return w(this.Me)&&(this.Me=[]),this.Me.push(e),this.je&&e(this.je,this.De),()=>{this.Me=this.Me.filter((t=>t!==e))}}Be(){return this.F.persistence!=="memory"&&!this.Re.wi&&re.H()}Ge(e){e!==this.De&&(this.De=e,this.Be()&&re.G(this.ze,e))}Ve(){return this.De?this.De:this.Be()?re.W(this.ze):null}qe(e,t,r){e===this.je&&t===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=t,this.je=e,this.Re.register({[Lr]:[t,e,r]}))}Je(){if(this.je&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.je,this._sessionStartTimestamp];var e=this.Re.props[Lr];return H(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.qe(null,null,null)}destroy(){clearTimeout(this.Ke),this.Ke=void 0,this.Oe&&m&&(m.removeEventListener("beforeunload",this.Oe,{capture:!1}),this.Oe=void 0),this.Me=[]}We(){this.Oe=()=>{this.Be()&&re.V(this.He)},Y(m,"beforeunload",this.Oe,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=null),this.F.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=t||new Date().getTime(),[s,n,a]=this.Je(),o=this.Ve(),c=Fe(a)&&a>0&&Math.abs(r-a)>864e5,u=!1,d=!n,h=!d&&!e&&this.Ae(r,s);d||h||c?(n=this.Le(),o=this.Ne(),Si.info("new session ID generated",{sessionId:n,windowId:o,changeReason:{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}}),a=r,u=!0):o||(o=this.Ne(),u=!0);var v=s===0||!e||c?r:s,p=a===0?new Date().getTime():a;return this.Ge(o),this.qe(n,v,p),e||this.Ue(),u&&this.Me.forEach((f=>f(n,o,u?{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}:void 0))),{sessionId:n,windowId:o,sessionStartTimestamp:p,changeReason:u?{noSessionId:d,activityTimeout:h,sessionPastMaximumLength:c}:void 0,lastActivityTimestamp:s}}Ue(){clearTimeout(this.Ke),this.Ke=setTimeout((()=>{var[e]=this.Je();if(this.Ae(new Date().getTime(),e)){var t=this.je;this.resetSessionId(),this.Ce.emit("forcedIdleReset",{idleSessionId:t})}}),1.1*this.sessionTimeoutMs)}}var vd=["$set_once","$set"],Ge=Z("[SiteApps]");class md{constructor(e){this._instance=e,this.Ye=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Xe(e,t){if(t){var r=this.globalsForEvent(t);this.Ye.push(r),this.Ye.length>1e3&&(this.Ye=this.Ye.slice(10))}}get siteAppLoaders(){var e;return(e=R._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ai(this.Xe.bind(this));this.Qe=()=>{e(),this.Ye=[],this.Qe=void 0}}}globalsForEvent(e){var t,r,s,n,a,o,c;if(!e)throw new Error("Event payload is required");var u={},d=this._instance.get_property("$groups")||[],h=this._instance.get_property("$stored_group_properties")||{};for(var[v,p]of Object.entries(h))u[v]={id:d[v],type:v,properties:p};var{$set_once:f,$set:_}=e;return{event:j({},ia(e,vd),{properties:j({},e.properties,_?{$set:j({},(t=(r=e.properties)==null?void 0:r.$set)!==null&&t!==void 0?t:{},_)}:{},f?{$set_once:j({},(s=(n=e.properties)==null?void 0:n.$set_once)!==null&&s!==void 0?s:{},f)}:{}),elements_chain:(a=(o=e.properties)==null?void 0:o.$elements_chain)!==null&&a!==void 0?a:"",distinct_id:(c=e.properties)==null?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var t=this.apps[e.id],r=()=>{var o;!t.errored&&this.Ye.length&&(Ge.info("Processing "+this.Ye.length+" events for site app with id "+e.id),this.Ye.forEach((c=>t.processEvent==null?void 0:t.processEvent(c))),t.processedBuffer=!0),Object.values(this.apps).every((c=>c.processedBuffer||c.errored))&&((o=this.Qe)==null||o.call(this))},s=!1,n=o=>{t.errored=!o,t.loaded=!0,Ge.info("Site app with id "+e.id+" "+(o?"loaded":"errored")),s&&r()};try{var{processEvent:a}=e.init({posthog:this._instance,callback:o=>{n(o)}});a&&(t.processEvent=a),s=!0}catch(o){Ge.error("Error while initializing PostHog app with config id "+e.id,o),n(!1)}if(s&&t.loaded)try{r()}catch(o){Ge.error("Error while processing buffered events PostHog app with config id "+e.id,o),t.errored=!0}}Ze(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}tr(e){if(Object.keys(this.apps).length!==0){var t=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(t)}catch(s){Ge.error("Error while processing event "+e.event+" for site app "+r.id,s)}}}onRemoteConfig(e){var t,r,s,n=this;if((t=this.siteAppLoaders)!=null&&t.length)return this.isEnabled?(this.Ze(),void this._instance.on("eventCaptured",(u=>this.tr(u)))):void Ge.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Qe)==null||r.call(this),(s=e.siteApps)!=null&&s.length)if(this.isEnabled){var a=function(u){var d;R["__$$ph_site_app_"+u]=n._instance,(d=R.__PosthogExtensions__)==null||d.loadSiteApp==null||d.loadSiteApp(n._instance,c,(h=>{if(h)return Ge.error("Error while initializing PostHog app with config id "+u,h)}))};for(var{id:o,url:c}of e.siteApps)a(o)}else Ge.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var co=function(i,e){if(!i)return!1;var t=i.userAgent;if(t&&Js(t,e))return!0;try{var r=i?.userAgentData;if(r!=null&&r.brands&&r.brands.some((s=>Js(s?.brand,e))))return!0}catch{}return!!i.webdriver},er=(function(i){return i.US="us",i.EU="eu",i.CUSTOM="custom",i})({}),Dn="i.posthog.com";class _d{constructor(e){this.ir={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+Dn,".posthog.com")),t==="https://app.posthog.com"?"https://us.posthog.com":t}get region(){return this.ir[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.ir[this.apiHost]=er.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.ir[this.apiHost]=er.EU:this.ir[this.apiHost]=er.CUSTOM),this.ir[this.apiHost]}endpointFor(e,t){if(t===void 0&&(t=""),t&&(t=t[0]==="/"?t:"/"+t),e==="ui")return this.uiHost+t;if(e==="flags")return this.flagsApiHost+t;if(this.region===er.CUSTOM)return this.apiHost+t;var r=Dn+t;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var yd={icontains:(i,e)=>!!m&&e.href.toLowerCase().indexOf(i.toLowerCase())>-1,not_icontains:(i,e)=>!!m&&e.href.toLowerCase().indexOf(i.toLowerCase())===-1,regex:(i,e)=>!!m&&jt(e.href,i),not_regex:(i,e)=>!!m&&!jt(e.href,i),exact:(i,e)=>e.href===i,is_not:(i,e)=>e.href!==i};class oe{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),t.getWebExperiments((s=>{oe.er("retrieved web experiments from the server"),t.rr=new Map,s.forEach((n=>{if(n.feature_flag_key){var a;t.rr&&(oe.er("setting flag key ",n.feature_flag_key," to web experiment ",n),(a=t.rr)==null||a.set(n.feature_flag_key,n));var o=t._instance.getFeatureFlag(n.feature_flag_key);J(o)&&n.variants[o]&&t.sr(n.name,o,n.variants[o].transforms)}else if(n.variants)for(var c in n.variants){var u=n.variants[c];oe.nr(u)&&t.sr(n.name,c,u.transforms)}}))}),r)},this._instance=e,this._instance.onFeatureFlags((r=>{this.onFeatureFlags(r)}))}onFeatureFlags(e){if(this._is_bot())oe.er("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(B(this.rr))return this.rr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();oe.er("applying feature flags",e),e.forEach((t=>{var r;if(this.rr&&(r=this.rr)!=null&&r.has(t)){var s,n=this._instance.getFeatureFlag(t),a=(s=this.rr)==null?void 0:s.get(t);n&&a!=null&&a.variants[n]&&this.sr(a.name,n,a.variants[n].transforms)}}))}}previewWebExperiment(){var e=oe.getWindowLocation();if(e!=null&&e.search){var t=zr(e?.search,"__experiment_id"),r=zr(e?.search,"__experiment_variant");t&&r&&(oe.er("previewing web experiments "+t+" && "+r),this.getWebExperiments((s=>{this.ar(parseInt(t),r,s)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var s=this._instance.get_property("$web_experiments");if(s&&!t)return e(s);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:n=>{if(n.statusCode!==200||!n.json)return e([]);var a=n.json.experiments||[];return e(a)}})}ar(e,t,r){var s=r.filter((n=>n.id===e));s&&s.length>0&&(oe.er("Previewing web experiment ["+s[0].name+"] with variant ["+t+"]"),this.sr(s[0].name,t,s[0].variants[t].transforms))}static nr(e){return!B(e.conditions)&&oe.lr(e)&&oe.ur(e)}static lr(e){var t;if(B(e.conditions)||B((t=e.conditions)==null?void 0:t.url))return!0;var r,s,n,a=oe.getWindowLocation();return!!a&&((r=e.conditions)==null||!r.url||yd[(s=(n=e.conditions)==null?void 0:n.urlMatchType)!==null&&s!==void 0?s:"icontains"](e.conditions.url,a))}static getWindowLocation(){return m?.location}static ur(e){var t;if(B(e.conditions)||B((t=e.conditions)==null?void 0:t.utm))return!0;var r=Ka();if(r.utm_source){var s,n,a,o,c,u,d,h,v=(s=e.conditions)==null||(s=s.utm)==null||!s.utm_campaign||((n=e.conditions)==null||(n=n.utm)==null?void 0:n.utm_campaign)==r.utm_campaign,p=(a=e.conditions)==null||(a=a.utm)==null||!a.utm_source||((o=e.conditions)==null||(o=o.utm)==null?void 0:o.utm_source)==r.utm_source,f=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_medium||((u=e.conditions)==null||(u=u.utm)==null?void 0:u.utm_medium)==r.utm_medium,_=(d=e.conditions)==null||(d=d.utm)==null||!d.utm_term||((h=e.conditions)==null||(h=h.utm)==null?void 0:h.utm_term)==r.utm_term;return v&&f&&_&&p}return!1}static er(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];E.info("[WebExperiments] "+e,r)}sr(e,t,r){this._is_bot()?oe.er("Refusing to render web experiment since the viewer is a likely bot"):t!=="control"?r.forEach((s=>{if(s.selector){var n;oe.er("applying transform of variant "+t+" for experiment "+e+" ",s);var a=(n=document)==null?void 0:n.querySelectorAll(s.selector);a?.forEach((o=>{var c=o;s.html&&(c.innerHTML=s.html),s.css&&c.setAttribute("style",s.css)}))}})):oe.er("Control variants leave the page unmodified.")}_is_bot(){return _e&&this._instance?co(_e,this._instance.config.custom_blocked_useragents):void 0}}var bd=Z("[PostHog ExternalIntegrations]"),xd={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class wd{constructor(e){this._instance=e}it(e,t){var r;(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,(s=>{if(s)return bd.error("failed to load script",s);t()}))}startIfEnabledOrStop(){var e=this,t=function(a){var o,c,u;!s||(o=R.__PosthogExtensions__)!=null&&(o=o.integrations)!=null&&o[a]||e.it(xd[a],(()=>{var d;(d=R.__PosthogExtensions__)==null||(d=d.integrations)==null||(d=d[a])==null||d.start(e._instance)})),!s&&(c=R.__PosthogExtensions__)!=null&&(c=c.integrations)!=null&&c[a]&&((u=R.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[a])==null||u.stop())};for(var[r,s]of Object.entries((n=this._instance.config.integrations)!==null&&n!==void 0?n:{})){var n;t(r)}}}var ls="[SessionRecording]",zt=Z(ls);class Hn{get started(){var e;return!((e=this.hr)==null||!e.isStarted)}get status(){return this.hr?this.hr.status:this.dr&&!this.vr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.dr=!1,this.cr=void 0,this._instance=e,!this._instance.sessionManager)throw zt.error("started without valid sessionManager"),new Error(ls+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(ls+' cannot be used with cookieless_mode="always"')}get vr(){var e,t=!((e=this._instance.get_property(hi))==null||!e.enabled),r=!this._instance.config.disable_session_recording,s=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return m&&t&&r&&!s}startIfEnabledOrStop(e){var t;if(!this.vr||(t=this.hr)==null||!t.isStarted){var r=!w(Object.assign)&&!w(Array.from);this.vr&&r?(this.pr(e),zt.info("starting")):this.stopRecording()}}pr(e){var t,r,s;this.vr&&(R!=null&&(t=R.__PosthogExtensions__)!=null&&(t=t.rrweb)!=null&&t.record&&(r=R.__PosthogExtensions__)!=null&&r.initSessionRecording?this.gr(e):(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,this._r,(n=>{if(n)return zt.error("could not load recorder",n);this.gr(e)})))}stopRecording(){var e,t;(e=this.cr)==null||e.call(this),this.cr=void 0,(t=this.hr)==null||t.stop()}mr(){var e;(e=this._instance.persistence)==null||e.unregister(pa)}yr(e){if(this._instance.persistence){var t,r,s=this._instance.persistence,n=()=>{var a=e.sessionRecording===!1?void 0:e.sessionRecording,o=a?.sampleRate,c=B(o)?null:parseFloat(o);B(c)&&this.mr();var u=a?.minimumDurationMilliseconds;s.register({[hi]:j({enabled:!!a},a,{networkPayloadCapture:j({capturePerformance:e.capturePerformance},a?.networkPayloadCapture),canvasRecording:{enabled:a?.recordCanvas,fps:a?.canvasFps,quality:a?.canvasQuality},sampleRate:c,minimumDurationMilliseconds:w(u)?null:u,endpoint:a?.endpoint,triggerMatchType:a?.triggerMatchType,masking:a?.masking,urlTriggers:a?.urlTriggers})})};n(),(t=this.cr)==null||t.call(this),this.cr=(r=this._instance.sessionManager)==null?void 0:r.onSessionId(n)}}onRemoteConfig(e){"sessionRecording"in e?e.sessionRecording!==!1?(this.yr(e),this.dr=!0,this.startIfEnabledOrStop()):this.dr=!0:zt.info("skipping remote config with no sessionRecording",e)}log(e,t){var r;t===void 0&&(t="log"),(r=this.hr)!=null&&r.log?this.hr.log(e,t):zt.warn("log called before recorder was ready")}get _r(){var e,t,r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.get_property(hi);return(r==null||(t=r.scriptConfig)==null?void 0:t.script)||"lazy-recorder"}gr(e){var t,r;if((t=R.__PosthogExtensions__)==null||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.hr||(this.hr=(r=R.__PosthogExtensions__)==null?void 0:r.initSessionRecording(this._instance),this.hr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.hr.start(e)}onRRwebEmit(e){var t;(t=this.hr)==null||t.onRRwebEmit==null||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.hr||(t=this._instance.persistence)==null||t.register({$replay_override_linked_flag:!0}),(e=this.hr)==null||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.hr||(t=this._instance.persistence)==null||t.register({$replay_override_sampling:!0}),(e=this.hr)==null||e.overrideSampling()}overrideTrigger(e){var t,r;this.hr||(r=this._instance.persistence)==null||r.register({[e==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(t=this.hr)==null||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.hr)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var r;return!((r=this.hr)==null||!r.tryAddCustomEvent(e,t))}}var rr={},cs=()=>{},gt="posthog",uo=!Zu&&he?.indexOf("MSIE")===-1&&he?.indexOf("Mozilla")===-1,Bn=i=>{var e;return j({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:Gc(k?.location),persistence:"localStorage+cookie",persistence_name:"",loaded:cs,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:i??"unset",__preview_deferred_init_extensions:!1,debug:pe&&J(pe?.search)&&pe.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(m==null||(e=m.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var r="Bad HTTP status: "+t.statusCode+" "+t.text;E.error(r)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:os},error_tracking:{},_onCapture:cs,__preview_eager_load_replay:!1},(t=>({rageclick:!(t&&t>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(t&&t>="2025-05-24")||"history_change",session_recording:t&&t>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(i))},Un=i=>{var e={};w(i.process_person)||(e.person_profiles=i.process_person),w(i.xhr_headers)||(e.request_headers=i.xhr_headers),w(i.cookie_name)||(e.persistence_name=i.cookie_name),w(i.disable_cookie)||(e.disable_persistence=i.disable_cookie),w(i.store_google)||(e.save_campaign_params=i.store_google),w(i.verbose)||(e.debug=i.verbose);var t=K({},e,i);return H(i.property_blacklist)&&(w(i.property_denylist)?t.property_denylist=i.property_blacklist:H(i.property_denylist)?t.property_denylist=[...i.property_blacklist,...i.property_denylist]:E.error("Invalid value for property_denylist config: "+i.property_denylist)),t};class kd{constructor(){this.__forceAllowLocalhost=!1}get br(){return this.__forceAllowLocalhost}set br(e){E.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Qr{get decideEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new kd,this.wr=!1,this.version=Ae.LIB_VERSION,this.Sr=new js,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Bn(),this.SentryIntegration=xu,this.sentryIntegration=e=>(function(t,r){var s=Ra(t,r);return{name:Na,processEvent:n=>s(n)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Er=!1,this.$r=null,this.kr=null,this.Pr=null,this.featureFlags=new rd(this),this.toolbar=new ku(this),this.scrollManager=new fd(this),this.pageViewManager=new qu(this),this.surveys=new ld(this),this.experiments=new oe(this),this.exceptions=new Qu(this),this.rateLimiter=new cd(this),this.requestRouter=new _d(this),this.consent=new gu(this),this.externalIntegrations=new wd(this),this.people={set:(e,t,r)=>{var s=J(e)?{[e]:t}:e;this.setPersonProperties(s),r?.({})},set_once:(e,t,r)=>{var s=J(e)?{[e]:t}:e;this.setPersonProperties(void 0,s),r?.({})}},this.on("eventCaptured",(e=>E.info('send "'+e?.event+'"',e)))}init(e,t,r){if(r&&r!==gt){var s,n=(s=rr[r])!==null&&s!==void 0?s:new Qr;return n._init(e,t,r),rr[r]=n,rr[gt][r]=n,n}return this._init(e,t,r)}_init(e,t,r){var s;if(t===void 0&&(t={}),w(e)||Bi(e))return E.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Tr(t.debug),this.Ir=t,this.Rr=[],t.person_profiles&&(this.kr=t.person_profiles),this.set_config(K({},Bn(t.defaults),Un(t),{name:r,token:e})),this.config.on_xhr_error&&E.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:De.GZipJS;var n=this.Fr();this.persistence=new ki(this.config,n),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ki(j({},this.config,{persistence:"sessionStorage"}),n);var a=j({},this.persistence.props),o=j({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Cr=new dd((C=>this.Mr(C)),this.config.request_queue_config),this.Or=new pd(this),this.__request_queue=[];var c=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(c||(this.sessionManager=new Ln(this),this.sessionPropsManager=new Mn(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(E.info("Deferring extension initialization to improve startup performance"),setTimeout((()=>{this.Ar(c)}),0)):(E.info("Initializing extensions synchronously"),this.Ar(c)),Ae.DEBUG=Ae.DEBUG||this.config.debug,Ae.DEBUG&&E.info("Starting in debug mode",{this:this,config:t,thisC:j({},this.config),p:a,s:o}),((s=t.bootstrap)==null?void 0:s.distinctID)!==void 0){var u,d,h=this.config.get_device_id(We()),v=(u=t.bootstrap)!=null&&u.isIdentifiedID?h:t.bootstrap.distinctID;this.persistence.set_property(Te,(d=t.bootstrap)!=null&&d.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:v})}if(this.Dr()){var p,f,_=Object.keys(((p=t.bootstrap)==null?void 0:p.featureFlags)||{}).filter((C=>{var x;return!((x=t.bootstrap)==null||(x=x.featureFlags)==null||!x[C])})).reduce(((C,x)=>{var P;return C[x]=((P=t.bootstrap)==null||(P=P.featureFlags)==null?void 0:P[x])||!1,C}),{}),y=Object.keys(((f=t.bootstrap)==null?void 0:f.featureFlagPayloads)||{}).filter((C=>_[C])).reduce(((C,x)=>{var P,L;return(P=t.bootstrap)!=null&&(P=P.featureFlagPayloads)!=null&&P[x]&&(C[x]=(L=t.bootstrap)==null||(L=L.featureFlagPayloads)==null?void 0:L[x]),C}),{});this.featureFlags.receivedFeatureFlags({featureFlags:_,featureFlagPayloads:y})}if(c)this.register_once({distinct_id:Tt,$device_id:null},"");else if(!this.get_distinct_id()){var S=this.config.get_device_id(We());this.register_once({distinct_id:S,$device_id:S},""),this.persistence.set_property(Te,"anonymous")}return Y(m,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?bu(this,(()=>this.jr())):this.jr(),Ke(this.config._onCapture)&&this.config._onCapture!==cs&&(E.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(C=>this.config._onCapture(C.event,C)))),this.config.ip&&E.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ar(e){var t=performance.now();this.historyAutocapture=new yu(this),this.historyAutocapture.startIfEnabled();var r=[];r.push((()=>{new Su(this).startIfEnabledOrStop()})),r.push((()=>{var s;this.siteApps=new md(this),(s=this.siteApps)==null||s.init()})),e||r.push((()=>{this.sessionRecording=new Hn(this),this.sessionRecording.startIfEnabledOrStop()})),this.config.disable_scroll_properties||r.push((()=>{this.scrollManager.startMeasuringScrollPosition()})),r.push((()=>{this.autocapture=new au(this),this.autocapture.startIfEnabled()})),r.push((()=>{this.surveys.loadIfEnabled()})),r.push((()=>{this.heatmaps=new Uu(this),this.heatmaps.startIfEnabled()})),r.push((()=>{this.webVitalsAutocapture=new Hu(this)})),r.push((()=>{this.exceptionObserver=new _u(this),this.exceptionObserver.startIfEnabled()})),r.push((()=>{this.deadClicksAutocapture=new $a(this,mu),this.deadClicksAutocapture.startIfEnabled()})),r.push((()=>{if(this.Lr){var s=this.Lr;this.Lr=void 0,this.fi(s)}})),this.Nr(r,t)}Nr(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout((()=>{this.Nr(e,t)}),0);var r=e.shift();if(r)try{r()}catch(n){E.error("Error initializing extension:",n)}}var s=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:s}),this.config.__preview_deferred_init_extensions&&E.info("PostHog extensions initialized ("+s+"ms)")}fi(e){var t,r,s,n,a,o,c,u;if(!k||!k.body)return E.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.fi(e)}),500);this.config.__preview_deferred_init_extensions&&(this.Lr=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=T(e.supportedCompression,De.GZipJS)?De.GZipJS:T(e.supportedCompression,De.Base64)?De.Base64:void 0),(t=e.analytics)!=null&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.kr?this.kr:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(s=this.sessionRecording)==null||s.onRemoteConfig(e),(n=this.autocapture)==null||n.onRemoteConfig(e),(a=this.heatmaps)==null||a.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(o=this.webVitalsAutocapture)==null||o.onRemoteConfig(e),(c=this.exceptionObserver)==null||c.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(e)}jr(){try{this.config.loaded(this)}catch(e){E.critical("`loaded` function failed",e)}this.Ur(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.zr()}),1),new ud(this).load(),this.featureFlags.flags()}Ur(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.Cr)==null||e.enable())}_dom_loaded(){this.is_capturing()&&Je(this.__request_queue,(e=>this.Mr(e))),this.__request_queue=[],this.Ur()}_handle_unload(){var e,t;this.config.request_batching?(this.Hr()&&this.capture("$pageleave"),(e=this.Cr)==null||e.unload(),(t=this.Or)==null||t.unload()):this.Hr()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(e){this.__loaded&&(uo?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Kr(e.url,{ip:this.config.ip?1:0}),e.headers=j({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(t=>{var r,s,n,a=j({},t);a.timeout=a.timeout||6e4,a.url=Kr(a.url,{_:new Date().getTime().toString(),ver:Ae.LIB_VERSION,compression:a.compression});var o=(r=a.transport)!==null&&r!==void 0?r:"fetch",c=Or.filter((d=>!a.disableTransport||!d.transport||!a.disableTransport.includes(d.transport))),u=(s=(n=ua(c,(d=>d.transport===o)))==null?void 0:n.method)!==null&&s!==void 0?s:c[0].method;if(!u)throw new Error("No available transport method");u(a)})(j({},e,{callback:t=>{var r,s;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&((r=(s=this.config).on_request_error)==null||r.call(s,t)),e.callback==null||e.callback(t)}}))))}Mr(e){this.Or?this.Or.retriableRequest(e):this.ci(e)}_execute_array(e){var t,r=[],s=[],n=[];Je(e,(o=>{o&&(t=o[0],H(t)?n.push(o):Ke(o)?o.call(this):H(o)&&t==="alias"?r.push(o):H(o)&&t.indexOf("capture")!==-1&&Ke(this[t])?n.push(o):s.push(o))}));var a=function(o,c){Je(o,(function(u){if(H(u[0])){var d=c;U(u,(function(h){d=d[h[0]].apply(d,h.slice(1))}))}else this[u[0]].apply(this,u.slice(1))}),c)};a(r,this),a(s,this),a(n,this)}Dr(){var e,t;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((t=this.config.bootstrap)==null?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,r){var s;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Cr){if(this.is_capturing())if(!w(e)&&J(e)){var n=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(n&&!this.config.__preview_capture_bot_pageviews)){var a=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(a==null||!a.isRateLimited){t!=null&&t.$current_url&&!J(t?.$current_url)&&(E.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),t==null||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,c=r?.timestamp||o,u=We(),d={uuid:u,event:e,properties:this.calculateEventProperties(e,t||{},c,u)};e==="$pageview"&&this.config.__preview_capture_bot_pageviews&&n&&(d.event="$bot_pageview",d.properties.$browser_type="bot"),a&&(d.properties.$lib_rate_limit_remaining_tokens=a.remainingTokens),r?.$set&&(d.$set=r?.$set);var h,v=this.Br(r?.$set_once);if(v&&(d.$set_once=v),(d=qc(d,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=c,w(r?.timestamp)||(d.properties.$event_time_override_provided=!0,d.properties.$event_time_override_system_time=o),e===Ir.DISMISSED||e===Ir.SENT){var p=t?.[In.SURVEY_ID],f=t?.[In.SURVEY_ITERATION];h={id:p,current_iteration:f},localStorage.getItem(An(h))||localStorage.setItem(An(h),"true"),d.$set=j({},d.$set,{[sd({id:p,current_iteration:f},e===Ir.SENT?"responded":"dismissed")]:!0})}var _=j({},d.properties.$set,d.$set);if(yt(_)||this.setPersonPropertiesForFlags(_),!B(this.config.before_send)){var y=this.qr(d);if(!y)return;d=y}this.Sr.emit("eventCaptured",d);var S={method:"POST",url:(s=r?._url)!==null&&s!==void 0?s:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:d,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Mr(S):this.Cr.enqueue(S),d}E.critical("This capture call is ignored due to client rate limiting.")}}else E.error("No event name provided to posthog.capture")}else E.uninitializedWarning("posthog.capture")}Ai(e){return this.on("eventCaptured",(t=>e(t.event,t)))}calculateEventProperties(e,t,r,s,n){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var a=n?void 0:this.persistence.remove_event_timer(e),o=j({},t);if(o.token=this.config.token,o.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(o.$cookieless_mode=!0),e==="$snapshot"){var c=j({},this.persistence.properties(),this.sessionPersistence.properties());return o.distinct_id=c.distinct_id,(!J(o.distinct_id)&&!Fe(o.distinct_id)||Bi(o.distinct_id))&&E.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var u,d=Du(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:h,windowId:v}=this.sessionManager.checkAndGetSessionAndWindowId(n,r.getTime());o.$session_id=h,o.$window_id=v}this.sessionPropsManager&&K(o,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&K(o,this.sessionRecording.sdkDebugProperties),o.$sdk_debug_retry_queue_size=(p=this.Or)==null?void 0:p.length}catch(S){o.$sdk_debug_error_capturing_properties=String(S)}if(this.requestRouter.region===er.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),u=e!=="$pageview"||n?e!=="$pageleave"||n?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,s),o=K(o,u),e==="$pageview"&&k&&(o.title=k.title),!w(a)){var f=r.getTime()-a;o.$duration=parseFloat((f/1e3).toFixed(3))}he&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=K({},d,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),H(this.config.property_denylist)?U(this.config.property_denylist,(function(S){delete o[S]})):E.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var _=this.config.sanitize_properties;_&&(E.error("sanitize_properties is deprecated. Use before_send instead"),o=_(o,e));var y=this.Wr();return o.$process_person_profile=y,y&&!n&&this.Gr("_calculate_event_properties"),o}Br(e){var t;if(!this.persistence||!this.Wr()||this.wr)return e;var r=this.persistence.get_initial_props(),s=(t=this.sessionPropsManager)==null?void 0:t.getSetOnceProps(),n=K({},r,s||{},e||{}),a=this.config.sanitize_properties;return a&&(E.error("sanitize_properties is deprecated. Use before_send instead"),n=a(n,"$set_once")),this.wr=!0,yt(n)?void 0:n}register(e,t){var r;(r=this.persistence)==null||r.register(e,t)}register_once(e,t,r){var s;(s=this.persistence)==null||s.register_once(e,t,r)}register_for_session(e){var t;(t=this.sessionPersistence)==null||t.register(e)}unregister(e){var t;(t=this.persistence)==null||t.unregister(e)}unregister_for_session(e){var t;(t=this.sessionPersistence)==null||t.unregister(e)}Vr(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,r)}getEarlyAccessFeatures(e,t,r){return t===void 0&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,r)}on(e,t){return this.Sr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,r;return(t=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&t!==void 0?t:()=>{}}getSurveys(e,t){t===void 0&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){t===void 0&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){t===void 0&&(t=ad),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return t===void 0&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,r){if(!this.__loaded||!this.persistence)return E.uninitializedWarning("posthog.identify");if(Fe(e)&&(e=e.toString(),E.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))E.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Tt){if(this.Gr("posthog.identify")){var s=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var n=s;this.register_once({$had_persisted_distinct_id:!0,$device_id:n},"")}e!==s&&e!==this.get_property(Kt)&&(this.unregister(Kt),this.register({distinct_id:e}));var a=(this.persistence.get_property(Te)||"anonymous")==="anonymous";e!==s&&a?(this.persistence.set_property(Te,"identified"),this.setPersonPropertiesForFlags(j({},r||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:s},{$set:t||{},$set_once:r||{}}),this.Pr=Nn(e,t,r),this.featureFlags.setAnonymousDistinctId(s)):(t||r)&&this.setPersonProperties(t,r),e!==s&&(this.reloadFeatureFlags(),this.unregister(Dr))}}else E.critical('The string "'+Tt+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else E.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Gr("posthog.setPersonProperties")){var r=Nn(this.get_distinct_id(),e,t);this.Pr!==r?(this.setPersonPropertiesForFlags(j({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Pr=r):E.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,r){if(e&&t){if(this.Gr("posthog.group")){var s=this.getGroups();s[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:j({},s,{[e]:t})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),s[e]===t||r||this.reloadFeatureFlags()}}else E.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0),this.Gr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,r,s,n;if(E.info("reset"),!this.__loaded)return E.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),(t=this.persistence)==null||t.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(s=this.persistence)==null||s.set_property(Te,"anonymous"),(n=this.sessionManager)==null||n.resetSessionId(),this.Pr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Tt,$device_id:null},"");else{var o=this.config.get_device_id(We());this.register_once({distinct_id:o,$device_id:e?o:a},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return(e=(t=this.sessionManager)==null?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),s=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(e!=null&&e.withTimestamp&&r){var n,a=(n=e.timestampLookBack)!==null&&n!==void 0?n:10;if(!r)return s;s+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-a,0)}return s}alias(e,t){return e===this.get_property(da)?(E.critical("Attempting to create alias for existing People user - aborting."),-2):this.Gr("posthog.alias")?(w(t)&&(t=this.get_distinct_id()),e!==t?(this.Vr(Kt,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(E.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=j({},this.config);if(ie(e)){var r,s,n,a,o;K(this.config,Un(e));var c=this.Fr();(r=this.persistence)==null||r.update_config(this.config,t,c),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ki(j({},this.config,{persistence:"sessionStorage"}),c);var u=this.Tr(this.config.debug);Ye(u)&&(this.config.debug=u),Ye(this.config.debug)&&(this.config.debug?(Ae.DEBUG=!0,G.H()&&G.G("ph_debug","true"),E.info("set_config",{config:e,oldConfig:t,newConfig:j({},this.config)})):(Ae.DEBUG=!1,G.H()&&G.V("ph_debug"))),(s=this.sessionRecording)==null||s.startIfEnabledOrStop(),(n=this.autocapture)==null||n.startIfEnabled(),(a=this.heatmaps)==null||a.startIfEnabled(),this.surveys.loadIfEnabled(),this.Jr(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop()}}startSessionRecording(e){var t=e===!0,r={sampling:t||!(e==null||!e.sampling),linked_flag:t||!(e==null||!e.linked_flag),url_trigger:t||!(e==null||!e.url_trigger),event_trigger:t||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var s,n,a,o,c;(s=this.sessionManager)==null||s.checkAndGetSessionAndWindowId(),r.sampling&&((n=this.sessionRecording)==null||n.overrideSampling()),r.linked_flag&&((a=this.sessionRecording)==null||a.overrideLinkedFlag()),r.url_trigger&&((o=this.sessionRecording)==null||o.overrideTrigger("url")),r.event_trigger&&((c=this.sessionRecording)==null||c.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,t){var r=new Error("PostHog syntheticException"),s=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(j({},s,t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return(t=this.persistence)==null?void 0:t.props[e]}getSessionProperty(e){var t;return(t=this.sessionPersistence)==null?void 0:t.props[e]}toString(){var e,t=(e=this.config.name)!==null&&e!==void 0?e:gt;return t!==gt&&(t=gt+"."+t),t}_isIdentified(){var e,t;return((e=this.persistence)==null?void 0:e.get_property(Te))==="identified"||((t=this.sessionPersistence)==null?void 0:t.get_property(Te))==="identified"}Wr(){var e,t;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&yt(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Kt])&&((t=this.persistence)==null||(t=t.props)==null||!t[Br]))}Hr(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Wr()||this.Gr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Gr(e){return this.config.person_profiles==="never"?(E.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Vr(Br,!0),!0)}Fr(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!t}Jr(){var e,t,r,s,n=this.Fr();return((e=this.persistence)==null?void 0:e.wi)!==n&&((r=this.persistence)==null||r.set_disabled(n)),((t=this.sessionPersistence)==null?void 0:t.wi)!==n&&((s=this.sessionPersistence)==null||s.set_disabled(n)),n}opt_in_capturing(e){if(this.config.cookieless_mode!=="always"){var t,r;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(t=this.sessionManager)==null||t.destroy(),this.sessionManager=new Ln(this),this.persistence&&(this.sessionPropsManager=new Mn(this,this.sessionManager,this.persistence)),this.sessionRecording=new Hn(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Jr(),this.Ur(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(w(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((r=e?.captureEventName)!==null&&r!==void 0?r:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.zr()}else E.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Jr(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Tt,$device_id:null}),(e=this.sessionManager)==null||e.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(t=this.sessionRecording)==null||t.stopRecording(),this.sessionRecording=void 0,this.zr())):E.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===Me.GRANTED?"granted":e===Me.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Jr()}_is_bot(){return _e?co(_e,this.config.custom_blocked_useragents):void 0}zr(){k&&(k.visibilityState==="visible"?this.Er||(this.Er=!0,this.capture("$pageview",{title:k.title},{send_instantly:!0}),this.$r&&(k.removeEventListener("visibilitychange",this.$r),this.$r=null)):this.$r||(this.$r=this.zr.bind(this),Y(k,"visibilitychange",this.$r)))}debug(e){e===!1?(m?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(m?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,r,s,n,a,o,c=this.Ir||{};return"advanced_disable_flags"in c?!!c.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(E.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",s=!1,n=E,a=(t="advanced_disable_flags")in(e=c)&&!w(e[t]),o=r in e&&!w(e[r]),a?e[t]:o?(n&&n.warn("Config field '"+r+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[r]):s)}qr(e){if(B(this.config.before_send))return e;var t=H(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var s of t){if(r=s(r),B(r)){var n="Event '"+e.event+"' was rejected in beforeSend function";return vc(e.event)?E.warn(n+". This can cause unexpected behavior."):E.info(n),null}r.properties&&!yt(r.properties)||E.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.Vt)==null?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(r)})}Tr(e){var t=Ye(e)&&!e,r=G.H()&&G.q("ph_debug")==="true";return!t&&(!!r||e)}}(function(i,e){for(var t=0;t<e.length;t++)i.prototype[e[t]]=Uc(i.prototype[e[t]])})(Qr,["identify"]);var qn,vt=(qn=rr[gt]=new Qr,(function(){function i(){i.done||(i.done=!0,uo=!1,U(rr,(function(e){e._dom_loaded()})))}k!=null&&k.addEventListener?k.readyState==="complete"?i():Y(k,"DOMContentLoaded",i,{capture:!1}):m&&E.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),qn),ho=g.createContext({client:vt,bootstrap:void 0});function po(i,e,t){if(t===void 0&&(t=new WeakMap),i===e)return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;if(t.has(i)&&t.get(i)===e)return!0;t.set(i,e);var r=Object.keys(i),s=Object.keys(e);if(r.length!==s.length)return!1;for(var n=0,a=r;n<a.length;n++){var o=a[n];if(!s.includes(o)||!po(i[o],e[o],t))return!1}return!0}function Ed(i){var e,t,r=i.children,s=i.client,n=i.apiKey,a=i.options,o=g.useRef(null),c=g.useMemo(function(){return s?(n&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),a&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),s):(n||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),vt)},[s,n,JSON.stringify(a)]);return g.useEffect(function(){if(!s){var u=o.current;u?(n!==u.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),a&&!po(a,u.options)&&vt.set_config(a),o.current={apiKey:n,options:a??{}}):(vt.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),vt.init(n,a),o.current={apiKey:n,options:a??{}})}},[s,n,JSON.stringify(a)]),ft.createElement(ho.Provider,{value:{client:c,bootstrap:(e=a?.bootstrap)!==null&&e!==void 0?e:(t=s?.config)===null||t===void 0?void 0:t.bootstrap}},r)}var ji=function(i){return typeof i=="function"},us=function(i,e){return us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},us(i,e)};function Sd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");us(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var jd={componentStack:null,exceptionEvent:null,error:null},Cd={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(i){Sd(e,i);function e(t){var r=i.call(this,t)||this;return r.state=jd,r}return e.prototype.componentDidCatch=function(t,r){var s=this.props.additionalProperties,n;ji(s)?n=s(t):typeof s=="object"&&(n=s);var a=this.context.client,o=a.captureException(t,n),c=r.componentStack;this.setState({error:t,componentStack:c,exceptionEvent:o})},e.prototype.render=function(){var t=this.props,r=t.children,s=t.fallback,n=this.state;if(n.componentStack==null)return ji(r)?r():r;var a=ji(s)?ft.createElement(s,{error:n.error,componentStack:n.componentStack,exceptionEvent:n.exceptionEvent}):s;return ft.isValidElement(a)?a:(console.warn(Cd.INVALID_FALLBACK),ft.createElement(ft.Fragment,null))},e.contextType=ho,e})(ft.Component);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],$d=ke("gamepad-2",Pd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Rd=ke("gauge",Nd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Od=ke("git-branch",Fd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ad=ke("house",Id);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fo=ke("info",Td);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ld=ke("moon",Md);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hd=ke("octagon-x",Dd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Ud=ke("panel-left",Bd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cs=ke("search",qd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M6.376 18.91a6 6 0 0 1 11.249.003",key:"hnjrf2"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}]],Gd=ke("shield-user",zd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],go=ke("shield",Vd);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Kd=ke("sun",Wd);function Yd(i){const e=Jd(i),t=g.forwardRef((r,s)=>{const{children:n,...a}=r,o=g.Children.toArray(n),c=o.find(Zd);if(c){const u=c.props.children,d=o.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...a,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...a,ref:s,children:n})});return t.displayName=`${i}.Slot`,t}function Jd(i){const e=g.forwardRef((t,r)=>{const{children:s,...n}=t;if(g.isValidElement(s)){const a=eh(s),o=Qd(n,s.props);return s.type!==g.Fragment&&(o.ref=r?lt(r,a):a),g.cloneElement(s,o)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var Xd=Symbol("radix.slottable");function Zd(i){return g.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===Xd}function Qd(i,e){const t={...e};for(const r in e){const s=i[r],n=e[r];/^on[A-Z]/.test(r)?s&&n?t[r]=(...o)=>{const c=n(...o);return s(...o),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...n}:r==="className"&&(t[r]=[s,n].filter(Boolean).join(" "))}return{...i,...t}}function eh(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var th=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ps=th.reduce((i,e)=>{const t=Yd(`Primitive.${e}`),r=g.forwardRef((s,n)=>{const{asChild:a,...o}=s,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${e}`,{...i,[e]:r}},{}),ei="Collapsible",[rh]=Jn(ei),[ih,$s]=rh(ei),vo=g.forwardRef((i,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:s,disabled:n,onOpenChange:a,...o}=i,[c,u]=Yn({prop:r,defaultProp:s??!1,onChange:a,caller:ei});return l.jsx(ih,{scope:t,disabled:n,contentId:ot(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:l.jsx(Ps.div,{"data-state":Rs(c),"data-disabled":n?"":void 0,...o,ref:e})})});vo.displayName=ei;var mo="CollapsibleTrigger",_o=g.forwardRef((i,e)=>{const{__scopeCollapsible:t,...r}=i,s=$s(mo,t);return l.jsx(Ps.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Rs(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Xn(i.onClick,s.onOpenToggle)})});_o.displayName=mo;var Ns="CollapsibleContent",yo=g.forwardRef((i,e)=>{const{forceMount:t,...r}=i,s=$s(Ns,i.__scopeCollapsible);return l.jsx(dl,{present:t||s.open,children:({present:n})=>l.jsx(sh,{...r,ref:e,present:n})})});yo.displayName=Ns;var sh=g.forwardRef((i,e)=>{const{__scopeCollapsible:t,present:r,children:s,...n}=i,a=$s(Ns,t),[o,c]=g.useState(r),u=g.useRef(null),d=gs(e,u),h=g.useRef(0),v=h.current,p=g.useRef(0),f=p.current,_=a.open||o,y=g.useRef(_),S=g.useRef(void 0);return g.useEffect(()=>{const C=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(C)},[]),hl(()=>{const C=u.current;if(C){S.current=S.current||{transitionDuration:C.style.transitionDuration,animationName:C.style.animationName},C.style.transitionDuration="0s",C.style.animationName="none";const x=C.getBoundingClientRect();h.current=x.height,p.current=x.width,y.current||(C.style.transitionDuration=S.current.transitionDuration,C.style.animationName=S.current.animationName),c(r)}},[a.open,r]),l.jsx(Ps.div,{"data-state":Rs(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!_,...n,ref:d,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...i.style},children:_&&s})});function Rs(i){return i?"open":"closed"}var nh=vo;function ah({...i}){return l.jsx(nh,{"data-slot":"collapsible",...i})}function oh({...i}){return l.jsx(_o,{"data-slot":"collapsible-trigger",...i})}function lh({...i}){return l.jsx(yo,{"data-slot":"collapsible-content",className:X("overflow-hidden data-[state=open]:animate-collapsible-down data-[state=closed]:animate-collapsible-up",i.className),...i})}const ch=({title:i,titleId:e,...t},r)=>l.jsxs("svg",{viewBox:"0 0 576 512",width:"1.36em",height:"1.2em",ref:r,"aria-labelledby":e,...t,children:[i?l.jsx("title",{id:e,children:i}):null,l.jsx("path",{fill:"currentColor",d:"M492.5 69.8c-.2-.3-.4-.6-.8-.7c-38.1-17.5-78.4-30-119.7-37.1c-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6c-44.6-6.8-89.9-6.8-134.4 0c-4.5-10.5-9.5-20.7-15.1-30.6c-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2c.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8c.1-.2.2-.5.2-.8s0-.5-.1-.8s-.2-.5-.4-.6s-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9c-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9s0-.6.2-.9s.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1c.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0c.3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2c.2.2.4.4.6.7s.2.6.2.9s-.1.6-.3.9s-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8c-.2.1-.5.2-.7.4s-.3.4-.4.7s-.1.5-.1.8s.1.5.2.8c8.8 17 18.8 33.3 30 48.8c.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2c.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2c0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2c0 32.7-23.2 59.2-52.8 59.2"})]}),uh=g.forwardRef(ch),bo=[{label:"Home",href:"/",icon:Ad,experimental:!1,kbd:"  H"},{label:"Tools",icon:vl,experimental:!1,children:gl.map(i=>({label:i.label,href:`/tools/${i.id}`,experimental:!1,icon:i.icon}))},{label:"Gmaes",icon:$d,experimental:!0,children:[{label:"All Gmaes",href:"/g",kbd:"  G"},...fl.map(i=>({label:i.name,href:`/g/${i.id}`}))]},{label:"Backups",href:"/backups",icon:bl,experimental:!0},{label:"Admin",href:"/admin",icon:go,requiresAdmin:!0},{label:"Discord",href:"https://discord.gg/AFec9wNar8",icon:uh,experimental:!0,newTab:!0},{label:"About",href:"/about",icon:El,experimental:!0},{label:"Privacy",href:"/privacy",icon:Gd,experimental:!0}];function Le({className:i,...e}){return l.jsx("kbd",{"data-slot":"kbd",className:X("bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium select-none","[&_svg:not([class*='size-'])]:size-3","[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10",i),...e})}function ir({className:i,...e}){return l.jsx("kbd",{"data-slot":"kbd-group",className:X("inline-flex items-center gap-1",i),...e})}const Yr={default:{name:"Default",dark:!0,light:!0},terminal:{name:"Terminal",dark:!0,light:!1},catppuccin:{name:"Catppuccin",dark:!0,light:!0},"better-catppuccin":{name:"Better Catppuccin",dark:!0,light:!0},mono:{name:"Mono",dark:!0,light:!0},noeco:{name:"Noe Co.",dark:!0,light:!1},"ingo-au":{name:"ingo.au",dark:!0,light:!1}};function dh({children:i,isValidProp:e,...t}){e&&wl(e),t={...g.useContext(Bs),...t},t.isStatic=xl(()=>t.isStatic);const r=g.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return l.jsx(Bs.Provider,{value:r,children:i})}function hh(){const i=Kn(),e=V(u=>u.setSearchOpen),t=zo(),r=je(u=>u.enabled),s=$l(kl.auth.getCurrentUser),n=W(u=>u.disableAllBlur),a=u=>l.jsxs(l.Fragment,{children:[u.icon&&l.jsx(u.icon,{}),l.jsx("span",{children:u.label}),u.kbd&&l.jsx(ir,{className:"ml-auto",children:u.kbd.split(" ").map(d=>l.jsx(Le,{children:d},d))}),u.children&&u.children.length>0&&l.jsx(Fl,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),o=s?.role==="admin",c=bo.filter(u=>!(u.experimental&&!r)&&!(u.requiresAdmin&&!o));return r?l.jsxs(Qo,{variant:"inset",className:pl("p-0 duration-200 transition-all ease-out",!i.open&&!n&&"blur-lg opacity-0"),children:[l.jsx(el,{children:l.jsxs(ni,{children:[l.jsx(Nt,{children:l.jsx(Rt,{size:"lg",asChild:!0,children:l.jsxs(at,{to:"/",children:[l.jsx("div",{className:"text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg",children:l.jsx("img",{src:"/edutools-black.svg",className:"dark:invert size-6",alt:""})}),l.jsx("div",{className:"flex flex-col gap-0.5 leading-none",children:l.jsx("span",{className:"font-medium",children:"EduTools"})})]})})}),l.jsx(Nt,{children:l.jsxs(Rt,{onClick:()=>e(!0),className:"border cursor-text",children:[l.jsx(Cs,{className:"size-4"}),"Search",l.jsxs(ir,{className:"ml-auto",children:[l.jsx(Le,{className:"text-nowrap",children:""}),l.jsx(Le,{className:"text-nowrap",children:"K"})]})]})})]})}),l.jsx(tl,{children:l.jsx(rl,{children:l.jsx(il,{children:l.jsx(ni,{children:l.jsx(Zn,{mode:"popLayout",initial:!1,children:c.map(u=>{const d=(h,v=!1)=>{const p=a(h);if(h.href){const f=v?Rt:Rt;return l.jsx(f,{isActive:h.href==t.pathname,asChild:!0,children:l.jsx(at,{to:h.href,target:h.newTab?"_blank":"_self",children:p})})}return l.jsx(Rt,{children:p})};return u.children&&u.children.length>0?l.jsx(Ar.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:Fi},layout:!0,children:l.jsx(ah,{className:"group/collapsible",defaultOpen:u.children.some(h=>h.href==t.pathname),children:l.jsxs(Nt,{children:[l.jsx(oh,{className:"sticky top-0 z-10 bg-sidebar/50 backdrop-blur-2xl",asChild:!0,children:d(u)}),l.jsx(lh,{children:l.jsx(sl,{children:u.children.map(h=>l.jsx(nl,{children:d(h,!0)},h.label))})})]})})},u.label):l.jsx(Ar.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:Fi},layout:!0,children:l.jsx(Nt,{children:d(u)})},u.label)})})})})})}),l.jsx(al,{children:l.jsx(ni,{children:l.jsx(Nt,{children:l.jsxs("div",{className:"p-4 flex flex-col border rounded-lg text-sm gap-2 opacity-25 hover:opacity-100 duration-200 bg-muted",children:[l.jsxs(at,{to:"https://github.com/EducationalTools/src",target:"_blank",className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(ml,{}),"EducationalTools/src"]}),l.jsxs("div",{className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(Od,{}),"prod"]}),l.jsxs("div",{className:"flex flex-row gap-2 [&_svg:not([class*='size-'])]:size-4 items-center",children:[l.jsx(_l,{}),"Built on"," ",new Date(1765340400445).toLocaleString()]})]})})})}),l.jsx(ol,{className:"z-50"})]}):null}const xo=["shift","alt","meta","mod","ctrl","control"],ph={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Ze(i){return(ph[i.trim()]||i.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function wo(i){return xo.includes(i)}function Ci(i,e=","){return i.toLowerCase().split(e)}function Pi(i,e="+",t=">",r=!1,s){let n=[],a=!1;i=i.trim(),i.includes(t)?(a=!0,n=i.toLocaleLowerCase().split(t).map(u=>Ze(u))):n=i.toLocaleLowerCase().split(e).map(u=>Ze(u));const o={alt:n.includes("alt"),ctrl:n.includes("ctrl")||n.includes("control"),shift:n.includes("shift"),meta:n.includes("meta"),mod:n.includes("mod"),useKey:r},c=n.filter(u=>!xo.includes(u));return{...o,keys:c,description:s,isSequence:a,hotkey:i}}typeof document<"u"&&(document.addEventListener("keydown",i=>{i.code!==void 0&&ko([Ze(i.code)])}),document.addEventListener("keyup",i=>{i.code!==void 0&&Eo([Ze(i.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{He.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{He.clear()},0)}));const He=new Set;function Fs(i){return Array.isArray(i)}function fh(i,e=","){return(Fs(i)?i:i.split(e)).every(t=>He.has(t.trim().toLowerCase()))}function ko(i){const e=Array.isArray(i)?i:[i];He.has("meta")&&He.forEach(t=>!wo(t)&&He.delete(t.toLowerCase())),e.forEach(t=>He.add(t.toLowerCase()))}function Eo(i){const e=Array.isArray(i)?i:[i];i==="meta"?He.clear():e.forEach(t=>He.delete(t.toLowerCase()))}function gh(i,e,t){(typeof t=="function"&&t(i,e)||t===!0)&&i.preventDefault()}function vh(i,e,t){return typeof t=="function"?t(i,e):t===!0||t===void 0}const mh=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function _h(i){return So(i,mh)}function So(i,e=!1){const{target:t,composed:r}=i;let s,n;return yh(t)&&r?(s=i.composedPath()[0]&&i.composedPath()[0].tagName,n=i.composedPath()[0]&&i.composedPath()[0].role):(s=t&&t.tagName,n=t&&t.role),Fs(e)?!!(s&&e&&e.some(a=>a.toLowerCase()===s.toLowerCase()||a===n)):!!(s&&e&&e)}function yh(i){return!!i.tagName&&!i.tagName.startsWith("-")&&i.tagName.includes("-")}function bh(i,e){return i.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?i.some(t=>e.includes(t))||i.includes("*"):!0}const xh=(i,e,t=!1)=>{const{alt:r,meta:s,mod:n,shift:a,ctrl:o,keys:c,useKey:u}=e,{code:d,key:h,ctrlKey:v,metaKey:p,shiftKey:f,altKey:_}=i,y=Ze(d);if(u&&c?.length===1&&c.includes(h))return!0;if(!c?.includes(y)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(y))return!1;if(!t){if(r!==_&&y!=="alt"||a!==f&&y!=="shift")return!1;if(n){if(!p&&!v)return!1}else if(s!==p&&y!=="meta"&&y!=="os"||o!==v&&y!=="ctrl"&&y!=="control")return!1}return c&&c.length===1&&c.includes(y)?!0:c?fh(c):!c},wh=g.createContext(void 0),kh=()=>g.useContext(wh);function jo(i,e){return i&&e&&typeof i=="object"&&typeof e=="object"?Object.keys(i).length===Object.keys(e).length&&Object.keys(i).reduce((t,r)=>t&&jo(i[r],e[r]),!0):i===e}const Eh=g.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),Sh=()=>g.useContext(Eh);function jh(i){const e=g.useRef(void 0);return jo(e.current,i)||(e.current=i),e.current}const zn=i=>{i.stopPropagation(),i.preventDefault(),i.stopImmediatePropagation()},Ch=typeof window<"u"?g.useLayoutEffect:g.useEffect;function pt(i,e,t,r){const s=g.useRef(null),n=g.useRef(!1),a=Array.isArray(t)?Array.isArray(r)?void 0:r:t,o=Fs(i)?i.join(a?.delimiter):i,c=Array.isArray(t)?t:Array.isArray(r)?r:void 0,u=g.useCallback(e,c??[]),d=g.useRef(u);c?d.current=u:d.current=e;const h=jh(a),{activeScopes:v}=Sh(),p=kh();return Ch(()=>{if(h?.enabled===!1||!bh(v,h?.scopes))return;let f=[],_;const y=(P,L=!1)=>{if(!(_h(P)&&!So(P,h?.enableOnFormTags))){if(s.current!==null){const O=s.current.getRootNode();if((O instanceof Document||O instanceof ShadowRoot)&&O.activeElement!==s.current&&!s.current.contains(O.activeElement)){zn(P);return}}P.target?.isContentEditable&&!h?.enableOnContentEditable||Ci(o,h?.delimiter).forEach(O=>{if(O.includes(h?.splitKey??"+")&&O.includes(h?.sequenceSplitKey??">")){console.warn(`Hotkey ${O} contains both ${h?.splitKey??"+"} and ${h?.sequenceSplitKey??">"} which is not supported.`);return}const A=Pi(O,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description);if(A.isSequence){_=setTimeout(()=>{f=[]},h?.sequenceTimeoutMs??1e3);const I=A.useKey?P.key:Ze(P.code);if(wo(I.toLowerCase()))return;f.push(I);const le=A.keys?.[f.length-1];if(I!==le){f=[],_&&clearTimeout(_);return}f.length===A.keys?.length&&(d.current(P,A),_&&clearTimeout(_),f=[])}else if(xh(P,A,h?.ignoreModifiers)||A.keys?.includes("*")){if(h?.ignoreEventWhen?.(P)||L&&n.current)return;if(gh(P,A,h?.preventDefault),!vh(P,A,h?.enabled)){zn(P);return}d.current(P,A),L||(n.current=!0)}})}},S=P=>{P.code!==void 0&&(ko(Ze(P.code)),(h?.keydown===void 0&&h?.keyup!==!0||h?.keydown)&&y(P))},C=P=>{P.code!==void 0&&(Eo(Ze(P.code)),n.current=!1,h?.keyup&&y(P,!0))},x=s.current||a?.document||document;return x.addEventListener("keyup",C,a?.eventListenerOptions),x.addEventListener("keydown",S,a?.eventListenerOptions),p&&Ci(o,h?.delimiter).forEach(P=>p.addHotkey(Pi(P,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description))),()=>{x.removeEventListener("keyup",C,a?.eventListenerOptions),x.removeEventListener("keydown",S,a?.eventListenerOptions),p&&Ci(o,h?.delimiter).forEach(P=>p.removeHotkey(Pi(P,h?.splitKey,h?.sequenceSplitKey,h?.useKey,h?.description))),f=[],_&&clearTimeout(_)}},[o,h,v]),s}function Ph(){const i=V(c=>c.setSearchOpen),e=V(c=>c.setCommandPaletteOpen),t=V(c=>c.setSettingsOpen),r=je(c=>c.enabled),s=je(c=>c.setEnabled),n=fs(),a=W(c=>c.panicKey),o=V(c=>c.setPanicModeActivated);return pt("mod+k",()=>i(!0),{preventDefault:!0}),pt("mod+p",()=>e(!0),{preventDefault:!0}),pt("mod+comma",()=>t(!0),{preventDefault:!0}),pt("mod+shift+h",()=>n("/"),{preventDefault:!0}),pt("mod+shift+g",()=>{r&&n("/g")},{preventDefault:!0}),pt(a.key,()=>{a.enabled&&a.url&&r&&(a.disableExperimentalOnTrigger&&s(!1),o(!0),window.location.href=a.url)},{preventDefault:!0,enabled:a.enabled&&!!a.url&&r}),null}var Gn=1,$h=.9,Nh=.8,Rh=.17,$i=.1,Ni=.999,Fh=.9999,Oh=.99,Ih=/[\\\/_+.#"@\[\(\{&]/,Ah=/[\\\/_+.#"@\[\(\{&]/g,Th=/[\s-]/,Co=/[\s-]/g;function ds(i,e,t,r,s,n,a){if(n===e.length)return s===i.length?Gn:Oh;var o=`${s},${n}`;if(a[o]!==void 0)return a[o];for(var c=r.charAt(n),u=t.indexOf(c,s),d=0,h,v,p,f;u>=0;)h=ds(i,e,t,r,u+1,n+1,a),h>d&&(u===s?h*=Gn:Ih.test(i.charAt(u-1))?(h*=Nh,p=i.slice(s,u-1).match(Ah),p&&s>0&&(h*=Math.pow(Ni,p.length))):Th.test(i.charAt(u-1))?(h*=$h,f=i.slice(s,u-1).match(Co),f&&s>0&&(h*=Math.pow(Ni,f.length))):(h*=Rh,s>0&&(h*=Math.pow(Ni,u-s))),i.charAt(u)!==e.charAt(n)&&(h*=Fh)),(h<$i&&t.charAt(u-1)===r.charAt(n+1)||r.charAt(n+1)===r.charAt(n)&&t.charAt(u-1)!==r.charAt(n))&&(v=ds(i,e,t,r,u+1,n+2,a),v*$i>h&&(h=v*$i)),h>d&&(d=h),u=t.indexOf(c,u+1);return a[o]=d,d}function Vn(i){return i.toLowerCase().replace(Co," ")}function Mh(i,e,t){return i=t&&t.length>0?`${i+" "+t.join(" ")}`:i,ds(i,e,Vn(i),Vn(e),0,0,{})}var Gt='[cmdk-group=""]',Ri='[cmdk-group-items=""]',Lh='[cmdk-group-heading=""]',Po='[cmdk-item=""]',Wn=`${Po}:not([aria-disabled="true"])`,hs="cmdk-item-select",mt="data-value",Dh=(i,e,t)=>Mh(i,e,t),$o=g.createContext(void 0),fr=()=>g.useContext($o),No=g.createContext(void 0),Os=()=>g.useContext(No),Ro=g.createContext(void 0),Fo=g.forwardRef((i,e)=>{let t=_t(()=>{var b,N;return{search:"",value:(N=(b=i.value)!=null?b:i.defaultValue)!=null?N:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=_t(()=>new Set),s=_t(()=>new Map),n=_t(()=>new Map),a=_t(()=>new Set),o=Oo(i),{label:c,children:u,value:d,onValueChange:h,filter:v,shouldFilter:p,loop:f,disablePointerSelection:_=!1,vimBindings:y=!0,...S}=i,C=ot(),x=ot(),P=ot(),L=g.useRef(null),O=Jh();dt(()=>{if(d!==void 0){let b=d.trim();t.current.value=b,A.emit()}},[d]),dt(()=>{O(6,ye)},[]);let A=g.useMemo(()=>({subscribe:b=>(a.current.add(b),()=>a.current.delete(b)),snapshot:()=>t.current,setState:(b,N,F)=>{var $,M,q,ue;if(!Object.is(t.current[b],N)){if(t.current[b]=N,b==="search")ne(),Q(),O(1,ce);else if(b==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let te=document.getElementById(P);te?te.focus():($=document.getElementById(C))==null||$.focus()}if(O(7,()=>{var te;t.current.selectedItemId=(te=ee())==null?void 0:te.id,A.emit()}),F||O(5,ye),((M=o.current)==null?void 0:M.value)!==void 0){let te=N??"";(ue=(q=o.current).onValueChange)==null||ue.call(q,te);return}}A.emit()}},emit:()=>{a.current.forEach(b=>b())}}),[]),I=g.useMemo(()=>({value:(b,N,F)=>{var $;N!==(($=n.current.get(b))==null?void 0:$.value)&&(n.current.set(b,{value:N,keywords:F}),t.current.filtered.items.set(b,le(N,F)),O(2,()=>{Q(),A.emit()}))},item:(b,N)=>(r.current.add(b),N&&(s.current.has(N)?s.current.get(N).add(b):s.current.set(N,new Set([b]))),O(3,()=>{ne(),Q(),t.current.value||ce(),A.emit()}),()=>{n.current.delete(b),r.current.delete(b),t.current.filtered.items.delete(b);let F=ee();O(4,()=>{ne(),F?.getAttribute("id")===b&&ce(),A.emit()})}),group:b=>(s.current.has(b)||s.current.set(b,new Set),()=>{n.current.delete(b),s.current.delete(b)}),filter:()=>o.current.shouldFilter,label:c||i["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:C,inputId:P,labelId:x,listInnerRef:L}),[]);function le(b,N){var F,$;let M=($=(F=o.current)==null?void 0:F.filter)!=null?$:Dh;return b?M(b,t.current.search,N):0}function Q(){if(!t.current.search||o.current.shouldFilter===!1)return;let b=t.current.filtered.items,N=[];t.current.filtered.groups.forEach($=>{let M=s.current.get($),q=0;M.forEach(ue=>{let te=b.get(ue);q=Math.max(te,q)}),N.push([$,q])});let F=L.current;ae().sort(($,M)=>{var q,ue;let te=$.getAttribute("id"),ve=M.getAttribute("id");return((q=b.get(ve))!=null?q:0)-((ue=b.get(te))!=null?ue:0)}).forEach($=>{let M=$.closest(Ri);M?M.appendChild($.parentElement===M?$:$.closest(`${Ri} > *`)):F.appendChild($.parentElement===F?$:$.closest(`${Ri} > *`))}),N.sort(($,M)=>M[1]-$[1]).forEach($=>{var M;let q=(M=L.current)==null?void 0:M.querySelector(`${Gt}[${mt}="${encodeURIComponent($[0])}"]`);q?.parentElement.appendChild(q)})}function ce(){let b=ae().find(F=>F.getAttribute("aria-disabled")!=="true"),N=b?.getAttribute(mt);A.setState("value",N||void 0)}function ne(){var b,N,F,$;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let M=0;for(let q of r.current){let ue=(N=(b=n.current.get(q))==null?void 0:b.value)!=null?N:"",te=($=(F=n.current.get(q))==null?void 0:F.keywords)!=null?$:[],ve=le(ue,te);t.current.filtered.items.set(q,ve),ve>0&&M++}for(let[q,ue]of s.current)for(let te of ue)if(t.current.filtered.items.get(te)>0){t.current.filtered.groups.add(q);break}t.current.filtered.count=M}function ye(){var b,N,F;let $=ee();$&&(((b=$.parentElement)==null?void 0:b.firstChild)===$&&((F=(N=$.closest(Gt))==null?void 0:N.querySelector(Lh))==null||F.scrollIntoView({block:"nearest"})),$.scrollIntoView({block:"nearest"}))}function ee(){var b;return(b=L.current)==null?void 0:b.querySelector(`${Po}[aria-selected="true"]`)}function ae(){var b;return Array.from(((b=L.current)==null?void 0:b.querySelectorAll(Wn))||[])}function Ce(b){let N=ae()[b];N&&A.setState("value",N.getAttribute(mt))}function be(b){var N;let F=ee(),$=ae(),M=$.findIndex(ue=>ue===F),q=$[M+b];(N=o.current)!=null&&N.loop&&(q=M+b<0?$[$.length-1]:M+b===$.length?$[0]:$[M+b]),q&&A.setState("value",q.getAttribute(mt))}function Pe(b){let N=ee(),F=N?.closest(Gt),$;for(;F&&!$;)F=b>0?Kh(F,Gt):Yh(F,Gt),$=F?.querySelector(Wn);$?A.setState("value",$.getAttribute(mt)):be(b)}let ge=()=>Ce(ae().length-1),Ee=b=>{b.preventDefault(),b.metaKey?ge():b.altKey?Pe(1):be(1)},Oe=b=>{b.preventDefault(),b.metaKey?Ce(0):b.altKey?Pe(-1):be(-1)};return g.createElement(Qe.div,{ref:e,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:b=>{var N;(N=S.onKeyDown)==null||N.call(S,b);let F=b.nativeEvent.isComposing||b.keyCode===229;if(!(b.defaultPrevented||F))switch(b.key){case"n":case"j":{y&&b.ctrlKey&&Ee(b);break}case"ArrowDown":{Ee(b);break}case"p":case"k":{y&&b.ctrlKey&&Oe(b);break}case"ArrowUp":{Oe(b);break}case"Home":{b.preventDefault(),Ce(0);break}case"End":{b.preventDefault(),ge();break}case"Enter":{b.preventDefault();let $=ee();if($){let M=new Event(hs);$.dispatchEvent(M)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:I.inputId,id:I.labelId,style:Zh},c),ti(i,b=>g.createElement(No.Provider,{value:A},g.createElement($o.Provider,{value:I},b))))}),Hh=g.forwardRef((i,e)=>{var t,r;let s=ot(),n=g.useRef(null),a=g.useContext(Ro),o=fr(),c=Oo(i),u=(r=(t=c.current)==null?void 0:t.forceMount)!=null?r:a?.forceMount;dt(()=>{if(!u)return o.item(s,a?.id)},[u]);let d=Io(s,n,[i.value,i.children,n],i.keywords),h=Os(),v=Ue(O=>O.value&&O.value===d.current),p=Ue(O=>u||o.filter()===!1?!0:O.search?O.filtered.items.get(s)>0:!0);g.useEffect(()=>{let O=n.current;if(!(!O||i.disabled))return O.addEventListener(hs,f),()=>O.removeEventListener(hs,f)},[p,i.onSelect,i.disabled]);function f(){var O,A;_(),(A=(O=c.current).onSelect)==null||A.call(O,d.current)}function _(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:y,value:S,onSelect:C,forceMount:x,keywords:P,...L}=i;return g.createElement(Qe.div,{ref:lt(n,e),...L,id:s,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!v,"data-disabled":!!y,"data-selected":!!v,onPointerMove:y||o.getDisablePointerSelection()?void 0:_,onClick:y?void 0:f},i.children)}),Bh=g.forwardRef((i,e)=>{let{heading:t,children:r,forceMount:s,...n}=i,a=ot(),o=g.useRef(null),c=g.useRef(null),u=ot(),d=fr(),h=Ue(p=>s||d.filter()===!1?!0:p.search?p.filtered.groups.has(a):!0);dt(()=>d.group(a),[]),Io(a,o,[i.value,i.heading,c]);let v=g.useMemo(()=>({id:a,forceMount:s}),[s]);return g.createElement(Qe.div,{ref:lt(o,e),...n,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),ti(i,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},g.createElement(Ro.Provider,{value:v},p))))}),Uh=g.forwardRef((i,e)=>{let{alwaysRender:t,...r}=i,s=g.useRef(null),n=Ue(a=>!a.search);return!t&&!n?null:g.createElement(Qe.div,{ref:lt(s,e),...r,"cmdk-separator":"",role:"separator"})}),qh=g.forwardRef((i,e)=>{let{onValueChange:t,...r}=i,s=i.value!=null,n=Os(),a=Ue(u=>u.search),o=Ue(u=>u.selectedItemId),c=fr();return g.useEffect(()=>{i.value!=null&&n.setState("search",i.value)},[i.value]),g.createElement(Qe.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:s?i.value:a,onChange:u=>{s||n.setState("search",u.target.value),t?.(u.target.value)}})}),zh=g.forwardRef((i,e)=>{let{children:t,label:r="Suggestions",...s}=i,n=g.useRef(null),a=g.useRef(null),o=Ue(u=>u.selectedItemId),c=fr();return g.useEffect(()=>{if(a.current&&n.current){let u=a.current,d=n.current,h,v=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return v.observe(u),()=>{cancelAnimationFrame(h),v.unobserve(u)}}},[]),g.createElement(Qe.div,{ref:lt(n,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:c.listId},ti(i,u=>g.createElement("div",{ref:lt(a,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Gh=g.forwardRef((i,e)=>{let{open:t,onOpenChange:r,overlayClassName:s,contentClassName:n,container:a,...o}=i;return g.createElement(Ol,{open:t,onOpenChange:r},g.createElement(Il,{container:a},g.createElement(Al,{"cmdk-overlay":"",className:s}),g.createElement(Tl,{"aria-label":i.label,"cmdk-dialog":"",className:n},g.createElement(Fo,{ref:e,...o}))))}),Vh=g.forwardRef((i,e)=>Ue(t=>t.filtered.count===0)?g.createElement(Qe.div,{ref:e,...i,"cmdk-empty":"",role:"presentation"}):null),Wh=g.forwardRef((i,e)=>{let{progress:t,children:r,label:s="Loading...",...n}=i;return g.createElement(Qe.div,{ref:e,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},ti(i,a=>g.createElement("div",{"aria-hidden":!0},a)))}),$t=Object.assign(Fo,{List:zh,Item:Hh,Input:qh,Group:Bh,Separator:Uh,Dialog:Gh,Empty:Vh,Loading:Wh});function Kh(i,e){let t=i.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Yh(i,e){let t=i.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function Oo(i){let e=g.useRef(i);return dt(()=>{e.current=i}),e}var dt=typeof window>"u"?g.useEffect:g.useLayoutEffect;function _t(i){let e=g.useRef();return e.current===void 0&&(e.current=i()),e}function Ue(i){let e=Os(),t=()=>i(e.snapshot());return g.useSyncExternalStore(e.subscribe,t,t)}function Io(i,e,t,r=[]){let s=g.useRef(),n=fr();return dt(()=>{var a;let o=(()=>{var u;for(let d of t){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():s.current}})(),c=r.map(u=>u.trim());n.value(i,o,c),(a=e.current)==null||a.setAttribute(mt,o),s.current=o}),s}var Jh=()=>{let[i,e]=g.useState(),t=_t(()=>new Map);return dt(()=>{t.current.forEach(r=>r()),t.current=new Map},[i]),(r,s)=>{t.current.set(r,s),e({})}};function Xh(i){let e=i.type;return typeof e=="function"?e(i.props):"render"in e?e.render(i.props):i}function ti({asChild:i,children:e},t){return i&&g.isValidElement(e)?g.cloneElement(Xh(e),{ref:e.ref},t(e.props.children)):t(e)}var Zh={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Ao({className:i,...e}){return l.jsx($t,{"data-slot":"command",className:X("text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",i),...e})}function To({title:i="Command Palette",description:e="Search for a command to run...",children:t,className:r,showCloseButton:s=!0,...n}){return l.jsxs(Oi,{...n,children:[l.jsxs(Ii,{className:"sr-only",children:[l.jsx(Ai,{children:i}),l.jsx(Ll,{children:e})]}),l.jsx(Ti,{className:X("overflow-hidden p-0",r),showCloseButton:s,children:l.jsx(Ao,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})]})}function Is({className:i,...e}){return l.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[l.jsx(Cs,{className:"size-4 shrink-0 opacity-50"}),l.jsx($t.Input,{"data-slot":"command-input",className:X("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",i),...e})]})}function As({className:i,...e}){return l.jsx($t.List,{"data-slot":"command-list",className:X("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",i),...e})}function Ts({...i}){return l.jsx($t.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...i})}function sr({className:i,...e}){return l.jsx($t.Group,{"data-slot":"command-group",className:X("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",i),...e})}function ur({className:i,...e}){const t=W(r=>r.disableAllBlur);return l.jsx($t.Item,{"data-slot":"command-item",className:X("data-[selected=true]:bg-accent/50 data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",!t&&"data-[selected=true]:backdrop-blur-md",i),...e})}function ps({className:i,...e}){return l.jsx("span",{"data-slot":"command-shortcut",className:X("text-muted-foreground ml-auto text-xs tracking-widest",i),...e})}function Qh(){const i=V(o=>o.searchOpen),e=V(o=>o.setSearchOpen),t=je(o=>o.enabled),r=fs(),[s,n]=g.useState("Search..."),a=bo.filter(o=>!(o.experimental&&!t));return g.useEffect(()=>{i==!0&&(Math.random()<.05?n("The search begins, I'm back, so enjoy the trip, huh"):n("Search..."))},[i]),l.jsxs(To,{open:i,onOpenChange:e,children:[l.jsx(Is,{placeholder:s}),l.jsxs(As,{children:[l.jsx(Ts,{children:"No results found."}),l.jsx(sr,{children:a.filter(o=>o.href&&!o.newTab).map(o=>l.jsxs(ur,{value:o.href,onSelect:()=>{r({pathname:o.href}),e(!1)},children:[o.icon?l.jsx(o.icon,{}):l.jsx(Mi,{}),o.label,o.kbd&&l.jsx(ps,{children:o.kbd})]},o.href))}),a.filter(o=>o.children).map(o=>l.jsx(sr,{heading:o.label,children:o.children&&o.children.filter(c=>c.href&&!c.newTab).map(c=>l.jsxs(ur,{value:c.href,onSelect:()=>{r({pathname:c.href}),e(!1)},children:[c.icon?l.jsx(c.icon,{}):l.jsx(Mi,{}),c.label,c.kbd&&l.jsx(ps,{children:c.kbd})]},c.href))},o.label)),l.jsx(sr,{children:l.jsx(ep,{})})]})]})}function ep(){const i=Ue(s=>s.search),e=je(s=>s.enabled),t=je(s=>s.toggle),r=V(s=>s.setSearchOpen);return l.jsxs(ur,{onSelect:()=>{t(),r(!1)},className:i.toLowerCase().includes("exp")||e?"":"hidden",children:[e?l.jsx(Qn,{}):l.jsx(Dl,{}),e?"Disable":"Enable"," Experimental Features"]})}const tp=Object.entries(Yr).map(([i,e])=>({value:i,label:e.name}));function rp({className:i}){const[e,t]=g.useState(!1),r=W(n=>n.theme),s=W(n=>n.setTheme);return l.jsxs(Ao,{children:[l.jsx(Is,{placeholder:"Search theme...",className:"h-9"}),l.jsxs(As,{children:[l.jsx(Ts,{children:"No theme found."}),l.jsx(sr,{children:tp.map(n=>l.jsxs(ur,{value:n.value,onSelect:a=>{s({theme:a}),t(!1)},children:[n.label,l.jsx(zl,{className:X("ml-auto",r.theme===n.value?"opacity-100":"opacity-0")})]},n.value))})]})]})}function ip({className:i}){const e=W(s=>s.theme),t=W(s=>s.setTheme),r=Yr[e.theme];return!r||!r.dark||!r.light?null:l.jsxs(Hl,{children:[l.jsx(Bl,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"icon",className:i,children:[l.jsx(Kd,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),l.jsx(Ld,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),l.jsx("span",{className:"sr-only",children:"Toggle theme mode"})]})}),l.jsx(Ul,{align:"end",children:l.jsxs(ql,{value:e.mode,onValueChange:s=>t({mode:s}),children:[l.jsx(qs,{value:"light",children:"Light"}),l.jsx(qs,{value:"dark",children:"Dark"})]})})]})}function sp(i){const e=np(i),t=g.forwardRef((r,s)=>{const{children:n,...a}=r,o=g.Children.toArray(n),c=o.find(op);if(c){const u=c.props.children,d=o.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...a,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...a,ref:s,children:n})});return t.displayName=`${i}.Slot`,t}function np(i){const e=g.forwardRef((t,r)=>{const{children:s,...n}=t;if(g.isValidElement(s)){const a=cp(s),o=lp(n,s.props);return s.type!==g.Fragment&&(o.ref=r?lt(r,a):a),g.cloneElement(s,o)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var ap=Symbol("radix.slottable");function op(i){return g.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===ap}function lp(i,e){const t={...e};for(const r in e){const s=i[r],n=e[r];/^on[A-Z]/.test(r)?s&&n?t[r]=(...o)=>{const c=n(...o);return s(...o),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...n}:r==="className"&&(t[r]=[s,n].filter(Boolean).join(" "))}return{...i,...t}}function cp(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var up=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mo=up.reduce((i,e)=>{const t=sp(`Primitive.${e}`),r=g.forwardRef((s,n)=>{const{asChild:a,...o}=s,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:n})});return r.displayName=`Primitive.${e}`,{...i,[e]:r}},{}),ri="Switch",[dp]=Jn(ri),[hp,pp]=dp(ri),Lo=g.forwardRef((i,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:n,required:a,disabled:o,value:c="on",onCheckedChange:u,form:d,...h}=i,[v,p]=g.useState(null),f=gs(e,x=>p(x)),_=g.useRef(!1),y=v?d||!!v.closest("form"):!0,[S,C]=Yn({prop:s,defaultProp:n??!1,onChange:u,caller:ri});return l.jsxs(hp,{scope:t,checked:S,disabled:o,children:[l.jsx(Mo.button,{type:"button",role:"switch","aria-checked":S,"aria-required":a,"data-state":Uo(S),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:f,onClick:Xn(i.onClick,x=>{C(P=>!P),y&&(_.current=x.isPropagationStopped(),_.current||x.stopPropagation())})}),y&&l.jsx(Bo,{control:v,bubbles:!_.current,name:r,value:c,checked:S,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Lo.displayName=ri;var Do="SwitchThumb",Ho=g.forwardRef((i,e)=>{const{__scopeSwitch:t,...r}=i,s=pp(Do,t);return l.jsx(Mo.span,{"data-state":Uo(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Ho.displayName=Do;var fp="SwitchBubbleInput",Bo=g.forwardRef(({__scopeSwitch:i,control:e,checked:t,bubbles:r=!0,...s},n)=>{const a=g.useRef(null),o=gs(a,n),c=Vl(t),u=Wl(e);return g.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==t&&p){const f=new Event("click",{bubbles:r});p.call(d,t),d.dispatchEvent(f)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:o,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Bo.displayName=fp;function Uo(i){return i?"checked":"unchecked"}var gp=Lo,vp=Ho;function Vt({className:i,...e}){return l.jsx(gp,{"data-slot":"switch",className:X("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),...e,children:l.jsx(vp,{"data-slot":"switch-thumb",className:X("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function mp(){const i=V(x=>x.settingsOpen),e=V(x=>x.setSettingsOpen),t=W(x=>x.panicKey),r=W(x=>x.setPanicKey),s=W(x=>x.cloak),n=W(x=>x.setCloak),a=je(x=>x.enabled),o=Us(x=>x.historyCollectionEnabled),c=Us(x=>x.setHistoryCollectionEnabled),u=Sl(x=>x.history),d=W(x=>x.disableBlurBehind),h=W(x=>x.setDisableBlurBehind),v=W(x=>x.disableAllBlur),p=W(x=>x.setDisableAllBlur),f=W(x=>x.disableAnimations),_=W(x=>x.setDisableAnimations),y=V(x=>x.setLoadingOverlayOpen),S=V(x=>x.setLoadingOverlayMessage),C=Be.useSession();return l.jsx(Oi,{open:i,onOpenChange:e,children:l.jsxs(Ti,{className:"max-h-[85vh] overflow-y-auto max-w-7xl! w-[90vw]",children:[l.jsx(Ii,{children:l.jsx(Ai,{children:"Settings"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[C.data?.user&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4",children:[l.jsx(Jl,{}),l.jsx(Xl,{})]}),l.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[l.jsx(Zl,{className:"grow"}),l.jsxs(Oi,{children:[l.jsx(Ml,{asChild:!0,children:l.jsxs(me,{variant:"ghost",size:"lg",className:"border rounded-xl",children:[l.jsx(Ql,{}),"Sessions"]})}),l.jsxs(Ti,{className:"p-0",children:[l.jsx(Ii,{className:"sr-only",children:l.jsx(Ai,{children:"Sessions"})}),l.jsx(ec,{className:"border-0"})]})]})]})]}),l.jsxs(Ft,{className:"gap-0 pb-0 overflow-hidden relative",children:[l.jsx(Ot,{children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(yl,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Theme"})]})}),l.jsxs(At,{className:"flex flex-col gap-4 p-0 h-full",children:[l.jsx(ip,{className:"absolute right-4 top-4"}),l.jsx(rp,{})]})]}),l.jsxs(Ft,{children:[l.jsx(Ot,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mi,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Panic Key"})]}),l.jsx(Vt,{checked:t.enabled,onCheckedChange:x=>r({enabled:x})})]})}),l.jsx(At,{className:"flex flex-col gap-4",children:l.jsxs("div",{className:X("flex flex-col gap-4",!t.enabled&&"opacity-50"),children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(sc,{className:"h-3.5 w-3.5 text-muted-foreground"}),l.jsx("label",{htmlFor:"panic-key-url",className:"text-sm font-medium leading-none",children:"Redirect URL"})]}),l.jsx(gr,{id:"panic-key-url",type:"url",placeholder:"https://classroom.google.com",value:t.url,onChange:x=>r({url:x.target.value}),disabled:!t.enabled}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"The URL to redirect to when the panic key is pressed"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ll,{className:"h-3.5 w-3.5 text-muted-foreground"}),l.jsx("label",{htmlFor:"panic-key-combination",className:"text-sm font-medium leading-none",children:"Key Combination"})]}),l.jsx(gr,{id:"panic-key-combination",type:"text",placeholder:"mod+shift+p",value:t.key,onChange:x=>r({key:x.target.value}),disabled:!t.enabled}),l.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[l.jsx(fo,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),l.jsx("p",{children:'Use format like "mod+shift+p" or "escape". "mod" is Cmd on Mac, Ctrl on Windows/Linux.'})]})]}),l.jsxs("div",{className:"flex items-start gap-3 pt-2",children:[l.jsx(Gl,{id:"panic-key-disable-experimental",checked:t.disableExperimentalOnTrigger,onCheckedChange:x=>r({disableExperimentalOnTrigger:x===!0}),className:"mt-1",disabled:!t.enabled}),l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("label",{htmlFor:"panic-key-disable-experimental",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Experimental Features on Trigger"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically disable experimental features when panic key is activated"})]})]})]})})]}),a&&l.jsxs(Ft,{children:[l.jsxs(Ot,{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(nc,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Cloak"})]}),l.jsx(zs,{children:"Change the title and icon of the browser tab"})]}),l.jsxs(At,{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Kl,{value:s.mode,onValueChange:x=>n({mode:x}),children:l.jsxs(Yl,{className:"w-full",children:[l.jsx(ci,{value:"off",children:"Off"}),l.jsx(ci,{value:"when-not-focused",children:"Unfocused"}),l.jsx(ci,{value:"on",children:"Always"})]})})}),l.jsxs("div",{className:X("flex flex-col gap-4",s.mode==="off"&&"opacity-50"),children:[l.jsx(et,{}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{htmlFor:"cloak-title",className:"text-sm font-medium leading-none",children:"Tab Title"}),l.jsx(gr,{id:"cloak-title",type:"text",value:s.title,onChange:x=>n({title:x.target.value}),disabled:s.mode==="off"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"The title that will appear in the browser tab"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{htmlFor:"cloak-favicon",className:"text-sm font-medium leading-none",children:"Favicon URL"}),l.jsx(gr,{id:"cloak-favicon",type:"url",value:s.favicon,onChange:x=>n({favicon:x.target.value}),disabled:s.mode==="off"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"URL to the image that will appear in the browser tab"})]})]})]})]})]}),l.jsxs(Ft,{children:[l.jsx(Ot,{children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Rd,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Performance"})]})}),l.jsxs(At,{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-all-blur",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable All Blur Effects"})}),l.jsx(Vt,{id:"disable-all-blur",checked:v,onCheckedChange:p})]}),l.jsx(et,{}),l.jsxs("div",{className:X("flex items-center justify-between",v&&"opacity-50"),children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-blur-behind",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Blur Behind Effects"})}),l.jsx(Vt,{id:"disable-blur-behind",checked:d,onCheckedChange:h,disabled:v})]}),l.jsx(et,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("label",{htmlFor:"disable-animations",className:"text-sm font-medium leading-none cursor-pointer",children:"Disable Animations"})}),l.jsx(Vt,{id:"disable-animations",checked:f,onCheckedChange:_})]})]})]}),l.jsxs(Ft,{children:[l.jsxs(Ot,{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(go,{className:"h-4 w-4 text-muted-foreground"}),l.jsx(It,{children:"Privacy"})]}),l.jsx(zs,{children:"Manage your privacy settings and data"})]}),l.jsxs(At,{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{htmlFor:"history-collection",className:"text-sm font-medium leading-none cursor-pointer",children:"History Collection"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Track your browsing history for quick access"})]}),l.jsx(Vt,{id:"history-collection",checked:o,onCheckedChange:c})]}),l.jsx(et,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Clear History"}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Remove all items from your browsing history",u.length>0&&` (${u.length} items)`]})]}),l.jsxs(vr,{children:[l.jsx(mr,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"sm",disabled:u.length===0,children:[l.jsx(ac,{className:"h-4 w-4"}),"Clear"]})}),l.jsxs(_r,{children:[l.jsxs(yr,{children:[l.jsx(br,{children:"Clear History"}),l.jsx(xr,{children:"Are you sure you want to clear all browsing history? This action cannot be undone."})]}),l.jsxs(wr,{children:[l.jsx(kr,{children:"Cancel"}),l.jsx(Er,{onClick:jl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear History"})]})]})]})]})}),l.jsx(et,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Reset Settings"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset all settings to their default values"})]}),l.jsxs(vr,{children:[l.jsx(mr,{asChild:!0,children:l.jsxs(me,{variant:"outline",size:"sm",children:[l.jsx(oc,{className:"h-4 w-4"}),"Reset"]})}),l.jsxs(_r,{children:[l.jsxs(yr,{children:[l.jsx(br,{children:"Reset Settings"}),l.jsx(xr,{children:"Are you sure you want to reset all settings to their default values? This action cannot be undone."})]}),l.jsxs(wr,{children:[l.jsx(kr,{children:"Cancel"}),l.jsx(Er,{onClick:Cl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Reset Settings"})]})]})]})]})}),l.jsx(et,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Clear Everything"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all local storage, cookies, and data. This will reload the page."})]}),l.jsxs(vr,{children:[l.jsx(mr,{asChild:!0,children:l.jsxs(me,{variant:"destructive",size:"sm",children:[l.jsx(Wt,{className:"h-4 w-4"}),"Clear All"]})}),l.jsxs(_r,{children:[l.jsxs(yr,{children:[l.jsxs(br,{className:"flex items-center gap-2",children:[l.jsx(Wt,{className:"h-5 w-5 text-destructive"}),"Clear Everything"]}),l.jsxs(xr,{children:["This will permanently delete all your data including:",l.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[l.jsx("li",{children:"All settings and preferences"}),l.jsx("li",{children:"Browsing history"}),l.jsx("li",{children:"Saved games"}),l.jsx("li",{children:"Local storage data"}),l.jsx("li",{children:"Cookies"}),l.jsx("li",{children:"Session storage"})]}),l.jsx("p",{className:"mt-2 font-medium",children:"This action cannot be undone and will reload the page."})]})]}),l.jsxs(wr,{children:[l.jsx(kr,{children:"Cancel"}),l.jsx(Er,{onClick:Pl,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear Everything"})]})]})]})]})}),C.data?.user&&l.jsxs(l.Fragment,{children:[l.jsx(et,{}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("p",{className:"text-sm font-medium leading-none",children:"Delete Account"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete your account and all associated data. This action cannot be undone."})]}),l.jsxs(vr,{children:[l.jsx(mr,{asChild:!0,children:l.jsxs(me,{variant:"destructive",size:"sm",children:[l.jsx(Wt,{className:"h-4 w-4"}),"Delete Account"]})}),l.jsxs(_r,{children:[l.jsxs(yr,{children:[l.jsxs(br,{className:"flex items-center gap-2",children:[l.jsx(Wt,{className:"h-5 w-5 text-destructive"}),"Delete Account"]}),l.jsxs(xr,{className:"grid gap-2",children:["This will permanently delete your account and all associated data. This action cannot be undone.",l.jsx("div",{className:"p-2 border rounded-xl flex flex-row gap-2 items-center",children:l.jsx(ea,{variant:"ghost",className:"w-full pointer-events-none [&>svg]:hidden justify-start"})})]})]}),l.jsxs(wr,{children:[l.jsx(kr,{children:"Cancel"}),l.jsx(Er,{onClick:async()=>{y(!0),S("Deleting account..."),await Be.deleteUser(),y(!1)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Account"})]})]})]})]})})]})]})]})]})]})})}var _p=(i,e,t,r,s,n,a,o)=>{let c=document.documentElement,u=["light","dark"];function d(p){(Array.isArray(i)?i:[i]).forEach(f=>{let _=f==="class",y=_&&n?s.map(S=>n[S]||S):s;_?(c.classList.remove(...y),c.classList.add(n&&n[p]?n[p]:p)):c.setAttribute(f,p)}),h(p)}function h(p){o&&u.includes(p)&&(c.style.colorScheme=p)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let p=localStorage.getItem(e)||t,f=a&&p==="system"?v():p;d(f)}catch{}},yp=g.createContext(void 0),bp={setTheme:i=>{},themes:[]},xp=()=>{var i;return(i=g.useContext(yp))!=null?i:bp};g.memo(({forcedTheme:i,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:n,value:a,themes:o,nonce:c,scriptProps:u})=>{let d=JSON.stringify([t,e,n,i,o,a,r,s]).slice(1,-1);return g.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${_p.toString()})(${d})`}})});const wp=({...i})=>{const{theme:e="system"}=xp();return l.jsx(lc,{theme:e,className:"toaster group",icons:{success:l.jsx(Qn,{className:"size-4"}),info:l.jsx(fo,{className:"size-4"}),warning:l.jsx(Wt,{className:"size-4"}),error:l.jsx(Hd,{className:"size-4"}),loading:l.jsx(uc,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...i})};function kp({children:i,client:e,authClient:t}){const r=Ep(t);return g.useEffect(()=>{(async()=>{const s=new URL(window.location?.href),n=s.searchParams.get("ott");if(n){const a=t;s.searchParams.delete("ott");const c=(await a.crossDomain.oneTimeToken.verify({token:n})).data?.session;c&&(await t.getSession({fetchOptions:{headers:{Authorization:`Bearer ${c.token}`}}}),a.updateSession()),window.history.replaceState({},"",s)}})()},[t]),l.jsx(Nl,{client:e,useAuth:r,children:i})}function Ep(i){return g.useMemo(()=>function(){const{data:t,isPending:r}=i.useSession(),s=t?.session.id,n=g.useCallback(async()=>{try{const{data:a}=await i.convex.token();return a?.token||null}catch{return null}},[s]);return g.useMemo(()=>({isLoading:r,isAuthenticated:t!==null,fetchAccessToken:n}),[r,s,n])},[i])}function Sp(){const i=Kn(),e=V(n=>n.setSearchOpen),t=V(n=>n.setSettingsOpen),r=je(n=>n.enabled),s=Be.useSession();return l.jsx("div",{className:"flex flex-row gap-1 items-center sticky top-0 z-40 from-sidebar to-transparent bg-linear-to-b py-2",children:l.jsxs(Zn,{mode:"popLayout",children:[(!r||!i.open||i.isMobile)&&l.jsxs(Ar.div,{initial:{opacity:0,filter:"blur(5px)",x:-50},animate:{opacity:1,filter:"blur(0)",x:0},exit:{opacity:0,filter:"blur(5px)",x:-50},transition:{duration:.2},className:"flex flex-row gap-2",children:[l.jsx(me,{variant:"ghost",size:"icon",asChild:!0,children:l.jsx(at,{to:"/",children:l.jsx("img",{src:"/edutools-black.svg",className:"dark:invert size-6",alt:""})})}),l.jsxs(ai,{children:[l.jsx(oi,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>e(!0),children:l.jsx(Cs,{})})}),l.jsx(li,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Search",l.jsxs(ir,{children:[l.jsx(Le,{className:"text-nowrap",children:""}),l.jsx(Le,{className:"text-nowrap",children:"K"})]})]})})]})]},"header-sidebar-collapsed-buttons"),r&&l.jsx(Ar.div,{layout:!0,transition:{duration:.2},children:l.jsxs(ai,{children:[l.jsx(oi,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>i.toggleSidebar(),children:l.jsx(Ud,{})})}),l.jsx(li,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Toggle Sidebar",l.jsxs(ir,{children:[l.jsx(Le,{className:"text-nowrap",children:""}),l.jsx(Le,{className:"text-nowrap",children:"B"})]})]})})]})},"header-sidebar"),l.jsx("div",{className:"grow"}),l.jsx("div",{className:"flex flex-row gap-1",children:r&&l.jsxs(l.Fragment,{children:[!s.isPending&&l.jsx(l.Fragment,{children:s.data?.user?l.jsx(me,{variant:"ghost",asChild:!0,children:l.jsx(ea,{disableDefaultLinks:!0,size:"sm",variant:"ghost"})}):l.jsxs(l.Fragment,{children:[l.jsx(me,{variant:"ghost",asChild:!0,children:l.jsx(at,{to:"/auth/sign-in",children:"Sign in"})}),l.jsx(me,{variant:"outline",asChild:!0,children:l.jsx(at,{to:"/auth/sign-up",children:"Sign up"})})]})}),l.jsxs(ai,{children:[l.jsx(oi,{asChild:!0,children:l.jsx(me,{variant:"ghost",size:"icon",onClick:()=>t(!0),children:l.jsx(ta,{})})}),l.jsx(li,{children:l.jsxs("div",{className:"flex items-center gap-2",children:["Settings",l.jsxs(ir,{children:[l.jsx(Le,{className:"text-nowrap",children:""}),l.jsx(Le,{className:"text-nowrap",children:","})]})]})})]})]})},"header-right")]})})}function jp(){const i=W(n=>n.cloak),e=je(n=>n.enabled),t=g.useRef(null),r=g.useRef(null),s=g.useRef(null);g.useEffect(()=>{if(t.current===null&&(t.current=document.title),!s.current){let n=document.querySelector('link[rel="icon"]');if(n||(n=document.createElement("link"),n.rel="icon",document.head.appendChild(n)),s.current=n,r.current===null){const a=n.href||n.getAttribute("href")||"";if(a)try{r.current=new URL(a,window.location.href).href}catch{r.current=a}else r.current=new URL("/favicon.ico",window.location.href).href}}},[]),g.useEffect(()=>{if(!(!e||i.mode!=="on"))return i.title&&(document.title=i.title),i.favicon&&s.current&&(s.current.href=i.favicon),()=>{t.current&&(document.title=t.current),r.current&&s.current&&(s.current.href=r.current)}},[e,i.mode,i.title,i.favicon]),g.useEffect(()=>{if(!e||i.mode!=="when-not-focused")return;const n=()=>{s.current&&(document.hidden?(i.title&&(document.title=i.title),i.favicon&&(s.current.href=i.favicon)):(t.current&&(document.title=t.current),r.current&&(s.current.href=r.current)))};return n(),document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n),t.current&&(document.title=t.current),r.current&&s.current&&(s.current.href=r.current)}},[e,i.mode,i.title,i.favicon]),g.useEffect(()=>{e&&i.mode!=="off"||(t.current&&(document.title=t.current),r.current&&s.current&&(s.current.href=r.current))},[e,i.mode])}function Cp(){const{loadingOverlayOpen:i,loadingOverlayMessage:e}=V();return l.jsxs("div",{className:X("fixed inset-0 z-10000000 flex items-center justify-center bg-black/50 pointer-events-none opacity-0 transition-opacity duration-200 backdrop-blur-2xl gap-2",i&&"opacity-100 pointer-events-auto"),children:[l.jsx(dc,{}),l.jsx("p",{className:"text-sm text-white",children:e})]})}function Pp(){const i=V(o=>o.commandPaletteOpen),e=V(o=>o.setCommandPaletteOpen),t=V(o=>o.setSettingsOpen),r=V(o=>o.setLoadingOverlayOpen),s=V(o=>o.setLoadingOverlayMessage),n=Be.useSession(),a=[{label:"Settings",icon:ta,onSelect:()=>{t(!0)},kbd:" ,"},...n.data?.user?[{label:"Sign out",icon:tc,onSelect:async()=>{r(!0),s("Signing out..."),await Be.signOut(),r(!1)}}]:[{label:"Github",id:"github"},{label:"Google",id:"google"},{label:"Discord",id:"discord"}].map(o=>({label:"Continue with "+o.label,icon:rc,onSelect:async()=>{const c=new URL("https://majestic-oriole-711.convex.site"),u=new URL("/auth",c);u.searchParams.set("redirect",window.location.href),r(!0),s("Signing in..."),await Be.signIn.social({provider:o.id,callbackURL:u.toString()})}}))];return l.jsxs(To,{open:i,onOpenChange:e,children:[l.jsx(Is,{placeholder:"Search commands"}),l.jsxs(As,{children:[l.jsx(Ts,{children:"No results found."}),l.jsx(sr,{children:a.map(o=>l.jsxs(ur,{value:o.label,onSelect:()=>{o.onSelect(),e(!1)},children:[o.icon&&l.jsx(o.icon,{}),o.label,o.kbd&&l.jsx(ps,{children:o.kbd})]},o.label))})]})]})}function Af({}){return[{title:"EduTools"}]}const Tf=()=>[{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Schibsted+Grotesk:ital,wght@0,400..900;1,400..900&display=swap"}],$p=new Rl("https://majestic-oriole-711.convex.cloud");function Mf({children:i}){const e=fs(),[t,r]=g.useState("");g.useEffect(()=>{r(location.protocol+"//"+location.host)},[]);const s=W(f=>f.theme),n=W(f=>f.disableBlurBehind),a=W(f=>f.disableAllBlur),o=W(f=>f.disableAnimations),c=je(f=>f.enabled),u=je(f=>f.setEnabled),d=V(f=>f.panicModeActivated);jp(),g.useEffect(()=>{const f=window.document.documentElement;Object.keys(Yr).forEach(_=>{f.classList.remove("theme-"+_)}),f.classList.remove("dark"),Yr[s.theme][s.mode]?s.mode=="dark"&&f.classList.add("dark"):s.mode!="dark"&&f.classList.add("dark"),f.classList.add("theme-"+s.theme)},[s]),g.useEffect(()=>{const f=window.document.documentElement;n||a?f.classList.add("disable-blur-behind"):f.classList.remove("disable-blur-behind")},[n,a]),g.useEffect(()=>{const f=window.document.documentElement;a?f.classList.add("disable-all-blur"):f.classList.remove("disable-all-blur")},[a]),g.useEffect(()=>{const f=window.document.documentElement;o?f.classList.add("disable-animations"):f.classList.remove("disable-animations")},[o]);const h=({href:f,..._})=>l.jsx(at,{to:f,..._}),v=V(f=>f.setLoadingOverlayOpen),p=V(f=>f.setLoadingOverlayMessage);return g.useEffect(()=>{JSON.parse(localStorage.getItem("preferences")||"{}").experimentalFeatures&&(u(!0),localStorage.removeItem("preferences"),setTimeout(()=>{cc.success("Migrated to new EduTools")},500))},[]),l.jsxs("html",{className:"theme-default dark",lang:"en",children:[l.jsxs("head",{children:[l.jsx("meta",{charSet:"utf-8"}),l.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),l.jsx(Wo,{}),l.jsx(Ko,{})]}),l.jsx("body",{children:l.jsx(Ed,{apiKey:"phc_jg4gOdigfHQD4MSgrSaO883dp2LjNJbJO7azv61UtI0",options:{api_host:"https://2094835769823485010.ingo.au",defaults:"2025-05-24",capture_exceptions:!0,debug:!1,person_profiles:"always"},children:l.jsx(kp,{client:$p,authClient:Be,children:l.jsx(dh,{reducedMotion:o?"always":"user",transition:{ease:Fi},children:l.jsxs(ic,{authClient:Be,navigate:e,Link:h,credentials:!1,social:{providers:["github","google","discord"],signIn:f=>{const _=new URL("https://majestic-oriole-711.convex.site"),y=new URL("/auth",_);return y.searchParams.set("redirect",f.callbackURL||""),v(!0),p("Signing in..."),Be.signIn.social({...f,callbackURL:y.toString()})}},deleteUser:!0,optimistic:!0,avatar:!0,changeEmail:!1,baseURL:t,children:[!d&&l.jsxs(cl,{className:X(!c&&"md:pl-2"),children:[l.jsx(hh,{}),l.jsxs("div",{className:X("flex flex-col w-full p-2 pt-0 md:pl-0 md:peer-data-[variant=inset]:peer-data-[state=collapsed]:pl-2 duration-200"),children:[l.jsx(Sp,{}),l.jsx(ul,{className:"w-full rounded-md! overflow-hidden",children:l.jsx("main",{className:"w-full h-full relative",children:i})})]})]}),l.jsx(Yo,{}),l.jsx(Jo,{}),l.jsx(Ph,{}),l.jsx(Qh,{}),l.jsx(Pp,{}),l.jsx(mp,{}),l.jsx(wp,{}),l.jsx(Cp,{})]})})})})})]})}const Lf=Go(function(){return l.jsx(l.Fragment,{children:l.jsx(Xo,{})})}),Df=Vo(function({error:e}){let t="Something went wrong",r="An unexpected error occurred.",s;return Zo(e)&&(t=e.status===404?"404":"Error",r=e.status===404?"The requested page could not be found.":e.statusText||r),l.jsx("main",{className:"w-full h-full max-w-screen flex flex-col gap-2 items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-4xl flex flex-col gap-4 items-center justify-center",children:[l.jsx("h1",{className:"text-4xl text-center",children:t}),l.jsx("p",{className:"text-center",children:r}),s]})})});export{Df as ErrorBoundary,Mf as Layout,Lf as default,Tf as links,Af as meta};
